var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);function n(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var a,i,o,l,c={exports:{}},u={},d={exports:{}},h={};function f(){if(a)return h;a=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function j(t,n,r){var s,a={},i=null,o=null;if(null!=n)for(s in void 0!==n.ref&&(o=n.ref),void 0!==n.key&&(i=""+n.key),n)k.call(n,s)&&!S.hasOwnProperty(s)&&(a[s]=n[s]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps)void 0===a[s]&&(a[s]=l[s]);return{$$typeof:e,type:t,key:i,ref:o,props:a,_owner:_.current}}function E(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var N=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(n,r,s,a,i){var o=typeof n;"undefined"!==o&&"boolean"!==o||(n=null);var l=!1;if(null===n)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case e:case t:l=!0}}if(l)return i=i(l=n),n=""===a?"."+C(l,0):a,x(i)?(s="",null!=n&&(s=n.replace(N,"$&/")+"/"),T(i,r,s,"",function(e){return e})):null!=i&&(E(i)&&(i=function(t,n){return{$$typeof:e,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(N,"$&/")+"/")+n)),r.push(i)),1;if(l=0,a=""===a?".":a+":",x(n))for(var c=0;c<n.length;c++){var u=a+C(o=n[c],c);l+=T(o,r,s,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(n),"function"==typeof u)for(n=u.call(n),c=0;!(o=n.next()).done;)l+=T(o=o.value,r,s,u=a+C(o,c++),i);else if("object"===o)throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},I={transition:null},A={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:I,ReactCurrentOwner:_};function $(){throw Error("act(...) is not supported in production builds of React.")}return h.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},h.Component=v,h.Fragment=n,h.Profiler=s,h.PureComponent=b,h.StrictMode=r,h.Suspense=c,h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,h.act=$,h.cloneElement=function(t,n,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=m({},t.props),a=t.key,i=t.ref,o=t._owner;if(null!=n){if(void 0!==n.ref&&(i=n.ref,o=_.current),void 0!==n.key&&(a=""+n.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in n)k.call(n,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===n[c]&&void 0!==l?l[c]:n[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:e,type:t.type,key:a,ref:i,props:s,_owner:o}},h.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},h.createElement=j,h.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},h.createRef=function(){return{current:null}},h.forwardRef=function(e){return{$$typeof:l,render:e}},h.isValidElement=E,h.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},h.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},h.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},h.unstable_act=$,h.useCallback=function(e,t){return P.current.useCallback(e,t)},h.useContext=function(e){return P.current.useContext(e)},h.useDebugValue=function(){},h.useDeferredValue=function(e){return P.current.useDeferredValue(e)},h.useEffect=function(e,t){return P.current.useEffect(e,t)},h.useId=function(){return P.current.useId()},h.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},h.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},h.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},h.useMemo=function(e,t){return P.current.useMemo(e,t)},h.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},h.useRef=function(e){return P.current.useRef(e)},h.useState=function(e){return P.current.useState(e)},h.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},h.useTransition=function(){return P.current.useTransition()},h.version="18.3.1",h}function p(){return i||(i=1,d.exports=f()),d.exports}
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m=(l||(l=1,c.exports=function(){if(o)return u;o=1;var e=p(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(e,n,i){var o,l={},c=null,u=null;for(o in void 0!==i&&(c=""+i),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)r.call(n,o)&&!a.hasOwnProperty(o)&&(l[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps)void 0===l[o]&&(l[o]=n[o]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:s.current}}return u.Fragment=n,u.jsx=i,u.jsxs=i,u}()),c.exports),g=p();const v=r(g);var y,b,w,x,k,_={},S={exports:{}},j={},E={exports:{}},N={};function C(){return b||(b=1,E.exports=(y||(y=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var s=n(c);null!==s;){if(null===s.callback)r(c);else{if(!(s.startTime<=e))break;r(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function w(e){if(m=!1,b(e),!p)if(null!==n(l))p=!0,P(x);else{var t=n(c);null!==t&&I(w,t.startTime-e)}}function x(t,s){p=!1,m&&(m=!1,v(j),j=-1),f=!0;var a=h;try{for(b(s),d=n(l);null!==d&&(!(d.expirationTime>s)||t&&!C());){var i=d.callback;if("function"==typeof i){d.callback=null,h=d.priorityLevel;var o=i(d.expirationTime<=s);s=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),b(s)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&I(w,g.startTime-s),u=!1}return u}finally{d=null,h=a,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,_=!1,S=null,j=-1,E=5,N=-1;function C(){return!(e.unstable_now()-N<E)}function T(){if(null!==S){var t=e.unstable_now();N=t;var n=!0;try{n=S(!0,t)}finally{n?k():(_=!1,S=null)}}else _=!1}if("function"==typeof y)k=function(){y(T)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=T,k=function(){R.postMessage(null)}}else k=function(){g(T,0)};function P(e){S=e,_||(_=!0,k())}function I(t,n){j=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,P(x))},e.unstable_forceFrameRate=function(e){0>e||125<e||(E=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,a){var i=e.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?i+a:i,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:s,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(r.sortIndex=a,t(c,r),null===n(l)&&r===n(c)&&(m?(v(j),j=-1):m=!0,I(w,a-i))):(r.sortIndex=o,t(l,r),p||f||(p=!0,P(x))),r},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(N)),N)),E.exports}
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function T(){if(w)return j;w=1;var e=p(),t=C();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(e,t){i(e,t),i(e+"Capture",t)}function i(e,t){for(s[e]=t,e=0;e<t.length;e++)r.add(t[e])}var o=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function h(e,t,n,r,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function v(e,t,n,r){var s=f.hasOwnProperty(t)?f[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!l.call(d,e)||!l.call(u,e)&&(c.test(e)?d[e]=!0:(u[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(m,g);f[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(m,g);f[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(m,g);f[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),$=Symbol.iterator;function M(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=$&&e[$]||e["@@iterator"])?e:null}var D,L=Object.assign;function z(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var s=c.stack.split("\n"),a=r.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function F(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case S:return"Profiler";case _:return"StrictMode";case O:return"Suspense";case R:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(n(92));if(ne(r)){if(1<r.length)throw Error(n(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function ie(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,de,he=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(n(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,je=null;function Ee(e){if(e=ws(e)){if("function"!=typeof _e)throw Error(n(280));var t=e.stateNode;t&&(t=ks(t),_e(e.stateNode,e.type,t))}}function Ne(e){Se?je?je.push(e):je=[e]:Se=e}function Ce(){if(Se){var e=Se,t=je;if(je=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Oe(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Te(e,t,n)}finally{Re=!1,(null!==Se||null!==je)&&(Oe(),Ce())}}function Ie(e,t){var r=e.stateNode;if(null===r)return null;var s=ks(r);if(null===s)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(n(231,t,typeof r));return r}var Ae=!1;if(o)try{var $e={};Object.defineProperty($e,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",$e,$e),window.removeEventListener("test",$e,$e)}catch(de){Ae=!1}function Me(e,t,n,r,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Le=null,ze=!1,Ue=null,Be={onError:function(e){De=!0,Le=e}};function Fe(e,t,n,r,s,a,i,o,l){De=!1,Le=null,Me.apply(Be,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(We(e)!==e)throw Error(n(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(s=a.return)){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Ve(a),e;if(i===s)return Ve(a),t;i=i.sibling}throw Error(n(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(n(189))}}if(r.alternate!==s)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=t.unstable_scheduleCallback,Je=t.unstable_cancelCallback,Qe=t.unstable_shouldYield,Ye=t.unstable_requestPaint,Xe=t.unstable_now,Ze=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,tt=t.unstable_UserBlockingPriority,nt=t.unstable_NormalPriority,rt=t.unstable_LowPriority,st=t.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ct|0)|0},lt=Math.log,ct=Math.LN2;var ut=64,dt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~s;0!==o?r=ht(o):0!==(a&=i)&&(r=ht(a))}else 0!==(i=n&~s)?r=ht(i):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(a=t&-t)||16===s&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-ot(t)),r|=e[n],t&=~s;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return!(4194240&(ut<<=1))&&(ut=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var wt=0;function xt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var kt,_t,St,jt,Et,Nt=!1,Ct=[],Tt=null,Ot=null,Rt=null,Pt=new Map,It=new Map,At=[],$t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Dt(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=ws(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Lt(e){var t=bs(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ws(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ut(e,t,n){zt(e)&&n.delete(t)}function Bt(){Nt=!1,null!==Tt&&zt(Tt)&&(Tt=null),null!==Ot&&zt(Ot)&&(Ot=null),null!==Rt&&zt(Rt)&&(Rt=null),Pt.forEach(Ut),It.forEach(Ut)}function Ft(e,n){e.blockedOn===n&&(e.blockedOn=null,Nt||(Nt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Bt)))}function Wt(e){function t(t){return Ft(t,e)}if(0<Ct.length){Ft(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ft(Tt,e),null!==Ot&&Ft(Ot,e),null!==Rt&&Ft(Rt,e),Pt.forEach(t),It.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Lt(n),null===n.blockedOn&&At.shift()}var Ht=y.ReactCurrentBatchConfig,Vt=!0;function qt(e,t,n,r){var s=wt,a=Ht.transition;Ht.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=s,Ht.transition=a}}function Kt(e,t,n,r){var s=wt,a=Ht.transition;Ht.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=s,Ht.transition=a}}function Gt(e,t,n,r){if(Vt){var s=Qt(e,t,n,r);if(null===s)Vr(e,t,r,Jt,n),Mt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Tt=Dt(Tt,e,t,n,r,s),!0;case"dragenter":return Ot=Dt(Ot,e,t,n,r,s),!0;case"mouseover":return Rt=Dt(Rt,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Pt.set(a,Dt(Pt.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,It.set(a,Dt(It.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<$t.indexOf(e)){for(;null!==s;){var a=ws(s);if(null!==a&&kt(a),null===(a=Qt(e,t,n,r))&&Vr(e,t,r,Jt,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Jt=null;function Qt(e,t,n,r){if(Jt=null,null!==(e=bs(e=ke(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,s="value"in Xt?Xt.value:Xt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return en=s.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function an(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var on,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(un),hn=L({},un,{view:0,detail:0}),fn=an(hn),pn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=an(pn),gn=an(L({},pn,{dataTransfer:0})),vn=an(L({},hn,{relatedTarget:0})),yn=an(L({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=L({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=an(bn),xn=an(L({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return jn}var Nn=L({},hn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Nn),Tn=an(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=an(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Rn=an(L({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=an(Pn),An=[9,13,27,32],$n=o&&"CompositionEvent"in window,Mn=null;o&&"documentMode"in document&&(Mn=document.documentMode);var Dn=o&&"TextEvent"in window&&!Mn,Ln=o&&(!$n||Mn&&8<Mn&&11>=Mn),zn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function qn(e,t,n,r){Ne(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Jn(e){zr(e,0)}function Qn(e){if(G(xs(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(o){var Zn;if(o){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"==typeof tr.oninput}Zn=er}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Kn&&(Kn.detachEvent("onpropertychange",rr),Gn=Kn=null)}function rr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];qn(t,Gn,e,ke(e)),Pe(Jn,t)}}function sr(e,t,n){"focusin"===e?(nr(),Gn=n,(Kn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function ir(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var lr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function cr(e,t){if(lr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!l.call(t,s)||!lr(e[s],t[s]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=void 0===r.end?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=dr(n,a);var i=dr(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=o&&"documentMode"in document&&11>=document.documentMode,vr=null,yr=null,br=null,wr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==vr||vr!==J(r)||("selectionStart"in(r=vr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&cr(br,r)||(br=r,0<(r=Kr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Sr={},jr={};function Er(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return Sr[e]=n[t];return e}o&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Nr=Er("animationend"),Cr=Er("animationiteration"),Tr=Er("animationstart"),Or=Er("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Rr.set(e,t),a(t,[e])}for(var Ar=0;Ar<Pr.length;Ar++){var $r=Pr[Ar];Ir($r.toLowerCase(),"on"+($r[0].toUpperCase()+$r.slice(1)))}Ir(Nr,"onAnimationEnd"),Ir(Cr,"onAnimationIteration"),Ir(Tr,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Or,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Lr(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,s,a,i,o,l,c){if(Fe.apply(this,arguments),De){if(!De)throw Error(n(198));var u=Le;De=!1,Le=null,ze||(ze=!0,Ue=u)}}(s,t,void 0,e),e.currentTarget=null}function zr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;Lr(s,o,c),a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;Lr(s,o,c),a=l}}}if(ze)throw e=Ue,ze=!1,Ue=null,e}function Ur(e,t){var n=t[gs];void 0===n&&(n=t[gs]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Fr]){e[Fr]=!0,r.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Br("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Yt(t)){case 1:var s=qt;break;case 4:s=Kt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,s){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=bs(o)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}o=o.parentNode}}r=r.return}Pe(function(){var r=a,s=ke(n),i=[];e:{var o=Rr.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=vn;break;case"focusout":c="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Nr:case Cr:case Tr:l=yn;break;case Or:l=Rn;break;case"scroll":l=fn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ie(p,h))&&u.push(qr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),i.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!bs(c)&&!c[ms])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bs(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:xs(l),f=null==c?o:xs(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,bs(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Jr(i,o,l,u,!1),null!==c&&null!==d&&Jr(i,d,c,u,!0)}if("select"===(l=(o=r?xs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Vn(o))if(Xn)g=or;else{g=ar;var v=sr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?qn(i,g,n,s):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&te(o,"number",o.value)),v=r?xs(r):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(vr=v,yr=r,br=null);break;case"focusout":br=yr=vr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,xr(i,n,s);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(i,n,s)}var y;if($n)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=tn()):(Zt="value"in(Xt=s)?Xt.value:Xt.textContent,Wn=!0)),0<(v=Kr(r,b)).length&&(b=new xn(b,e,null,n,s),i.push({event:b,listeners:v}),y?b.data=y:null!==(y=Fn(n))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Un=!0,zn);case"textInput":return(e=t.data)===zn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!$n&&Bn(e,t)?(e=tn(),en=Zt=Xt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(s=new xn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=y))}zr(i,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=Ie(e,n))&&r.unshift(qr(e,a,s)),null!=(a=Ie(e,t))&&r.push(qr(e,a,s))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ie(n,a))&&i.unshift(qr(n,l,o)):s||null!=(l=Ie(n,a))&&i.push(qr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Zr(e,t,r){if(t=Xr(t),Xr(e)!==t&&r)throw Error(n(425))}function es(){}var ts=null,ns=null;function rs(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ss="function"==typeof setTimeout?setTimeout:void 0,as="function"==typeof clearTimeout?clearTimeout:void 0,is="function"==typeof Promise?Promise:void 0,os="function"==typeof queueMicrotask?queueMicrotask:void 0!==is?function(e){return is.resolve(null).then(e).catch(ls)}:ss;function ls(e){setTimeout(function(){throw e})}function cs(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Wt(t)}function us(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),fs="__reactFiber$"+hs,ps="__reactProps$"+hs,ms="__reactContainer$"+hs,gs="__reactEvents$"+hs,vs="__reactListeners$"+hs,ys="__reactHandles$"+hs;function bs(e){var t=e[fs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[fs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[fs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function ws(e){return!(e=e[fs]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function ks(e){return e[ps]||null}var _s=[],Ss=-1;function js(e){return{current:e}}function Es(e){0>Ss||(e.current=_s[Ss],_s[Ss]=null,Ss--)}function Ns(e,t){Ss++,_s[Ss]=e.current,e.current=t}var Cs={},Ts=js(Cs),Os=js(!1),Rs=Cs;function Ps(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in n)a[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Is(e){return null!=(e=e.childContextTypes)}function As(){Es(Os),Es(Ts)}function $s(e,t,r){if(Ts.current!==Cs)throw Error(n(168));Ns(Ts,t),Ns(Os,r)}function Ms(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,"function"!=typeof s.getChildContext)return r;for(var a in s=s.getChildContext())if(!(a in t))throw Error(n(108,H(e)||"Unknown",a));return L({},r,s)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Rs=Ts.current,Ns(Ts,e),Ns(Os,Os.current),!0}function Ls(e,t,r){var s=e.stateNode;if(!s)throw Error(n(169));r?(e=Ms(e,t,Rs),s.__reactInternalMemoizedMergedChildContext=e,Es(Os),Es(Ts),Ns(Ts,e)):Es(Os),Ns(Os,r)}var zs=null,Us=!1,Bs=!1;function Fs(e){null===zs?zs=[e]:zs.push(e)}function Ws(){if(!Bs&&null!==zs){Bs=!0;var e=0,t=wt;try{var n=zs;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zs=null,Us=!1}catch(s){throw null!==zs&&(zs=zs.slice(e+1)),Ge(et,Ws),s}finally{wt=t,Bs=!1}}return null}var Hs=[],Vs=0,qs=null,Ks=0,Gs=[],Js=0,Qs=null,Ys=1,Xs="";function Zs(e,t){Hs[Vs++]=Ks,Hs[Vs++]=qs,qs=e,Ks=t}function ea(e,t,n){Gs[Js++]=Ys,Gs[Js++]=Xs,Gs[Js++]=Qs,Qs=e;var r=Ys;e=Xs;var s=32-ot(r)-1;r&=~(1<<s),n+=1;var a=32-ot(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Ys=1<<32-ot(t)+s|n<<s|r,Xs=a+e}else Ys=1<<a|n<<s|r,Xs=e}function ta(e){null!==e.return&&(Zs(e,1),ea(e,1,0))}function na(e){for(;e===qs;)qs=Hs[--Vs],Hs[Vs]=null,Ks=Hs[--Vs],Hs[Vs]=null;for(;e===Qs;)Qs=Gs[--Js],Gs[Js]=null,Xs=Gs[--Js],Gs[Js]=null,Ys=Gs[--Js],Gs[Js]=null}var ra=null,sa=null,aa=!1,ia=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,sa=us(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,sa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qs?{id:Ys,overflow:Xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,sa=null,!0);default:return!1}}function ca(e){return!(!(1&e.mode)||128&e.flags)}function ua(e){if(aa){var t=sa;if(t){var r=t;if(!la(e,t)){if(ca(e))throw Error(n(418));t=us(r.nextSibling);var s=ra;t&&la(e,t)?oa(s,r):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ca(e))throw Error(n(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ha(e){if(e!==ra)return!1;if(!aa)return da(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rs(e.type,e.memoizedProps)),t&&(t=sa)){if(ca(e))throw fa(),Error(n(418));for(;t;)oa(e,t),t=us(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){sa=us(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}sa=null}}else sa=ra?us(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=sa;e;)e=us(e.nextSibling)}function pa(){sa=ra=null,aa=!1}function ma(e){null===ia?ia=[e]:ia.push(e)}var ga=y.ReactCurrentBatchConfig;function va(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var s=r.stateNode}if(!s)throw Error(n(147,e));var a=s,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(n(284));if(!r._owner)throw Error(n(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function wa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===I&&ba(s)===t.type)?((r=a(t,n.props)).ref=va(e,t,n),r.return=e,r):((r=Ac(n.type,n.key,n.props,null,e.mode,r)).ref=va(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=$c(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ac(t.type,t.key,t.props,null,e.mode,n)).ref=va(e,null,t),n.return=e,n;case x:return(t=Lc(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(ne(t)||M(t))return(t=$c(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==s?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===s?c(e,t,n,r):null;case x:return n.key===s?u(e,t,n,r):null;case I:return f(e,t,(s=n._init)(n._payload),r)}if(ne(n)||M(n))return null!==s?null:d(e,t,n,r,null);ya(e,n)}return null}function p(e,t,n,r,s){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case I:return p(e,t,n,(0,r._init)(r._payload),s)}if(ne(r)||M(r))return d(t,e=e.get(n)||null,r,s,null);ya(t,r)}return null}return function l(c,u,d,m){if("object"==typeof d&&null!==d&&d.type===k&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case b:e:{for(var g=d.key,v=u;null!==v;){if(v.key===g){if((g=d.type)===k){if(7===v.tag){r(c,v.sibling),(u=a(v,d.props.children)).return=c,c=u;break e}}else if(v.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===I&&ba(g)===v.type){r(c,v.sibling),(u=a(v,d.props)).ref=va(c,v,d),u.return=c,c=u;break e}r(c,v);break}t(c,v),v=v.sibling}d.type===k?((u=$c(d.props.children,c.mode,m,d.key)).return=c,c=u):((m=Ac(d.type,d.key,d.props,null,c.mode,m)).ref=va(c,u,d),m.return=c,c=m)}return o(c);case x:e:{for(v=d.key;null!==u;){if(u.key===v){if(4===u.tag&&u.stateNode.containerInfo===d.containerInfo&&u.stateNode.implementation===d.implementation){r(c,u.sibling),(u=a(u,d.children||[])).return=c,c=u;break e}r(c,u);break}t(c,u),u=u.sibling}(u=Lc(d,c.mode,m)).return=c,c=u}return o(c);case I:return l(c,u,(v=d._init)(d._payload),m)}if(ne(d))return function(n,a,o,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(n,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(n,d),a=i(v,a,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return r(n,d),aa&&Zs(n,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(n,o[m],l))&&(a=i(d,a,m),null===u?c=d:u.sibling=d,u=d);return aa&&Zs(n,m),c}for(d=s(n,d);m<o.length;m++)null!==(g=p(d,n,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=i(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(n,e)}),aa&&Zs(n,m),c}(c,u,d,m);if(M(d))return function(a,o,l,c){var u=M(l);if("function"!=typeof u)throw Error(n(150));if(null==(l=u.call(l)))throw Error(n(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(a,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return r(a,m),aa&&Zs(a,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return aa&&Zs(a,g),u}for(m=s(a,m);!y.done;g++,y=l.next())null!==(y=p(m,a,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(a,e)}),aa&&Zs(a,g),u}(c,u,d,m);ya(c,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==u&&6===u.tag?(r(c,u.sibling),(u=a(u,d)).return=c,c=u):(r(c,u),(u=Dc(d,c.mode,m)).return=c,c=u),o(c)):r(c,u)}}var xa=wa(!0),ka=wa(!1),_a=js(null),Sa=null,ja=null,Ea=null;function Na(){Ea=ja=Sa=null}function Ca(e){var t=_a.current;Es(_a),e._currentValue=t}function Ta(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Oa(e,t){Sa=e,Ea=ja=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ra(e){var t=e._currentValue;if(Ea!==e)if(e={context:e,memoizedValue:t,next:null},null===ja){if(null===Sa)throw Error(n(308));ja=e,Sa.dependencies={lanes:0,firstContext:e}}else ja=ja.next=e;return t}var Pa=null;function Ia(e){null===Pa?Pa=[e]:Pa.push(e)}function Aa(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ia(t)):(n.next=s.next,s.next=n),t.interleaved=n,$a(e,r)}function $a(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Cl){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,$a(e,n)}return null===(s=r.interleaved)?(t.next=t,Ia(r)):(t.next=s.next,s.next=t),r.interleaved=t,$a(e,n)}function Ba(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wa(e,t,n,r){var s=e.updateQueue;Ma=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=s.baseState;for(i=0,u=c=l=null,o=a;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=L({},d,h);break e;case 2:Ma=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Ml|=i,e.lanes=i,e.memoizedState=d}}function Ha(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(null!==a){if(s.callback=null,s=r,"function"!=typeof a)throw Error(n(191,a));a.call(s)}}}var Va={},qa=js(Va),Ka=js(Va),Ga=js(Va);function Ja(e){if(e===Va)throw Error(n(174));return e}function Qa(e,t){switch(Ns(Ga,t),Ns(Ka,e),Ns(qa,Va),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Es(qa),Ns(qa,t)}function Ya(){Es(qa),Es(Ka),Es(Ga)}function Xa(e){Ja(Ga.current);var t=Ja(qa.current),n=ce(t,e.type);t!==n&&(Ns(Ka,e),Ns(qa,n))}function Za(e){Ka.current===e&&(Es(qa),Es(Ka))}var ei=js(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var si=y.ReactCurrentDispatcher,ai=y.ReactCurrentBatchConfig,ii=0,oi=null,li=null,ci=null,ui=!1,di=!1,hi=0,fi=0;function pi(){throw Error(n(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function gi(e,t,r,s,a,i){if(ii=i,oi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?Zi:eo,e=r(s,a),di){i=0;do{if(di=!1,hi=0,25<=i)throw Error(n(301));i+=1,ci=li=null,t.updateQueue=null,si.current=to,e=r(s,a)}while(di)}if(si.current=Xi,t=null!==li&&null!==li.next,ii=0,ci=li=oi=null,ui=!1,t)throw Error(n(300));return e}function vi(){var e=0!==hi;return hi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?oi.memoizedState=ci=e:ci=ci.next=e,ci}function bi(){if(null===li){var e=oi.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?oi.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(n(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?oi.memoizedState=ci=e:ci=ci.next=e}return ci}function wi(e,t){return"function"==typeof t?t(e):t}function xi(e){var t=bi(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var s=li,a=s.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(null!==a){i=a.next,s=s.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ii&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,oi.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==i);null===c?o=s:c.next=l,lr(s,t.memoizedState)||(bo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(null!==(e=r.interleaved)){a=e;do{i=a.lane,oi.lanes|=i,Ml|=i,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ki(e){var t=bi(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);lr(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function _i(){}function Si(e,t){var r=oi,s=bi(),a=t(),i=!lr(s.memoizedState,a);if(i&&(s.memoizedState=a,bo=!0),s=s.queue,Mi(Ni.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(r.flags|=2048,Ri(9,Ei.bind(null,r,s,a,t),void 0,null),null===Tl)throw Error(n(349));30&ii||ji(r,t,a)}return a}function ji(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oi.updateQueue)?(t={lastEffect:null,stores:null},oi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ei(e,t,n,r){t.value=n,t.getSnapshot=r,Ci(t)&&Ti(e)}function Ni(e,t,n){return n(function(){Ci(t)&&Ti(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Ti(e){var t=$a(e,1);null!==t&&nc(t,e,1,-1)}function Oi(e){var t=yi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,oi,e),[t.memoizedState,e]}function Ri(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oi.updateQueue)?(t={lastEffect:null,stores:null},oi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pi(){return bi().memoizedState}function Ii(e,t,n,r){var s=yi();oi.flags|=e,s.memoizedState=Ri(1|t,n,void 0,void 0===r?null:r)}function Ai(e,t,n,r){var s=bi();r=void 0===r?null:r;var a=void 0;if(null!==li){var i=li.memoizedState;if(a=i.destroy,null!==r&&mi(r,i.deps))return void(s.memoizedState=Ri(t,n,a,r))}oi.flags|=e,s.memoizedState=Ri(1|t,n,a,r)}function $i(e,t){return Ii(8390656,8,e,t)}function Mi(e,t){return Ai(2048,8,e,t)}function Di(e,t){return Ai(4,2,e,t)}function Li(e,t){return Ai(4,4,e,t)}function zi(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ui(e,t,n){return n=null!=n?n.concat([e]):null,Ai(4,4,zi.bind(null,t,e),n)}function Bi(){}function Fi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hi(e,t,n){return 21&ii?(lr(n,t)||(n=gt(),oi.lanes|=n,Ml|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n)}function Vi(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{wt=n,ai.transition=r}}function qi(){return bi().memoizedState}function Ki(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ji(e))Qi(t,n);else if(null!==(n=Aa(e,t,n,r))){nc(n,e,r,ec()),Yi(n,t,r)}}function Gi(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ji(e))Qi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,lr(o,i)){var l=t.interleaved;return null===l?(s.next=s,Ia(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Aa(e,t,s,r))&&(nc(n,e,r,s=ec()),Yi(n,t,r))}}function Ji(e){var t=e.alternate;return e===oi||null!==t&&t===oi}function Qi(e,t){di=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yi(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Xi={readContext:Ra,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Zi={readContext:Ra,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Ra,useEffect:$i,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ii(4194308,4,zi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ki.bind(null,oi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Oi,useDebugValue:Bi,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Oi(!1),t=e[0];return e=Vi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=oi,a=yi();if(aa){if(void 0===r)throw Error(n(407));r=r()}else{if(r=t(),null===Tl)throw Error(n(349));30&ii||ji(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,$i(Ni.bind(null,s,i,e),[e]),s.flags|=2048,Ri(9,Ei.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=yi(),t=Tl.identifierPrefix;if(aa){var n=Xs;t=":"+t+"R"+(n=(Ys&~(1<<32-ot(Ys)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Ra,useCallback:Fi,useContext:Ra,useEffect:Mi,useImperativeHandle:Ui,useInsertionEffect:Di,useLayoutEffect:Li,useMemo:Wi,useReducer:xi,useRef:Pi,useState:function(){return xi(wi)},useDebugValue:Bi,useDeferredValue:function(e){return Hi(bi(),li.memoizedState,e)},useTransition:function(){return[xi(wi)[0],bi().memoizedState]},useMutableSource:_i,useSyncExternalStore:Si,useId:qi,unstable_isNewReconciler:!1},to={readContext:Ra,useCallback:Fi,useContext:Ra,useEffect:Mi,useImperativeHandle:Ui,useInsertionEffect:Di,useLayoutEffect:Li,useMemo:Wi,useReducer:ki,useRef:Pi,useState:function(){return ki(wi)},useDebugValue:Bi,useDeferredValue:function(e){var t=bi();return null===li?t.memoizedState=e:Hi(t,li.memoizedState,e)},useTransition:function(){return[ki(wi)[0],bi().memoizedState]},useMutableSource:_i,useSyncExternalStore:Si,useId:qi,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),a=za(r,s);a.payload=t,null!=n&&(a.callback=n),null!==(t=Ua(e,a,s))&&(nc(t,e,s,r),Ba(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),a=za(r,s);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=Ua(e,a,s))&&(nc(t,e,s,r),Ba(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=za(n,r);s.tag=2,null!=t&&(s.callback=t),null!==(t=Ua(e,s,r))&&(nc(t,e,r,n),Ba(t,e,r))}};function ao(e,t,n,r,s,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(s,a))}function io(e,t,n){var r=!1,s=Cs,a=t.contextType;return"object"==typeof a&&null!==a?a=Ra(a):(s=Is(t)?Rs:Ts.current,a=(r=null!=(r=t.contextTypes))?Ps(e,s):Cs),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function oo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Da(e);var a=t.contextType;"object"==typeof a&&null!==a?s.context=Ra(a):(a=Is(t)?Rs:Ts.current,s.context=Ps(e,a)),s.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(ro(e,t,a,n),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&so.enqueueReplaceState(s,s.state,null),Wa(e,n,s,r),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=F(r),r=r.return}while(r);var s=n}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var ho="function"==typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=za(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r)},n}function po(e,t,n){(n=za(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,s){return 1&e.mode?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=za(-1,1)).tag=2,Ua(n,t,1))),n.lanes|=1),e)}var yo=y.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?ka(t,null,n,r):xa(t,e.child,n,r)}function xo(e,t,n,r,s){n=n.render;var a=t.ref;return Oa(t,s),r=gi(e,t,n,r,a,s),n=vi(),null===e||bo?(aa&&n&&ta(t),t.flags|=1,wo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function ko(e,t,n,r,s){if(null===e){var a=n.type;return"function"!=typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ac(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_o(e,t,a,r,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(i,r)&&e.ref===t.ref)return Ho(e,t,s)}return t.flags|=1,(e=Ic(a,r)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(cr(a,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=a,0===(e.lanes&s))return t.lanes=e.lanes,Ho(e,t,s);131072&e.flags&&(bo=!0)}}return Eo(e,t,n,r,s)}function So(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ns(Il,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ns(Il,Pl),Pl|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ns(Il,Pl),Pl|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ns(Il,Pl),Pl|=r;return wo(e,t,s,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,r,s){var a=Is(n)?Rs:Ts.current;return a=Ps(t,a),Oa(t,s),n=gi(e,t,n,r,a,s),r=vi(),null===e||bo?(aa&&r&&ta(t),t.flags|=1,wo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function No(e,t,n,r,s){if(Is(n)){var a=!0;Ds(t)}else a=!1;if(Oa(t,s),null===t.stateNode)Wo(e,t),io(t,n,r),lo(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"==typeof c&&null!==c?c=Ra(c):c=Ps(t,c=Is(n)?Rs:Ts.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,i,r,c),Ma=!1;var h=t.memoizedState;i.state=h,Wa(t,r,i,s),l=t.memoizedState,o!==r||h!==l||Os.current||Ma?("function"==typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Ma||ao(t,n,o,r,h,l,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,La(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"==typeof(l=n.contextType)&&null!==l?l=Ra(l):l=Ps(t,l=Is(n)?Rs:Ts.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,i,r,l),Ma=!1,h=t.memoizedState,i.state=h,Wa(t,r,i,s);var p=t.memoizedState;o!==d||h!==p||Os.current||Ma?("function"==typeof f&&(ro(t,n,f,r),p=t.memoizedState),(c=Ma||ao(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,a,s)}function Co(e,t,n,r,s,a){jo(e,t);var i=!!(128&t.flags);if(!r&&!i)return s&&Ls(t,n,!1),Ho(e,t,a);r=t.stateNode,yo.current=t;var o=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=xa(t,e.child,null,a),t.child=xa(t,null,o,a)):wo(e,t,o,a),t.memoizedState=r.state,s&&Ls(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?$s(0,t.pendingContext,t.pendingContext!==t.context):t.context&&$s(0,t.context,!1),Qa(e,t.containerInfo)}function Oo(e,t,n,r,s){return pa(),ma(s),t.flags|=256,wo(e,t,n,r),t.child}var Ro,Po,Io,Ao,$o={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Do(e,t,r){var s,a=t.pendingProps,i=ei.current,o=!1,l=!!(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&!!(2&i)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ns(ei,1&i),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},1&a||null===o?o=Mc(l,a,0,null):(o.childLanes=0,o.pendingProps=l),e=$c(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(r),t.memoizedState=$o,e):Lo(t,l));if(null!==(i=e.memoizedState)&&null!==(s=i.dehydrated))return function(e,t,r,s,a,i,o){if(r)return 256&t.flags?(t.flags&=-257,zo(e,t,o,s=uo(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Mc({mode:"visible",children:s.children},a,0,null),(i=$c(i,a,o,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,1&t.mode&&xa(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=$o,i);if(!(1&t.mode))return zo(e,t,o,null);if("$!"===a.data){if(s=a.nextSibling&&a.nextSibling.dataset)var l=s.dgst;return s=l,zo(e,t,o,s=uo(i=Error(n(419)),s,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(s=Tl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(s.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,$a(e,a),nc(s,e,a,-1))}return mc(),zo(e,t,o,s=uo(Error(n(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,sa=us(a.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(Gs[Js++]=Ys,Gs[Js++]=Xs,Gs[Js++]=Qs,Ys=e.id,Xs=e.overflow,Qs=t),t=Lo(t,s.children),t.flags|=4096,t)}(e,t,l,a,s,i,r);if(o){o=a.fallback,l=t.mode,s=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 1&l||t.child===i?(a=Ic(i,c)).subtreeFlags=14680064&i.subtreeFlags:((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null),null!==s?o=Ic(s,o):(o=$c(o,l,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=$o,a}return e=(o=e.child).sibling,a=Ic(o,{mode:"visible",children:a.children}),!(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Lo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&ma(r),xa(t,e.child,null,n),(e=Lo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ta(e.return,t,n)}function Bo(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Fo(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(wo(e,t,r.children,n),2&(r=ei.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ns(ei,r),1&t.mode)switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ti(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Wo(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(r=Ic(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ic(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Vo(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,r){var a=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Is(t.type)&&As(),qo(t),null;case 3:return a=t.stateNode,Ya(),Es(Os),Es(Ts),ri(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ia&&(ic(ia),ia=null))),Po(e,t),qo(t),null;case 5:Za(t);var i=Ja(Ga.current);if(r=t.type,null!==e&&null!=t.stateNode)Io(e,t,r,a,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(n(166));return qo(t),null}if(e=Ja(qa.current),ha(t)){a=t.stateNode,r=t.type;var o=t.memoizedProps;switch(a[fs]=t,a[ps]=o,e=!!(1&t.mode),r){case"dialog":Ur("cancel",a),Ur("close",a);break;case"iframe":case"object":case"embed":Ur("load",a);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],a);break;case"source":Ur("error",a);break;case"img":case"image":case"link":Ur("error",a),Ur("load",a);break;case"details":Ur("toggle",a);break;case"input":Y(a,o),Ur("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",a);break;case"textarea":ae(a,o),Ur("invalid",a)}for(var l in be(r,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?a.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(a.textContent,c,e),i=["children",c]):"number"==typeof c&&a.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(a.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",a)}switch(r){case"input":K(a),ee(a,o,!0);break;case"textarea":K(a),oe(a);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(a.onclick=es)}a=i,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof a.is?e=l.createElement(r,{is:a.is}):(e=l.createElement(r),"select"===r&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,r),e[fs]=t,e[ps]=a,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(r,a),r){case"dialog":Ur("cancel",e),Ur("close",e),i=a;break;case"iframe":case"object":case"embed":Ur("load",e),i=a;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],e);i=a;break;case"source":Ur("error",e),i=a;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=a;break;case"details":Ur("toggle",e),i=a;break;case"input":Y(e,a),i=Q(e,a),Ur("invalid",e);break;case"option":default:i=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},i=L({},a,{value:void 0}),Ur("invalid",e);break;case"textarea":ae(e,a),i=se(e,a),Ur("invalid",e)}for(o in be(r,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ve(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"==typeof u?("textarea"!==r||""!==u)&&fe(e,u):"number"==typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&v(e,o,u,l))}switch(r){case"input":K(e),ee(e,a,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=a.value&&e.setAttribute("value",""+V(a.value));break;case"select":e.multiple=!!a.multiple,null!=(o=a.value)?re(e,!!a.multiple,o,!1):null!=a.defaultValue&&re(e,!!a.multiple,a.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=es)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Ao(e,t,e.memoizedProps,a);else{if("string"!=typeof a&&null===t.stateNode)throw Error(n(166));if(r=Ja(Ga.current),Ja(qa.current),ha(t)){if(a=t.stateNode,r=t.memoizedProps,a[fs]=t,(o=a.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Zr(a.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(a.nodeValue,r,!!(1&e.mode))}o&&(t.flags|=4)}else(a=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[fs]=t,t.stateNode=a}return qo(t),null;case 13:if(Es(ei),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==sa&&1&t.mode&&!(128&t.flags))fa(),pa(),t.flags|=98560,o=!1;else if(o=ha(t),null!==a&&null!==a.dehydrated){if(null===e){if(!o)throw Error(n(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(n(317));o[fs]=t}else pa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),o=!1}else null!==ia&&(ic(ia),ia=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ei.current?0===Al&&(Al=3):mc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Ya(),Po(e,t),null===e&&Wr(t.stateNode.containerInfo),qo(t),null;case 10:return Ca(t.type._context),qo(t),null;case 19:if(Es(ei),null===(o=t.memoizedState))return qo(t),null;if(a=!!(128&t.flags),null===(l=o.rendering))if(a)Vo(o,!1);else{if(0!==Al||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,Vo(o,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;null!==r;)e=a,(o=r).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ns(ei,1&ei.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Fl&&(t.flags|=128,a=!0,Vo(o,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ti(l))){if(t.flags|=128,a=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Vo(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!aa)return qo(t),null}else 2*Xe()-o.renderingStartTime>Fl&&1073741824!==r&&(t.flags|=128,a=!0,Vo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,r=ei.current,Ns(ei,a?1&r|2:1&r),t):(qo(t),null);case 22:case 23:return dc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&1&t.mode?!!(1073741824&Pl)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Go(e,t){switch(na(t),t.tag){case 1:return Is(t.type)&&As(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ya(),Es(Os),Es(Ts),ri(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(Es(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Es(ei),null;case 4:return Ya(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Io=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ja(qa.current);var i,o=null;switch(n){case"input":a=Q(e,a),r=Q(e,r),o=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":a=se(e,a),r=se(e,r),o=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=es)}for(u in be(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ao=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,Qo=!1,Yo="function"==typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&el(t,n,a)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fs],delete t[ps],delete t[gs],delete t[vs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=es));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"==typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,t);case 6:var r=ul,s=dl;ul=null,hl(e,t,n),dl=s,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?cs(e.parentNode,n):1===e.nodeType&&cs(e,n),Wt(e)):cs(ul,n.stateNode));break;case 4:r=ul,s=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=s;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(2&a||4&a)&&el(n,t,i),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Qo&&(Zo(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qo=(r=Qo)||null!==n.memoizedState,hl(e,t,n),Qo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var r=t.deletions;if(null!==r)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(n(160));fl(i,o,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Sc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&s){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&s&&null!==r&&Zo(r,r.return);break;case 5:if(ml(t,e),vl(e),512&s&&null!==r&&Zo(r,r.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(g){Sc(e,e.return,g)}}if(4&s&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&X(a,i),we(l,o);var u=we(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ve(a,h):"dangerouslySetInnerHTML"===d?he(a,h):"children"===d?fe(a,h):v(a,d,h,u)}switch(l){case"input":Z(a,i);break;case"textarea":ie(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?re(a,!!i.multiple,p,!1):f!==!!i.multiple&&(null!=i.defaultValue?re(a,!!i.multiple,i.defaultValue,!0):re(a,!!i.multiple,i.multiple?[]:"",!1))}a[ps]=i}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&s){if(null===e.stateNode)throw Error(n(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&s&&null!==r&&r.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Bl=Xe())),4&s&&pl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Qo=(u=Qo)||d,ml(t,e),Qo=u):ml(t,e),vl(e),8192&s){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(p=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){s=f,r=f.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(s,r,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Xo=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"==typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&s&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var s=r;break e}r=r.return}throw Error(n(160))}switch(s.tag){case 5:var a=s.stateNode;32&s.flags&&(fe(a,""),s.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=s.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(n(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xo=e,bl(e)}function bl(e,t,n){for(var r=!!(1&e.mode);null!==Xo;){var s=Xo,a=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||Jo;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Jo;var c=Qo;if(Jo=i,(Qo=l)&&!c)for(Xo=s;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?kl(s):null!==l?(l.return=i,Xo=l):kl(s);for(;null!==a;)Xo=a,bl(a),a=a.sibling;Xo=s,Jo=o,Qo=c}wl(e)}else 8772&s.subtreeFlags&&null!==a?(a.return=s,Xo=a):wl(e)}}function wl(e){for(;null!==Xo;){var t=Xo;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Qo||rl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Qo)if(null===r)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:no(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ha(t,i,s);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ha(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(n(163))}Qo||512&t.flags&&sl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xo=r;break}Xo=t.return}}function xl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function kl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Sc(t,s,l)}}var a=t.return;try{sl(t)}catch(l){Sc(t,a,l)}break;case 5:var i=t.return;try{sl(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var _l,Sl=Math.ceil,jl=y.ReactCurrentDispatcher,El=y.ReactCurrentOwner,Nl=y.ReactCurrentBatchConfig,Cl=0,Tl=null,Ol=null,Rl=0,Pl=0,Il=js(0),Al=0,$l=null,Ml=0,Dl=0,Ll=0,zl=null,Ul=null,Bl=0,Fl=1/0,Wl=null,Hl=!1,Vl=null,ql=null,Kl=!1,Gl=null,Jl=0,Ql=0,Yl=null,Xl=-1,Zl=0;function ec(){return 6&Cl?Xe():-1!==Xl?Xl:Xl=Xe()}function tc(e){return 1&e.mode?2&Cl&&0!==Rl?Rl&-Rl:null!==ga.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type):1}function nc(e,t,r,s){if(50<Ql)throw Ql=0,Yl=null,Error(n(185));yt(e,r,s),2&Cl&&e===Tl||(e===Tl&&(!(2&Cl)&&(Dl|=r),4===Al&&oc(e,Rl)),rc(e,s),1===r&&0===Cl&&!(1&t.mode)&&(Fl=Xe()+500,Us&&Ws()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-ot(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ft(e,e===Tl?Rl:0);if(0===r)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Us=!0,Fs(e)}(lc.bind(null,e)):Fs(lc.bind(null,e)),os(function(){!(6&Cl)&&Ws()}),n=null;else{switch(xt(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=st}n=Tc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Xl=-1,Zl=0,6&Cl)throw Error(n(327));var r=e.callbackNode;if(kc()&&e.callbackNode!==r)return null;var s=ft(e,e===Tl?Rl:0);if(0===s)return null;if(30&s||0!==(s&e.expiredLanes)||t)t=gc(e,s);else{t=s;var a=Cl;Cl|=2;var i=pc();for(Tl===e&&Rl===t||(Wl=null,Fl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}Na(),jl.current=i,Cl=a,null!==Ol?t=0:(Tl=null,Rl=0,t=Al)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(s=a,t=ac(e,a))),1===t)throw r=$l,hc(e,0),oc(e,s),rc(e,Xe()),r;if(6===t)oc(e,s);else{if(a=e.current.alternate,!(30&s||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!lr(a(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)||(t=gc(e,s),2===t&&(i=mt(e),0!==i&&(s=i,t=ac(e,i))),1!==t)))throw r=$l,hc(e,0),oc(e,s),rc(e,Xe()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(n(345));case 2:case 5:xc(e,Ul,Wl);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=Bl+500-Xe())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ss(xc.bind(null,e,Ul,Wl),t);break}xc(e,Ul,Wl);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-ot(s);i=1<<o,(o=t[o])>a&&(a=o),s&=~i}if(s=a,10<(s=(120>(s=Xe()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Sl(s/1960))-s)){e.timeoutHandle=ss(xc.bind(null,e,Ul,Wl),s);break}xc(e,Ul,Wl);break;default:throw Error(n(329))}}}return rc(e,Xe()),e.callbackNode===r?sc.bind(null,e):null}function ac(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Ll,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(6&Cl)throw Error(n(327));kc();var t=ft(e,0);if(!(1&t))return rc(e,Xe()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var s=mt(e);0!==s&&(t=s,r=ac(e,s))}if(1===r)throw r=$l,hc(e,0),oc(e,t),rc(e,Xe()),r;if(6===r)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,Wl),rc(e,Xe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Fl=Xe()+500,Us&&Ws())}}function uc(e){null!==Gl&&0===Gl.tag&&!(6&Cl)&&kc();var t=Cl;Cl|=1;var n=Nl.transition,r=wt;try{if(Nl.transition=null,wt=1,e)return e()}finally{wt=r,Nl.transition=n,!(6&(Cl=t))&&Ws()}}function dc(){Pl=Il.current,Es(Il)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,as(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&As();break;case 3:Ya(),Es(Os),Es(Ts),ri();break;case 5:Za(r);break;case 4:Ya();break;case 13:case 19:Es(ei);break;case 10:Ca(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Ol=e=Ic(e.current,null),Rl=Pl=t,Al=0,$l=null,Ll=Dl=Ml=0,Ul=zl=null,null!==Pa){for(t=0;t<Pa.length;t++)if(null!==(r=(n=Pa[t]).interleaved)){n.interleaved=null;var s=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=s,r.next=i}n.pending=r}Pa=null}return e}function fc(e,t){for(;;){var r=Ol;try{if(Na(),si.current=Xi,ui){for(var s=oi.memoizedState;null!==s;){var a=s.queue;null!==a&&(a.pending=null),s=s.next}ui=!1}if(ii=0,ci=li=oi=null,di=!1,hi=0,El.current=null,null===r||null===r.return){Al=1,$l=t,Ol=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(!(1&d.mode||0!==h&&11!==h&&15!==h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(i,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(!(1&t)){mo(i,u,t),mc();break e}c=Error(n(426))}else if(aa&&1&l.mode){var v=go(o);if(null!==v){!(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ma(co(c,l));break e}}i=c=co(c,l),4!==Al&&(Al=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Fa(i,fo(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(128&i.flags||"function"!=typeof y.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==ql&&ql.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Fa(i,po(i,l,t));break e}}i=i.return}while(null!==i)}wc(r)}catch(w){t=w,Ol===r&&null!==r&&(Ol=r=r.return);continue}break}}function pc(){var e=jl.current;return jl.current=Xi,null===e?Xi:e}function mc(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Tl||!(268435455&Ml)&&!(268435455&Dl)||oc(Tl,Rl)}function gc(e,t){var r=Cl;Cl|=2;var s=pc();for(Tl===e&&Rl===t||(Wl=null,hc(e,t));;)try{vc();break}catch(a){fc(e,a)}if(Na(),Cl=r,jl.current=s,null!==Ol)throw Error(n(261));return Tl=null,Rl=0,Al}function vc(){for(;null!==Ol;)bc(Ol)}function yc(){for(;null!==Ol&&!Qe();)bc(Ol)}function bc(e){var t=_l(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?wc(e):Ol=t,El.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Go(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Al=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Ko(n,t,Pl)))return void(Ol=n);if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Al&&(Al=5)}function xc(e,t,r){var s=wt,a=Nl.transition;try{Nl.transition=null,wt=1,function(e,t,r,s){do{kc()}while(null!==Gl);if(6&Cl)throw Error(n(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ot(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}(e,i),e===Tl&&(Ol=Tl=null,Rl=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Kl||(Kl=!0,Tc(nt,function(){return kc(),null})),i=!!(15990&r.flags),!!(15990&r.subtreeFlags)||i){i=Nl.transition,Nl.transition=null;var o=wt;wt=1;var l=Cl;Cl|=4,El.current=null,function(e,t){if(ts=Vt,pr(e=fr())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(s&&0!==s.rangeCount){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch(x){r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++u===a&&(l=o),f===i&&++d===s&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ns={focusedElem:e,selectionRange:r},Vt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,1028&t.subtreeFlags&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(n(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=tl,tl=!1}(e,r),gl(r,e),mr(ns),Vt=!!ts,ns=ts=null,e.current=r,yl(r),Ye(),Cl=l,wt=o,Nl.transition=i}else e.current=r;if(Kl&&(Kl=!1,Gl=e,Jl=a),i=e.pendingLanes,0===i&&(ql=null),function(e){if(it&&"function"==typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),rc(e,Xe()),null!==t)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;!!(1&Jl)&&0!==e.tag&&kc(),i=e.pendingLanes,1&i?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,Ws()}(e,t,r,s)}finally{Nl.transition=a,wt=s}return null}function kc(){if(null!==Gl){var e=xt(Jl),t=Nl.transition,r=wt;try{if(Nl.transition=null,wt=16>e?16:e,null===Gl)var s=!1;else{if(e=Gl,Gl=null,Jl=0,6&Cl)throw Error(n(331));var a=Cl;for(Cl|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(16&Xo.flags){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var f=(d=Xo).sibling,p=d.return;if(al(d),d===u){Xo=null;break}if(null!==f){f.return=p,Xo=f;break}Xo=p}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xo=i}}if(2064&i.subtreeFlags&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(2048&(i=Xo).flags)switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Xo=y;break e}Xo=i.return}}var b=e.current;for(Xo=b;null!==Xo;){var w=(o=Xo).child;if(2064&o.subtreeFlags&&null!==w)w.return=o,Xo=w;else e:for(o=b;null!==Xo;){if(2048&(l=Xo).flags)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Sc(l,l.return,k)}if(l===o){Xo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xo=x;break e}Xo=l.return}}if(Cl=a,Ws(),it&&"function"==typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(k){}s=!0}return s}finally{wt=r,Nl.transition=t}}return!1}function _c(e,t,n){e=Ua(e,t=fo(0,t=co(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Ua(t,e=po(t,e=co(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Rl&n)===n&&(4===Al||3===Al&&(130023424&Rl)===Rl&&500>Xe()-Bl?hc(e,0):Ll|=n),rc(e,t)}function Ec(e,t){0===t&&(1&e.mode?(t=dt,!(130023424&(dt<<=1))&&(dt=4194304)):t=1);var n=ec();null!==(e=$a(e,t))&&(yt(e,t,n),rc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(n(314))}null!==s&&s.delete(t),Ec(e,r)}function Tc(e,t){return Ge(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Oc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,r,s,a,i){var o=2;if(s=e,"function"==typeof e)Pc(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case k:return $c(r.children,a,i,t);case _:o=8,a|=8;break;case S:return(e=Rc(12,r,t,2|a)).elementType=S,e.lanes=i,e;case O:return(e=Rc(13,r,t,a)).elementType=O,e.lanes=i,e;case R:return(e=Rc(19,r,t,a)).elementType=R,e.lanes=i,e;case A:return Mc(r,a,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case N:o=9;break e;case T:o=11;break e;case P:o=14;break e;case I:o=16,s=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Rc(o,r,t,a)).elementType=e,t.type=s,t.lanes=i,t}function $c(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,s,a,i,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e){if(!e)return Cs;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Is(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var r=e.type;if(Is(r))return Ms(e,r,t)}return t}function Fc(e,t,n,r,s,a,i,o,l){return(e=Uc(n,r,!0,e,0,a,0,o,l)).context=Bc(null),n=e.current,(a=za(r=ec(),s=tc(n))).callback=null!=t?t:null,Ua(n,a,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function Wc(e,t,n,r){var s=t.current,a=ec(),i=tc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=za(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ua(s,t,i))&&(nc(e,s,i,a),Ba(e,s,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}_l=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Os.current)bo=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:To(t),pa();break;case 5:Xa(t);break;case 1:Is(t.type)&&Ds(t);break;case 4:Qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ns(_a,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ns(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Do(e,t,n):(Ns(ei,1&ei.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ns(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Fo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ns(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Ho(e,t,n)}(e,t,r);bo=!!(131072&e.flags)}else bo=!1,aa&&1048576&t.flags&&ea(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Wo(e,t),e=t.pendingProps;var a=Ps(t,Ts.current);Oa(t,r),a=gi(null,t,s,e,a,r);var i=vi();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Is(s)?(i=!0,Ds(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Da(t),a.updater=so,t.stateNode=a,a._reactInternals=t,lo(t,s,e,r),t=Co(null,t,s,!0,i,r)):(t.tag=0,aa&&i&&ta(t),wo(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,s=(a=s._init)(s._payload),t.type=s,a=t.tag=function(e){if("function"==typeof e)return Pc(e)?1:0;if(null!=e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(s),e=no(s,e),a){case 0:t=Eo(null,t,s,e,r);break e;case 1:t=No(null,t,s,e,r);break e;case 11:t=xo(null,t,s,e,r);break e;case 14:t=ko(null,t,s,no(s.type,e),r);break e}throw Error(n(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,Eo(e,t,s,a=t.elementType===s?a:no(s,a),r);case 1:return s=t.type,a=t.pendingProps,No(e,t,s,a=t.elementType===s?a:no(s,a),r);case 3:e:{if(To(t),null===e)throw Error(n(387));s=t.pendingProps,a=(i=t.memoizedState).element,La(e,t),Wa(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Oo(e,t,s,r,a=co(Error(n(423)),t));break e}if(s!==a){t=Oo(e,t,s,r,a=co(Error(n(424)),t));break e}for(sa=us(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,r=ka(t,null,s,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(pa(),s===a){t=Ho(e,t,r);break e}wo(e,t,s,r)}t=t.child}return t;case 5:return Xa(t),null===e&&ua(t),s=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,rs(s,a)?o=null:null!==i&&rs(s,i)&&(t.flags|=32),jo(e,t),wo(e,t,o,r),t.child;case 6:return null===e&&ua(t),null;case 13:return Do(e,t,r);case 4:return Qa(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=xa(t,null,s,r):wo(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,xo(e,t,s,a=t.elementType===s?a:no(s,a),r);case 7:return wo(e,t,t.pendingProps,r),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ns(_a,s._currentValue),s._currentValue=o,null!==i)if(lr(i.value,o)){if(i.children===a.children&&!Os.current){t=Ho(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===i.tag){(c=za(-1,r&-r)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Ta(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(n(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Ta(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}wo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Oa(t,r),s=s(a=Ra(a)),t.flags|=1,wo(e,t,s,r),t.child;case 14:return a=no(s=t.type,t.pendingProps),ko(e,t,s,a=no(s.type,a),r);case 15:return _o(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:no(s,a),Wo(e,t),t.tag=1,Is(s)?(e=!0,Ds(t)):e=!1,Oa(t,r),io(t,s,a),lo(t,s,a,r),Co(null,t,s,!0,e,r);case 19:return Fo(e,t,r);case 22:return So(e,t,r)}throw Error(n(156,t.tag))};var Kc="function"==typeof reportError?reportError:function(e){};function Gc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if("function"==typeof s){var o=s;s=function(){var e=Hc(i);o.call(e)}}Wc(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"==typeof r){var a=r;r=function(){var e=Hc(i);a.call(e)}}var i=Fc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[ms]=i.current,Wr(8===e.nodeType?e.parentNode:e),uc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"==typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ms]=l.current,Wr(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,l,n,r)}),l}(n,t,e,s,r);return Hc(i)}Jc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Wc(e,t,null,null)},Jc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[ms]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Lt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Xe()),!(6&Cl)&&(Fl=Xe()+500,Ws()))}break;case 13:uc(function(){var t=$a(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),qc(e,1)}},_t=function(e){if(13===e.tag){var t=$a(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=$a(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},jt=function(){return wt},Et=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},_e=function(e,t,r){switch(t){case"input":if(Z(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=ks(s);if(!a)throw Error(n(90));G(s),Z(s,a)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Te=cc,Oe=uc;var eu={usingClientEntryPoint:!1,Events:[ws,xs,ks,Ne,Ce,cc]},tu={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),it=ru}catch(de){}}return j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,j.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(n(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,r)},j.createRoot=function(e,t){if(!Qc(e))throw Error(n(299));var r=!1,s="",a=Kc;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,s,a),e[ms]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Gc(t)},j.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=qe(t))?null:e.stateNode},j.flushSync=function(e){return uc(e)},j.hydrate=function(e,t,r){if(!Yc(t))throw Error(n(200));return Zc(null,e,t,!0,r)},j.hydrateRoot=function(e,t,r){if(!Qc(e))throw Error(n(405));var s=null!=r&&r.hydratedSources||null,a=!1,i="",o=Kc;if(null!=r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Fc(t,null,e,1,null!=r?r:null,a,0,i,o),e[ms]=t.current,Wr(e),s)for(e=0;e<s.length;e++)a=(a=(r=s[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Jc(t)},j.render=function(e,t,r){if(!Yc(t))throw Error(n(200));return Zc(null,e,t,!1,r)},j.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(n(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},j.unstable_batchedUpdates=cc,j.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Yc(r))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return Zc(e,t,r,!1,s)},j.version="18.3.1-next-f1338f8080-20240426",j}const O=r(function(){if(k)return _;k=1;var e=(x||(x=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),S.exports=T()),S.exports);return _.createRoot=e.createRoot,_.hydrateRoot=e.hydrateRoot,_}());
/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var R="popstate";function P(e={}){return function(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o="POP",l=null,c=u();null==c&&(c=0,i.replaceState({...i.state,idx:c},""));function u(){return(i.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o="PUSH";let n=M(m.location,e,t);c=u()+1;let r=$(n,c),d=m.createHref(n);try{i.pushState(r,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(d)}a&&l&&l({action:o,location:m.location,delta:1})}function f(e,t){o="REPLACE";let n=M(m.location,e,t);c=u();let r=$(n,c),s=m.createHref(n);i.replaceState(r,"",s),a&&l&&l({action:o,location:m.location,delta:0})}function p(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href);I(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:D(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r);return new URL(r,n)}(e)}let m={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(R,d),l=e,()=>{s.removeEventListener(R,d),l=null}},createHref:e=>t(s,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:f,go:e=>i.go(e)};return m}(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return M("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:D(t)},0,e)}function I(e,t){if(!1===e||null==e)throw new Error(t)}function A(e,t){if(!e)try{throw new Error(t)}catch(n){}}function $(e,t){return{usr:e.state,key:e.key,idx:t}}function M(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?L(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function D({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function L(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function z(e,t,n="/"){return function(e,t,n,r){let s="string"==typeof t?L(t):t,a=Z(s.pathname||"/",n);if(null==a)return null;let i=U(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=X(a);o=Q(i[l],e,r)}return o}(e,t,n,!1)}function U(e,t=[],n=[],r="",s=!1){let a=(e,a,i=s,o)=>{let l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&i)return;I(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let c=ie([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(I(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),U(e.children,t,u,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:J(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&(null==(n=e.path)?void 0:n.includes("?")))for(let r of B(e.path))a(e,t,!0,r);else a(e,t)}),t}function B(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=B(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var F=/^:[\w-]+$/,W=3,H=2,V=1,q=10,K=-2,G=e=>"*"===e;function J(e,t){let n=e.split("/"),r=n.length;return n.some(G)&&(r+=K),t&&(r+=H),n.filter(e=>!G(e)).reduce((e,t)=>e+(F.test(t)?W:""===t?V:q),r)}function Q(e,t,n=!1){let{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=Y({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=Y({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),i.push({params:s,pathname:ie([a,u.pathname]),pathnameBase:oe(ie([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=ie([a,u.pathnameBase]))}return i}function Y(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){A("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=o[r]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const s=o[r];return e[t]=n&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function X(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return A(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function te(e,t="/"){let n,{pathname:r,search:s="",hash:a=""}="string"==typeof e?L(e):e;if(r)if(i=r,ee.test(i))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),A(!1,`Pathnames cannot have embedded double slashes - normalizing ${e} -> ${r}`)}n=r.startsWith("/")?ne(r.substring(1),"/"):ne(r,t)}else n=t;var i;return{pathname:n,search:le(s),hash:ce(a)}}function ne(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function re(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function se(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function ae(e,t,n,r=!1){let s;"string"==typeof e?s=L(e):(s={...e},I(!s.pathname||!s.pathname.includes("?"),re("?","pathname","search",s)),I(!s.pathname||!s.pathname.includes("#"),re("#","pathname","hash",s)),I(!s.search||!s.search.includes("#"),re("#","search","hash",s)));let a,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=te(s,a),c=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var ie=e=>e.join("/").replace(/\/\/+/g,"/"),oe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),le=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ce=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ue=["POST","PUT","PATCH","DELETE"];new Set(ue);var de=["GET",...ue];new Set(de);var he=g.createContext(null);he.displayName="DataRouter";var fe=g.createContext(null);fe.displayName="DataRouterState",g.createContext(!1);var pe=g.createContext({isTransitioning:!1});pe.displayName="ViewTransition",g.createContext(new Map).displayName="Fetchers",g.createContext(null).displayName="Await";var me=g.createContext(null);me.displayName="Navigation";var ge=g.createContext(null);ge.displayName="Location";var ve=g.createContext({outlet:null,matches:[],isDataRoute:!1});ve.displayName="Route";var ye=g.createContext(null);function be(){return null!=g.useContext(ge)}function we(){return I(be(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(ge).location}ye.displayName="RouteError";var xe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ke(e){g.useContext(me).static||g.useLayoutEffect(e)}function _e(){let{isDataRoute:e}=g.useContext(ve);return e?function(){let{router:e}=function(e){let t=g.useContext(he);return I(t,Re(e)),t}("useNavigate"),t=Pe("useNavigate"),n=g.useRef(!1);return ke(()=>{n.current=!0}),g.useCallback(async(r,s={})=>{A(n.current,xe),n.current&&("number"==typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...s}))},[e,t])}():function(){I(be(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(he),{basename:t,navigator:n}=g.useContext(me),{matches:r}=g.useContext(ve),{pathname:s}=we(),a=JSON.stringify(se(r)),i=g.useRef(!1);return ke(()=>{i.current=!0}),g.useCallback((r,o={})=>{if(A(i.current,xe),!i.current)return;if("number"==typeof r)return void n.go(r);let l=ae(r,JSON.parse(a),s,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:ie([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,a,s,e])}()}var Se=g.createContext(null);function je(e,{relative:t}={}){let{matches:n}=g.useContext(ve),{pathname:r}=we(),s=JSON.stringify(se(n));return g.useMemo(()=>ae(e,JSON.parse(s),r,"path"===t),[e,s,r,t])}function Ee(e,t,n,r,s){var a;I(be(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(me),{matches:o}=g.useContext(ve),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";Ae(u,!h||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let f,p=we();if(t){let e="string"==typeof t?L(t):t;I("/"===d||(null==(a=e.pathname)?void 0:a.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),f=e}else f=p;let m=f.pathname||"/",v=m;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=z(e,{pathname:v});A(h||null!=y,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),A(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=function(e,t=[],n=null,r=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,a=null==n?void 0:n.errors;if(null!=a){let e=s.findIndex(e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id]));I(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,e+1))}let i=!1,o=-1;if(n)for(let c=0;c<s.length;c++){let e=s[c];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=c),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){i=!0,s=o>=0?s.slice(0,o+1):[s[0]];break}}}let l=n&&r?(e,t)=>{var s,a;r(e,{location:n.location,params:(null==(a=null==(s=n.matches)?void 0:s[0])?void 0:a.params)??{},errorInfo:t})}:void 0;return s.reduceRight((e,r,c)=>{let u,d=!1,h=null,f=null;n&&(u=a&&r.route.id?a[r.route.id]:void 0,h=r.route.errorElement||Ce,i&&(o<0&&0===c?(Ae("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):o===c&&(d=!0,f=r.route.hydrateFallbackElement||null)));let p=t.concat(s.slice(0,c+1)),m=()=>{let t;return t=u?h:d?f:r.route.Component?g.createElement(r.route.Component,null):r.route.element?r.route.element:e,g.createElement(Oe,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===c)?g.createElement(Te,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0},onError:l}):m()},null)}(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ie([d,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:ie([d,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,n,r,s);return t&&b?g.createElement(ge.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},b):b}function Ne(){let e=function(){var e;let t=g.useContext(ye),n=function(e){let t=g.useContext(fe);return I(t,Re(e)),t}("useRouteError"),r=Pe("useRouteError");if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return i=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,i)}var Ce=g.createElement(Ne,null),Te=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError&&this.props.onError(e,t)}render(){return void 0!==this.state.error?g.createElement(ve.Provider,{value:this.props.routeContext},g.createElement(ye.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Oe({routeContext:e,match:t,children:n}){let r=g.useContext(he);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(ve.Provider,{value:e},n)}function Re(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pe(e){let t=function(e){let t=g.useContext(ve);return I(t,Re(e)),t}(e),n=t.matches[t.matches.length-1];return I(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var Ie={};function Ae(e,t,n){t||Ie[e]||(Ie[e]=!0,A(!1,n))}function $e({to:e,replace:t,state:n,relative:r}){I(be(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=g.useContext(me);A(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=g.useContext(ve),{pathname:i}=we(),o=_e(),l=ae(e,se(a),i,"path"===r),c=JSON.stringify(l);return g.useEffect(()=>{o(JSON.parse(c),{replace:t,state:n,relative:r})},[o,c,r,t,n]),null}function Me(e){return function(e){let t=g.useContext(ve).outlet;return g.useMemo(()=>t&&g.createElement(Se.Provider,{value:e},t),[t,e])}(e.context)}function De(e){I(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Le({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:a=!1}){I(!be(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),o=g.useMemo(()=>({basename:i,navigator:s,static:a,future:{}}),[i,s,a]);"string"==typeof n&&(n=L(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=n,f=g.useMemo(()=>{let e=Z(l,i);return null==e?null:{location:{pathname:e,search:c,hash:u,state:d,key:h},navigationType:r}},[i,l,c,u,d,h,r]);return A(null!=f,`<Router basename="${i}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:g.createElement(me.Provider,{value:o},g.createElement(ge.Provider,{children:t,value:f}))}function ze({children:e,location:t}){return Ee(Ue(e),t)}function Ue(e,t=[]){let n=[];return g.Children.forEach(e,(e,r)=>{if(!g.isValidElement(e))return;let s=[...t,r];if(e.type===g.Fragment)return void n.push.apply(n,Ue(e.props.children,s));I(e.type===De,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),I(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ue(e.props.children,s)),n.push(a)}),n}g.memo(function({routes:e,future:t,state:n,unstable_onError:r}){return Ee(e,void 0,n,r,t)});var Be="get",Fe="application/x-www-form-urlencoded";function We(e){return null!=e&&"string"==typeof e.tagName}function He(e=""){return new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var Ve=null;var qe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ke(e){return null==e||qe.has(e)?e:(A(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fe}"`),null)}function Ge(e,t){let n,r,s,a,i;if(We(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?Z(i,t):null,n=e.getAttribute("method")||Be,s=Ke(e.getAttribute("enctype"))||Fe,a=new FormData(e)}else if(function(e){return We(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return We(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?Z(o,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||Be,s=Ke(e.getAttribute("formenctype"))||Ke(i.getAttribute("enctype"))||Fe,a=new FormData(i,e),!function(){if(null===Ve)try{new FormData(document.createElement("form"),0),Ve=!1}catch(e){Ve=!0}return Ve}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,r)}}else{if(We(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Be,r=null,s=Fe,i=e}var o;return a&&"text/plain"===s&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:i}}function Je(e,t){if(!1===e||null==e)throw new Error(t)}function Qe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function Ye(e,t,n){return function(e,t){let n=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(t));return n.has(r)||(n.add(r),e.push({key:r,link:t})),e},[])}((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Qe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function Xe(e,t,n,r,s,a){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null==(r=n[t].route.path)?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{var l;let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(i(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null==(l=n[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function Ze(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1),[...new Set(r)];var r}function et(){let e=g.useContext(he);return Je(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tt=g.createContext(void 0);function nt(){let e=g.useContext(tt);return Je(e,"You must render this element inside a <HydratedRouter> element"),e}function rt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function st({page:e,...t}){let{router:n}=et(),r=g.useMemo(()=>z(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(at,{page:e,matches:r,...t}):null}function at({page:e,matches:t,...n}){let r=we(),{manifest:s,routeModules:a}=nt(),{basename:i}=et(),{loaderData:o,matches:l}=function(){let e=g.useContext(fe);return Je(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=g.useMemo(()=>Xe(e,t,l,s,r,"data"),[e,t,l,s,r]),u=g.useMemo(()=>Xe(e,t,l,s,r,"assets"),[e,t,l,s,r]),d=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach(e=>{var t;let r=s.routes[e.route.id];r&&r.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in o&&(null==(t=a[e.route.id])?void 0:t.shouldRevalidate)||r.hasClientLoader?l=!0:n.add(e.route.id))}),0===n.size)return[];let u=function(e,t,n){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===Z(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}(e,i,"data");return l&&n.size>0&&u.searchParams.set("_routes",t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(",")),[u.pathname+u.search]},[i,o,r,s,c,t,e,a]),h=g.useMemo(()=>Ze(u,s),[u,s]),f=function(e){let{manifest:t,routeModules:n}=nt(),[r,s]=g.useState([]);return g.useEffect(()=>{let r=!1;return Ye(e,t,n).then(e=>{r||s(e)}),()=>{r=!0}},[e,t,n]),r}(u);return g.createElement(g.Fragment,null,d.map(e=>g.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n})),h.map(e=>g.createElement("link",{key:e,rel:"modulepreload",href:e,...n})),f.map(({key:e,link:t})=>g.createElement("link",{key:e,nonce:n.nonce,...t})))}function it(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}tt.displayName="FrameworkContext";var ot="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{ot&&(window.__reactRouterVersion="7.9.6")}catch(Lc){}function lt({basename:e,children:t,window:n}){let r=g.useRef();null==r.current&&(r.current=P({window:n,v5Compat:!0}));let s=r.current,[a,i]=g.useState({action:s.action,location:s.location}),o=g.useCallback(e=>{g.startTransition(()=>i(e))},[i]);return g.useLayoutEffect(()=>s.listen(o),[s,o]),g.createElement(Le,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var ct=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ut=g.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:s,replace:a,state:i,target:o,to:l,preventScrollReset:c,viewTransition:u,...d},h){let f,{basename:p}=g.useContext(me),m="string"==typeof l&&ct.test(l),v=!1;if("string"==typeof l&&m&&(f=l,ot))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),n=Z(t.pathname,p);t.origin===e.origin&&null!=n?l=n+t.search+t.hash:v=!0}catch(Lc){A(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=function(e,{relative:t}={}){I(be(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(me),{hash:s,pathname:a,search:i}=je(e,{relative:t}),o=a;return"/"!==n&&(o="/"===a?n:ie([n,a])),r.createHref({pathname:o,search:i,hash:s})}(l,{relative:r}),[b,w,x]=function(e,t){let n=g.useContext(tt),[r,s]=g.useState(!1),[a,i]=g.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,h=g.useRef(null);g.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),g.useEffect(()=>{if(r){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{s(!0)},p=()=>{s(!1),i(!1)};return n?"intent"!==e?[a,h,{}]:[a,h,{onFocus:rt(o,f),onBlur:rt(l,p),onMouseEnter:rt(c,f),onMouseLeave:rt(u,p),onTouchStart:rt(d,f)}]:[!1,h,{}]}(n,d),k=function(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:i}={}){let o=_e(),l=we(),c=je(e,{relative:a});return g.useCallback(u=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(u,t)){u.preventDefault();let t=void 0!==n?n:D(l)===D(c);o(e,{replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:i})}},[l,o,c,n,r,t,e,s,a,i])}(l,{replace:a,state:i,target:o,preventScrollReset:c,relative:r,viewTransition:u});let _=g.createElement("a",{...d,...x,href:f||y,onClick:v||s?e:function(t){e&&e(t),t.defaultPrevented||k(t)},ref:it(h,w),target:o,"data-discover":m||"render"!==t?void 0:"true"});return b&&!m?g.createElement(g.Fragment,null,_,g.createElement(st,{page:y})):_});ut.displayName="Link";var dt=g.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:s,to:a,viewTransition:i,children:o,...l},c){let u=je(a,{relative:l.relative}),d=we(),h=g.useContext(fe),{navigator:f,basename:p}=g.useContext(me),m=null!=h&&function(e,{relative:t}={}){let n=g.useContext(pe);I(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ft("useViewTransitionState"),s=je(e,{relative:t});if(!n.isTransitioning)return!1;let a=Z(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Z(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=Y(s.pathname,i)||null!=Y(s.pathname,a)}(u)&&!0===i,v=f.encodeLocation?f.encodeLocation(u).pathname:u.pathname,y=d.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(y=y.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&p&&(b=Z(b,p)||b);const w="/"!==v&&v.endsWith("/")?v.length-1:v.length;let x,k=y===v||!r&&y.startsWith(v)&&"/"===y.charAt(w),_=null!=b&&(b===v||!r&&b.startsWith(v)&&"/"===b.charAt(v.length)),S={isActive:k,isPending:_,isTransitioning:m},j=k?e:void 0;x="function"==typeof n?n(S):[n,k?"active":null,_?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let E="function"==typeof s?s(S):s;return g.createElement(ut,{...l,"aria-current":j,className:x,ref:c,style:E,to:a,viewTransition:i},"function"==typeof o?o(S):o)});dt.displayName="NavLink";var ht=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:a,method:i=Be,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},f)=>{let p=function(){let{router:e}=ft("useSubmit"),{basename:t}=g.useContext(me),n=Pe("useRouteId");return g.useCallback(async(r,s={})=>{let{action:a,method:i,encType:o,formData:l,body:c}=Ge(r,t);if(!1===s.navigate){let t=s.fetcherKey||gt();await e.fetch(t,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}(),m=function(e,{relative:t}={}){let{basename:n}=g.useContext(me),r=g.useContext(ve);I(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...je(e||".",{relative:t})},i=we();if(null==e){a.search=i.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?`?${n}`:""}}e&&"."!==e||!s.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:ie([n,a.pathname]));return D(a)}(o,{relative:c}),v="get"===i.toLowerCase()?"get":"post",y="string"==typeof o&&ct.test(o);return g.createElement("form",{ref:f,method:v,action:m,onSubmit:r?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=(null==r?void 0:r.getAttribute("formmethod"))||i;p(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:s,state:a,relative:c,preventScrollReset:u,viewTransition:d})},...h,"data-discover":y||"render"!==e?void 0:"true"})});function ft(e){let t=g.useContext(he);return I(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}function pt(e){A("undefined"!=typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(He(e)),n=g.useRef(!1),r=we(),s=g.useMemo(()=>function(e,t){let n=He(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),a=_e(),i=g.useCallback((e,t)=>{const r=He("function"==typeof e?e(new URLSearchParams(s)):e);n.current=!0,a("?"+r,t)},[a,s]);return[s,i]}ht.displayName="Form";var mt=0,gt=()=>`__${String(++mt)}__`;const vt=e=>{let t;const n=new Set,r=(e,r)=>{const s="function"==typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,s,a);return a},yt=e=>e;const bt=e=>{const t=(e=>e?vt(e):vt)(e),n=e=>function(e,t=yt){const n=v.useSyncExternalStore(e.subscribe,v.useCallback(()=>t(e.getState()),[e,t]),v.useCallback(()=>t(e.getInitialState()),[e,t]));return v.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},wt=e=>bt,xt=e=>(t,n,r)=>{const s=r.subscribe;r.subscribe=(e,t,n)=>{let a=e;if(t){const s=(null==n?void 0:n.equalityFn)||Object.is;let i=e(r.getState());a=n=>{const r=e(n);if(!s(i,r)){const e=i;t(i=r,e)}},(null==n?void 0:n.fireImmediately)&&t(i,i)}return s(a)};return e(t,n,r)};function kt(e,t){let n;try{n=e()}catch(Lc){return}return{getItem:e=>{var t;const r=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=n.getItem(e))?t:null;return s instanceof Promise?s.then(r):r(s)},setItem:(e,t)=>n.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>n.removeItem(e)}}const _t=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>_t(e)(n),catch(e){return this}}}catch(Lc){return{then(e){return this},catch:t=>_t(t)(Lc)}}},St=(e,t)=>(n,r,s)=>{let a={storage:kt(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const o=new Set,l=new Set;let c=a.storage;if(!c)return e((...e)=>{n(...e)},r,s);const u=()=>{const e=a.partialize({...r()});return c.setItem(a.name,{state:e,version:a.version})},d=s.setState;s.setState=(e,t)=>(d(e,t),u());const h=e((...e)=>(n(...e),u()),r,s);let f;s.getInitialState=()=>h;const p=()=>{var e,t;if(!c)return;i=!1,o.forEach(e=>{var t;return e(null!=(t=r())?t:h)});const s=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=r())?e:h))||void 0;return _t(c.getItem.bind(c))(a.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];if(a.migrate){const t=a.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}}return[!1,void 0]}).then(e=>{var t;const[s,i]=e;if(f=a.merge(i,null!=(t=r())?t:h),n(f,!0),s)return u()}).then(()=>{null==s||s(f,void 0),f=r(),i=!0,l.forEach(e=>e(f))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{a={...a,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>p(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},a.skipHydration||p(),f||h},jt={state:"unknown",mode:"standby",isHeating:!1,isBrewing:!1},Et={brew:{current:0,setpoint:93.5,max:105},steam:{current:0,setpoint:145,max:160}},Nt={current:0,voltage:220,todayKwh:0,totalKwh:0},Ct={tankLevel:"ok",dripTrayFull:!1},Tt={connected:!1,name:"",type:"",weight:0,flowRate:0,stable:!1,battery:0},Ot={enabled:!1,targetWeight:36,doseWeight:18,stopOffset:2,autoTare:!0},Rt={active:!1,startTime:0,duration:0,weight:0,flowRate:0},Pt={connected:!1,ssid:"",ip:"",rssi:0,apMode:!1},It={enabled:!1,connected:!1,broker:""},At={version:"",freeHeap:0,uptime:0},$t={connected:!1,version:"",uptime:0},Mt={totalShots:0,shotsToday:0,lastCleaning:null,shotsSinceCleaning:0},Dt={deviceId:"",deviceName:"My BrewOS",machineType:"",firmwareVersion:""},Lt=wt()(xt((e,t)=>({connectionState:"disconnected",device:Dt,machine:jt,temps:Et,pressure:0,power:Nt,water:Ct,scale:Tt,scaleScanning:!1,scanResults:[],bbw:Ot,shot:Rt,wifi:Pt,mqtt:It,esp32:At,pico:$t,stats:Mt,alerts:[],logs:[],setConnectionState:t=>e({connectionState:t}),processMessage:n=>{const{type:r,...s}=n;switch(r){case"status":e(e=>({machine:{...e.machine,...s.machine},temps:s.temps?{...e.temps,...s.temps}:e.temps,pressure:s.pressure??e.pressure,power:s.power?{...e.power,...s.power}:e.power,scale:s.scale?{...e.scale,...s.scale}:e.scale}));break;case"esp_status":e(e=>({esp32:{version:s.version||e.esp32.version,freeHeap:s.freeHeap||e.esp32.freeHeap,uptime:s.uptime||e.esp32.uptime},wifi:s.wifi?{...e.wifi,...s.wifi}:e.wifi,mqtt:s.mqtt?{...e.mqtt,...s.mqtt}:e.mqtt}));break;case"pico_status":e(e=>({pico:{connected:!0,version:s.version||e.pico.version,uptime:s.uptime||e.pico.uptime},machine:{...e.machine,state:s.state||e.machine.state,isHeating:s.isHeating??e.machine.isHeating,isBrewing:s.isBrewing??e.machine.isBrewing},temps:{brew:{current:s.brewTemp??e.temps.brew.current,setpoint:s.brewSetpoint??e.temps.brew.setpoint,max:e.temps.brew.max},steam:{current:s.steamTemp??e.temps.steam.current,setpoint:s.steamSetpoint??e.temps.steam.setpoint,max:e.temps.steam.max}},pressure:s.pressure??e.pressure,power:{...e.power,current:s.power??e.power.current,voltage:s.voltage??e.power.voltage},water:{tankLevel:s.waterLevel||e.water.tankLevel,dripTrayFull:s.dripTrayFull??e.water.dripTrayFull}}));break;case"scale_status":e(e=>({scale:{connected:s.connected??e.scale.connected,name:s.name||e.scale.name,type:s.type||e.scale.type,weight:s.weight??e.scale.weight,flowRate:s.flowRate??e.scale.flowRate,stable:s.stable??e.scale.stable,battery:s.battery??e.scale.battery}}));break;case"scan_result":t().addScanResult(s);break;case"scan_complete":e({scaleScanning:!1});break;case"event":!function(e,t,n){switch(e.event){case"shot_start":t({shot:{active:!0,startTime:Date.now(),duration:0,weight:0,flowRate:0}});break;case"shot_end":{const e=n();t({shot:{...e.shot,active:!1},stats:{...e.stats,totalShots:e.stats.totalShots+1,shotsToday:e.stats.shotsToday+1,shotsSinceCleaning:e.stats.shotsSinceCleaning+1}});break}case"alert":zt(e.level||"warning",e.message,t,n)}}(s,e,t);break;case"log":!function(e,t,n){const r={id:Date.now(),time:(new Date).toISOString(),level:e.level||"info",message:e.message};t({logs:[r,...n().logs.slice(0,99)]})}(s,e,t);break;case"error":zt("error",s.message,e,t);break;case"device_info":e(e=>({device:{deviceId:s.deviceId||e.device.deviceId,deviceName:s.deviceName||e.device.deviceName,machineType:s.machineType||e.device.machineType,firmwareVersion:s.firmwareVersion||e.device.firmwareVersion}}))}},dismissAlert:t=>e(e=>({alerts:e.alerts.map(e=>e.id===t?{...e,dismissed:!0}:e)})),clearLogs:()=>e({logs:[]}),addScanResult:t=>e(e=>({scanResults:[...e.scanResults,t]})),setScaleScanning:t=>e({scaleScanning:t}),clearScanResults:()=>e({scanResults:[]})})));function zt(e,t,n,r){n({alerts:[{id:Date.now(),time:(new Date).toISOString(),level:e,message:t,dismissed:!1},...r().alerts]})}var Ut=function(e,t){return(Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ut(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ft=function(){return Ft=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Ft.apply(this,arguments)};function Wt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function Ht(e,t,n,r){var s,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,n,i):s(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function Vt(e,t){return function(n,r){t(n,r,e)}}function qt(e,t,n,r,s,a){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=r.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h=!1,f=n.length-1;f>=0;f--){var p={};for(var m in r)p[m]="access"===m?{}:r[m];for(var m in r.access)p.access[m]=r.access[m];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(e||null))};var g=(0,n[f])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(o=i(g.get))&&(d.get=o),(o=i(g.set))&&(d.set=o),(o=i(g.init))&&s.unshift(o)}else(o=i(g))&&("field"===l?s.unshift(o):d[c]=o)}u&&Object.defineProperty(u,r.name,d),h=!0}function Kt(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0}function Gt(e){return"symbol"==typeof e?e:"".concat(e)}function Jt(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function Qt(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function Yt(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(Lc){a(Lc)}}function o(e){try{l(r.throw(e))}catch(Lc){a(Lc)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})}function Xt(e,t){var n,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(Lc){o=[6,Lc],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Zt=Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function en(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||Zt(t,e,n)}function tn(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nn(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(o){s={error:o}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}return i}function rn(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(nn(arguments[t]));return e}function sn(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,o=a.length;i<o;i++,s++)r[s]=a[i];return r}function an(e,t,n){if(n||2===arguments.length)for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}function on(e){return this instanceof on?(this.v=e,this):new on(e)}function ln(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){s[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||o(e,t)})},t&&(r[e]=t(r[e])))}function o(e,t){try{(n=s[e](t)).value instanceof on?Promise.resolve(n.value.v).then(l,c):u(a[0][2],n)}catch(Lc){u(a[0][3],Lc)}var n}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}}function cn(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,s){t[r]=e[r]?function(t){return(n=!n)?{value:on(e[r](t)),done:!1}:s?s(t):t}:s}}function un(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=tn(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,s){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,s,(t=e[n](t)).done,t.value)})}}}function dn(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var hn=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},fn=function(e){return(fn=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)};function pn(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=fn(e),r=0;r<n.length;r++)"default"!==n[r]&&Zt(t,e,n[r]);return hn(t,e),t}function mn(e){return e&&e.__esModule?e:{default:e}}function gn(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function vn(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n}function yn(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function bn(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(Lc){return Promise.reject(Lc)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var wn="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function xn(e){function t(t){e.error=e.hasError?new wn(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function s(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(s,function(e){return t(e),s()})}else r|=1}catch(Lc){t(Lc)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function kn(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,s,a){return n?t?".jsx":".js":!r||s&&a?r+s+"."+a.toLowerCase()+"js":e}):e}const _n={__extends:Bt,__assign:Ft,__rest:Wt,__decorate:Ht,__param:Vt,__esDecorate:qt,__runInitializers:Kt,__propKey:Gt,__setFunctionName:Jt,__metadata:Qt,__awaiter:Yt,__generator:Xt,__createBinding:Zt,__exportStar:en,__values:tn,__read:nn,__spread:rn,__spreadArrays:sn,__spreadArray:an,__await:on,__asyncGenerator:ln,__asyncDelegator:cn,__asyncValues:un,__makeTemplateObject:dn,__importStar:pn,__importDefault:mn,__classPrivateFieldGet:gn,__classPrivateFieldSet:vn,__classPrivateFieldIn:yn,__addDisposableResource:bn,__disposeResources:xn,__rewriteRelativeImportExtension:kn},Sn=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:bn,get __assign(){return Ft},__asyncDelegator:cn,__asyncGenerator:ln,__asyncValues:un,__await:on,__awaiter:Yt,__classPrivateFieldGet:gn,__classPrivateFieldIn:yn,__classPrivateFieldSet:vn,__createBinding:Zt,__decorate:Ht,__disposeResources:xn,__esDecorate:qt,__exportStar:en,__extends:Bt,__generator:Xt,__importDefault:mn,__importStar:pn,__makeTemplateObject:dn,__metadata:Qt,__param:Vt,__propKey:Gt,__read:nn,__rest:Wt,__rewriteRelativeImportExtension:kn,__runInitializers:Kt,__setFunctionName:Jt,__spread:rn,__spreadArray:an,__spreadArrays:sn,__values:tn,default:_n},Symbol.toStringTag,{value:"Module"}));class jn extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class En extends jn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Nn extends jn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Cn extends jn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Tn,On;(On=Tn||(Tn={})).Any="any",On.ApNortheast1="ap-northeast-1",On.ApNortheast2="ap-northeast-2",On.ApSouth1="ap-south-1",On.ApSoutheast1="ap-southeast-1",On.ApSoutheast2="ap-southeast-2",On.CaCentral1="ca-central-1",On.EuCentral1="eu-central-1",On.EuWest1="eu-west-1",On.EuWest2="eu-west-2",On.EuWest3="eu-west-3",On.SaEast1="sa-east-1",On.UsEast1="us-east-1",On.UsWest1="us-west-1",On.UsWest2="us-west-2";class Rn{constructor(e,{headers:t={},customFetch:n,region:r=Tn.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Yt(this,arguments,void 0,function*(e,t={}){var n;let r,s;try{const{headers:a,method:i,body:o,signal:l,timeout:c}=t;let u={},{region:d}=t;d||(d=this.region);const h=new URL(`${this.url}/${e}`);let f;d&&"any"!==d&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d)),o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?"undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=o):"string"==typeof o?(u["Content-Type"]="text/plain",f=o):"undefined"!=typeof FormData&&o instanceof FormData?f=o:(u["Content-Type"]="application/json",f=JSON.stringify(o)):f=o;let p=l;c&&(s=new AbortController,r=setTimeout(()=>s.abort(),c),l?(p=s.signal,l.addEventListener("abort",()=>s.abort())):p=s.signal);const m=yield this.fetch(h.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:f,signal:p}).catch(e=>{throw new En(e)}),g=m.headers.get("x-relay-error");if(g&&"true"===g)throw new Nn(m);if(!m.ok)throw new Cn(m);let v,y=(null!==(n=m.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return v="application/json"===y?yield m.json():"application/octet-stream"===y||"application/pdf"===y?yield m.blob():"text/event-stream"===y?m:"multipart/form-data"===y?yield m.formData():yield m.text(),{data:v,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof Cn||a instanceof Nn?a.context:void 0}}finally{r&&clearTimeout(r)}})}}var Pn={};const In=s(Sn);var An,$n,Mn,Dn,Ln,zn,Un,Bn={},Fn={},Wn={},Hn={},Vn={},qn={};function Kn(){if(An)return qn;An=1,Object.defineProperty(qn,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return qn.default=e,qn}function Gn(){if($n)return Vn;$n=1,Object.defineProperty(Vn,"__esModule",{value:!0});const e=In.__importDefault(Kn());return Vn.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(t,n){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async t=>{var n,r,s,a;let i=null,o=null,l=null,c=t.status,u=t.statusText;if(t.ok){if("HEAD"!==this.method){const e=await t.text();""===e||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(n=this.headers.get("Accept"))||void 0===n?void 0:n.includes("application/vnd.pgrst.plan+text"))?e:JSON.parse(e))}const e=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),a=null===(s=t.headers.get("content-range"))||void 0===s?void 0:s.split("/");e&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const n=await t.text();try{i=JSON.parse(n),Array.isArray(i)&&404===t.status&&(o=[],i=null,c=200,u="OK")}catch(d){404===t.status&&""===n?(c=204,u="No Content"):i={message:n}}if(i&&this.isMaybeSingle&&(null===(a=null==i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&this.shouldThrowOnError)throw new e.default(i)}return{error:i,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,n,r,s,a,i;let o="";const l=null==e?void 0:e.cause;if(l){const a=null!==(t=null==l?void 0:l.message)&&void 0!==t?t:"",i=null!==(n=null==l?void 0:l.code)&&void 0!==n?n:"";o=`${null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"FetchError"}: ${null==e?void 0:e.message}`,o+=`\n\nCaused by: ${null!==(s=null==l?void 0:l.name)&&void 0!==s?s:"Error"}: ${a}`,i&&(o+=` (${i})`),(null==l?void 0:l.stack)&&(o+=`\n${l.stack}`)}else o=null!==(a=null==e?void 0:e.stack)&&void 0!==a?a:"";return{error:{message:`${null!==(i=null==e?void 0:e.name)&&void 0!==i?i:"FetchError"}: ${null==e?void 0:e.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(t,n)}returns(){return this}overrideTypes(){return this}},Vn}function Jn(){if(Mn)return Hn;Mn=1,Object.defineProperty(Hn,"__esModule",{value:!0});const e=In.__importDefault(Gn());class t extends e.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=void 0===r?"offset":`${r}.offset`,a=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return Hn.default=t,Hn}function Qn(){if(Dn)return Wn;Dn=1,Object.defineProperty(Wn,"__esModule",{value:!0});const e=In.__importDefault(Jn()),t=new RegExp("[,()]");class n extends e.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,n){const r=Array.from(new Set(n)).map(e=>"string"==typeof e&&t.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const a=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}return Wn.default=n,Wn}function Yn(){if(Ln)return Fn;Ln=1,Object.defineProperty(Fn,"__esModule",{value:!0});const e=In.__importDefault(Qn());return Fn.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(t,n){const{head:r=!1,count:s}=null!=n?n:{},a=r?"HEAD":"GET";let i=!1;const o=(null!=t?t:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==n&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(t,{count:n}={}){var r;return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete({count:t}={}){var n;return t&&this.headers.append("Prefer",`count=${t}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}},Fn}var Xn=function(){if(Un)return Pn;Un=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.PostgrestError=Pn.PostgrestBuilder=Pn.PostgrestTransformBuilder=Pn.PostgrestFilterBuilder=Pn.PostgrestQueryBuilder=Pn.PostgrestClient=void 0;const e=In,t=e.__importDefault(function(){if(zn)return Bn;zn=1,Object.defineProperty(Bn,"__esModule",{value:!0});const e=In,t=e.__importDefault(Yn()),n=e.__importDefault(Qn());class r{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");const n=new URL(`${this.url}/${e}`);return new t.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new r(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:a}={}){var i;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(o="POST",c=t);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new n.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}return Bn.default=r,Bn}());Pn.PostgrestClient=t.default;const n=e.__importDefault(Yn());Pn.PostgrestQueryBuilder=n.default;const r=e.__importDefault(Qn());Pn.PostgrestFilterBuilder=r.default;const s=e.__importDefault(Jn());Pn.PostgrestTransformBuilder=s.default;const a=e.__importDefault(Gn());Pn.PostgrestBuilder=a.default;const i=e.__importDefault(Kn());return Pn.PostgrestError=i.default,Pn.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:a.default,PostgrestError:i.default},Pn}();const Zn=r(Xn),er=n({__proto__:null,default:Zn},[Xn]),{PostgrestClient:tr,PostgrestQueryBuilder:nr,PostgrestFilterBuilder:rr,PostgrestTransformBuilder:sr,PostgrestBuilder:ar,PostgrestError:ir}=Zn||er;class or{constructor(){}static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const lr="1.0.0",cr=lr,ur=1e4;var dr,hr,fr,pr,mr,gr,vr,yr,br;(hr=dr||(dr={}))[hr.connecting=0]="connecting",hr[hr.open=1]="open",hr[hr.closing=2]="closing",hr[hr.closed=3]="closed",(pr=fr||(fr={})).closed="closed",pr.errored="errored",pr.joined="joined",pr.joining="joining",pr.leaving="leaving",(gr=mr||(mr={})).close="phx_close",gr.error="phx_error",gr.join="phx_join",gr.reply="phx_reply",gr.leave="phx_leave",gr.access_token="access_token",(vr||(vr={})).websocket="websocket",(br=yr||(yr={})).Connecting="connecting",br.Open="open",br.Closing="closing",br.Closed="closed";class wr{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"==typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:{},s=(new TextEncoder).encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(e,t,n){var r,s;const a=e.topic,i=null!==(r=e.ref)&&void 0!==r?r:"",o=null!==(s=e.join_ref)&&void 0!==s?s:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},u=0===Object.keys(c).length?"":JSON.stringify(c);if(o.length>255)throw new Error(`joinRef length ${o.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`ref length ${i.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`metadata length ${u.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+i.length+a.length+l.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let f=new DataView(h),p=0;f.setUint8(p++,this.KINDS.userBroadcastPush),f.setUint8(p++,o.length),f.setUint8(p++,i.length),f.setUint8(p++,a.length),f.setUint8(p++,l.length),f.setUint8(p++,u.length),f.setUint8(p++,t),Array.from(o,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(i,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(a,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(l,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(u,e=>f.setUint8(p++,e.charCodeAt(0)));var m=new Uint8Array(h.byteLength+n.byteLength);return m.set(new Uint8Array(h),0),m.set(new Uint8Array(n),h.byteLength),m.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"==typeof e){const n=JSON.parse(e),[r,s,a,i,o]=n;return t({join_ref:r,ref:s,topic:a,event:i,payload:o})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,r)}_decodeUserBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2),a=t.getUint8(3),i=t.getUint8(4);let o=this.HEADER_LENGTH+4;const l=n.decode(e.slice(o,o+r));o+=r;const c=n.decode(e.slice(o,o+s));o+=s;const u=n.decode(e.slice(o,o+a));o+=a;const d=e.slice(o,e.byteLength),h=i===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,f={type:this.BROADCAST_EVENT,event:c,payload:h};return a>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}let xr=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var kr,_r;(_r=kr||(kr={})).abstime="abstime",_r.bool="bool",_r.date="date",_r.daterange="daterange",_r.float4="float4",_r.float8="float8",_r.int2="int2",_r.int4="int4",_r.int4range="int4range",_r.int8="int8",_r.int8range="int8range",_r.json="json",_r.jsonb="jsonb",_r.money="money",_r.numeric="numeric",_r.oid="oid",_r.reltime="reltime",_r.text="text",_r.time="time",_r.timestamp="timestamp",_r.timestamptz="timestamptz",_r.timetz="timetz",_r.tsrange="tsrange",_r.tstzrange="tstzrange";const Sr=(e,t,n={})=>{var r;const s=null!==(r=n.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((n,r)=>(n[r]=jr(r,e,t,s),n),{}):{}},jr=(e,t,n,r)=>{const s=t.find(t=>t.name===e),a=null==s?void 0:s.type,i=n[e];return a&&!r.includes(a)?Er(a,i):Nr(i)},Er=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Rr(t,n)}switch(e){case kr.bool:return Cr(t);case kr.float4:case kr.float8:case kr.int2:case kr.int4:case kr.int8:case kr.numeric:case kr.oid:return Tr(t);case kr.json:case kr.jsonb:return Or(t);case kr.timestamp:return Pr(t);case kr.abstime:case kr.date:case kr.daterange:case kr.int4range:case kr.int8range:case kr.money:case kr.reltime:case kr.text:case kr.time:case kr.timestamptz:case kr.timetz:case kr.tsrange:case kr.tstzrange:default:return Nr(t)}},Nr=e=>e,Cr=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Tr=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Or=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Rr=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,n);try{r=JSON.parse("["+a+"]")}catch(s){r=a?a.split(","):[]}return r.map(e=>Er(t,e))}return e},Pr=e=>"string"==typeof e?e.replace(" ","T"):e,Ir=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ar{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $r,Mr,Dr,Lr,zr,Ur,Br,Fr;(Mr=$r||($r={})).SYNC="sync",Mr.JOIN="join",Mr.LEAVE="leave";class Wr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wr.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Wr.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Wr.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const s=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(s,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const n=s[e];if(n){const r=t.map(e=>e.presence_ref),s=n.map(e=>e.presence_ref),a=t.filter(e=>s.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(s,{joins:i,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,(t,r)=>{var s;const a=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(r),a.length>0){const n=e[t].map(e=>e.presence_ref),r=a.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,a,r)}),this.map(a,(t,n)=>{let s=e[t];if(!s)return;const a=n.map(e=>e.presence_ref);s=s.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=s,r(t,s,n),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Lr=Dr||(Dr={})).ALL="*",Lr.INSERT="INSERT",Lr.UPDATE="UPDATE",Lr.DELETE="DELETE",(Ur=zr||(zr={})).BROADCAST="broadcast",Ur.PRESENCE="presence",Ur.POSTGRES_CHANGES="postgres_changes",Ur.SYSTEM="system",(Fr=Br||(Br={})).SUBSCRIBED="SUBSCRIBED",Fr.TIMED_OUT="TIMED_OUT",Fr.CLOSED="CLOSED",Fr.CHANNEL_ERROR="CHANNEL_ERROR";class Hr{constructor(e,t={config:{}},n){var r,s;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=fr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ar(this,mr.join,this.params,this.timeout),this.rejoinTimer=new xr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fr.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=fr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=fr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mr.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Wr(this),this.broadcastEndpointURL=Ir(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(s=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===s?void 0:s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==fr.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[zr.PRESENCE]&&this.bindings[zr.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),u={},d={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Br.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Br.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,s=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,a=[];for(let n=0;n<s;n++){const s=r[n],{filter:{event:i,schema:o,table:l,filter:c}}=s,u=t&&t[n];if(!u||u.event!==i||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=fr.errored,void(null==e||e(Br.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},s),{id:u.id}))}return this.bindings.postgres_changes=a,void(e&&e(Br.SUBSCRIBED))}null==e||e(Br.SUBSCRIBED)}).receive("error",t=>{this.state=fr.errored,null==e||e(Br.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Br.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===fr.joined&&e===zr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var r;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{const e=await i.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,s,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===a?void 0:a.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=fr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Ar(this,mr.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fr.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Ar(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=mr;if(n&&[i,o,l,c].indexOf(a)>=0&&n!==this._joinRef())return;let u=this._onMessage(a,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(u,n)):null===(s=this.bindings[a])||void 0===s||s.filter(e=>{var n,r,s,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:s,errors:a}=e,i={schema:t,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:a};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===fr.closed}_isJoined(){return this.state===fr.joined}_isJoining(){return this.state===fr.joining}_isLeaving(){return this.state===fr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Hr.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(mr.close,{},e)}_onError(e){this._on(mr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Sr(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Sr(e.columns,e.old_record)),t}}const Vr=()=>{},qr=25e3,Kr=10,Gr=100,Jr=[1e3,2e3,5e3,1e4];class Qr{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ur,this.transport=null,this.heartbeatIntervalMs=qr,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vr,this.ref=0,this.reconnectTimer=null,this.vsn=cr,this.logger=Vr,this.conn=null,this.sendBuffer=[],this.serializer=new wr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${vr.websocket}`,this.httpEndpoint=Ir(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=or.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case dr.connecting:return yr.Connecting;case dr.open:return yr.Open;case dr.closing:return yr.Closing;default:return yr.Closed}}isConnected(){return this.connectionState()===yr.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new Hr(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:s}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(Lc){this.log("error","error in heartbeat callback",Lc)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Gr)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(Lc){this.log("error","error in heartbeat callback",Lc)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(Lc){this.log("error","error in heartbeat callback",Lc)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(Lc){this.log("error","error in heartbeat callback",Lc)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:s}=e,a=s?`(${s})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${n} ${a}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===dr.open||this.conn.readyState===dr.connecting)try{this.conn.close()}catch(Lc){this.log("error","Error closing connection",Lc)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(mr.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.86.0"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(mr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(Lc){this.log("error",`error in ${e} callback`,Lc)}})}catch(Lc){this.log("error",`error triggering ${e} callbacks`,Lc)}}_setupReconnectionTimer(){this.reconnectTimer=new xr(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Kr)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,s,a,i,o,l,c,u,d,h;switch(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:ur,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:qr,this.worker=null!==(s=null==e?void 0:e.worker)&&void 0!==s&&s,this.accessToken=null!==(a=null==e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:Vr,this.vsn=null!==(o=null==e?void 0:e.vsn)&&void 0!==o?o:cr,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null==e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>Jr[e-1]||1e4,this.vsn){case lr:this.encode=null!==(c=null==e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null==e?void 0:e.decode)&&void 0!==u?u:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(d=null==e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null==e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Yr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Xr(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Zr extends Yr{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class es extends Yr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const ts=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),ns=e=>{if(Array.isArray(e))return e.map(e=>ns(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=ns(n)}),t},rs=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},ss=(e,t,n)=>Yt(void 0,void 0,void 0,function*(){const r=yield Response;e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{const r=e.status||500,s=(null==n?void 0:n.statusCode)||r+"";t(new Zr(rs(n),r,s))}).catch(e=>{t(new es(rs(e),e))}):t(new es(rs(e),e))}),as=(e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,(null==t?void 0:t.duplex)&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n)):s};function is(e,t,n,r,s,a){return Yt(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,as(t,r,s,a)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>ss(e,o,r))})})}function os(e,t,n,r){return Yt(this,void 0,void 0,function*(){return is(e,"GET",t,n,r)})}function ls(e,t,n,r,s){return Yt(this,void 0,void 0,function*(){return is(e,"POST",t,r,s,n)})}function cs(e,t,n,r,s){return Yt(this,void 0,void 0,function*(){return is(e,"PUT",t,r,s,n)})}function us(e,t,n,r,s){return Yt(this,void 0,void 0,function*(){return is(e,"DELETE",t,r,s,n)})}class ds{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Yt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Xr(e))return{data:null,error:e};throw e}})}}var hs;class fs{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[hs]="BlobDownloadBuilder",this.promise=null}asStream(){return new ds(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Yt(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Xr(e))return{data:null,error:e};throw e}})}}hs=Symbol.toStringTag;const ps={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ms={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gs{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=ts(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return Yt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},ms),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;if("undefined"!=typeof Blob&&n instanceof Blob)s=new FormData,s.append("cacheControl",a.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",n);else if("undefined"!=typeof FormData&&n instanceof FormData)s=n,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),o&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(o));else{s=n,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)));("undefined"!=typeof ReadableStream&&s instanceof ReadableStream||s&&"object"==typeof s&&"pipe"in s&&"function"==typeof s.pipe)&&!a.duplex&&(a.duplex="half")}(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?cs:ls)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:i},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xr(s))return{data:null,error:s};throw s}})}upload(e,t,n){return Yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Yt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ms.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);return{data:{path:s,fullPath:(yield cs(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xr(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Yt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const s=yield ls(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+s.url),i=a.searchParams.get("token");if(!i)throw new Yr("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xr(n))return{data:null,error:n};throw n}})}update(e,t,n){return Yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Yt(this,void 0,void 0,function*(){try{return{data:yield ls(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xr(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Yt(this,void 0,void 0,function*(){try{return{data:{path:(yield ls(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xr(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Yt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield ls(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const a=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xr(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Yt(this,void 0,void 0,function*(){try{const r=yield ls(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xr(r))return{data:null,error:r};throw r}})}download(e,t){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=r?`?${r}`:"",a=this._getFinalPath(e);return new fs(()=>os(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return Yt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield os(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ns(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xr(n))return{data:null,error:n};throw n}})}exists(e){return Yt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return Yt(this,void 0,void 0,function*(){return is(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xr(n)&&n instanceof es){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&r.push(s);const a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${o}`)}}}remove(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xr(t))return{data:null,error:t};throw t}})}list(e,t,n){return Yt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},ps),t),{prefix:e||""});return{data:yield ls(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xr(r))return{data:null,error:r};throw r}})}listV2(e,t){return Yt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ls(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xr(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const vs="2.86.0",ys={"X-Client-Info":`storage-js/${vs}`};class bs{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."))}this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ys),t),this.fetch=ts(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Yt(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield os(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xr(t))return{data:null,error:t};throw t}})}getBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xr(t))return{data:null,error:t};throw t}})}createBucket(e){return Yt(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield ls(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xr(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Yt(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield ls(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xr(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var ws=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===(null==(n=t.icebergType)?void 0:n.includes("CommitState"))}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function xs(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:i}){const o=function(e,t,n){const r=new URL(t,e);if(n)for(const[s,a]of Object.entries(n))void 0!==a&&r.searchParams.set(s,a);return r.toString()}(e.baseUrl,r,s),l=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),c=await t(o,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...l,...i},body:a?JSON.stringify(a):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){const e=d?h:void 0,t=null==e?void 0:e.error;throw new ws((null==t?void 0:t.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:null==t?void 0:t.type,icebergCode:null==t?void 0:t.code,details:e})}return{status:c.status,headers:c.headers,data:h}}}}function ks(e){return e.join("")}var _s=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:ks(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:null==t?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ks(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ks(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ks(e.namespace)}`}),!0}catch(t){if(t instanceof ws&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof ws&&409===n.status)return;throw n}}};function Ss(e){return e.join("")}var js=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ss(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ss(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ss(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ss(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((null==t?void 0:t.purge)??!1)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ss(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ss(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof ws&&404===n.status)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof ws&&409===n.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},Es=class{constructor(e){var t;let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=xs({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=null==(t=e.accessDelegation)?void 0:t.join(","),this.namespaceOps=new _s(this.client,n),this.tableOps=new js(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class Ns{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ys),t),this.fetch=ts(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield ls(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xr(t))return{data:null,error:t};throw t}})}listBuckets(e){return Yt(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);const n=t.toString(),r=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield os(this.fetch,r,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xr(t))return{data:null,error:t};throw t}})}from(e){if(!(e=>!(!e||"string"!=typeof e)&&(!(0===e.length||e.length>100)&&(e.trim()===e&&(!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))))(e))throw new Yr("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Es({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Yt(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Cs={"X-Client-Info":`storage-js/${vs}`,"Content-Type":"application/json"};class Ts extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Os(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class Rs extends Ts{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ps extends Ts{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Is,As;(As=Is||(Is={})).InternalError="InternalError",As.S3VectorConflictException="S3VectorConflictException",As.S3VectorNotFoundException="S3VectorNotFoundException",As.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",As.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",As.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";const $s=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Ms=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ds=(e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function Ls(e,t,n,r,s,a){return Yt(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,Ds(t,r,s,a)).then(e=>{if(!e.ok)throw e;if(null==r?void 0:r.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>((e,t,n)=>Yt(void 0,void 0,void 0,function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==n?void 0:n.noResolveJson)){const n=e.status||500,r=e;if("function"==typeof r.json)r.json().then(e=>{const r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||n+"";t(new Rs(Ms(e),n,r))}).catch(()=>{const e=n+"",s=r.statusText||`HTTP ${n} error`;t(new Rs(s,n,e))});else{const e=n+"",s=r.statusText||`HTTP ${n} error`;t(new Rs(s,n,e))}}else t(new Ps(Ms(e),e))}))(e,o,r))})})}function zs(e,t,n,r,s){return Yt(this,void 0,void 0,function*(){return Ls(e,"POST",t,r,s,n)})}class Us{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Cs),t),this.fetch=$s(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Yt(this,void 0,void 0,function*(){try{return{data:(yield zs(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Yt(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Os(n))return{data:null,error:n};throw n}})}listIndexes(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Yt(this,void 0,void 0,function*(){try{return{data:(yield zs(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Os(n))return{data:null,error:n};throw n}})}}class Bs{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Cs),t),this.fetch=$s(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Yt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield zs(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}getVectors(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}listVectors(e){return Yt(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield zs(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}queryVectors(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Yt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield zs(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}}class Fs{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Cs),t),this.fetch=$s(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:(yield zs(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}getBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}listBuckets(){return Yt(this,arguments,void 0,function*(e={}){try{return{data:yield zs(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:(yield zs(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Os(t))return{data:null,error:t};throw t}})}}class Ws extends Fs{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Hs(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Yt(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Yt(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Yt(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Yt(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class Hs extends Us{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Yt(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Yt(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Yt(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Yt(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Vs(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Vs extends Bs{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Yt(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Yt(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Yt(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Yt(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Yt(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class qs extends bs{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new gs(this.url,this.headers,e,this.fetch)}get vectors(){return new Ws(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ns(this.url+"/iceberg",this.headers,this.fetch)}}let Ks="";Ks="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Gs={headers:{"X-Client-Info":`supabase-js-${Ks}/2.86.0`}},Js={schema:"public"},Qs={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ys={},Xs=(e,t,n)=>{const r=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(n),s=Headers;return async(n,a)=>{var i;const o=null!==(i=await t())&&void 0!==i?i:e;let l=new s(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},a),{headers:l}))}};const Zs="2.86.0",ea=3e4,ta=9e4,na={"X-Client-Info":`gotrue-js/${Zs}`},ra="X-Supabase-Api-Version",sa={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},aa=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class ia extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function oa(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class la extends ia{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class ca extends ia{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ua extends ia{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class da extends ua{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ha extends ua{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fa extends ua{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pa extends ua{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ma extends ua{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ga extends ua{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function va(e){return oa(e)&&"AuthRetryableFetchError"===e.name}class ya extends ua{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class ba extends ua{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const wa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xa=" \t\n\r=".split(""),ka=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<xa.length;t+=1)e[xa[t].charCodeAt(0)]=-2;for(let t=0;t<wa.length;t+=1)e[wa[t].charCodeAt(0)]=t;return e})();function _a(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(wa[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(wa[e]),t.queuedBits-=6}}function Sa(e,t,n){const r=ka[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function ja(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)Sa(e.charCodeAt(i),s,a);return t.join("")}function Ea(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Na(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)Sa(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Ca(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Ea(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Ta(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>_a(e,n,r)),_a(null,n,r),t.join("")}const Oa=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Ra={tested:!1,writable:!1},Pa=()=>{if(!Oa())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Lc){return!1}if(Ra.tested)return Ra.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ra.tested=!0,Ra.writable=!0}catch(Lc){Ra.tested=!0,Ra.writable=!1}return Ra.writable};const Ia=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Aa=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},$a=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},Ma=async(e,t)=>{await e.removeItem(t)};class Da{constructor(){this.promise=new Da.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function La(e){const t=e.split(".");if(3!==t.length)throw new ba("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!aa.test(t[n]))throw new ba("JWT not in base64url format");return{header:JSON.parse(ja(t[0])),payload:JSON.parse(ja(t[1])),signature:Na(t[2]),raw:{header:t[0],payload:t[1]}}}function za(e){return("0"+e.toString(16)).substr(-2)}async function Ua(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ba(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,za).join("")}();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Aa(e,`${t}-code-verifier`,s);const a=await Ua(r);return[a,r===a?"plain":"s256"]}Da.promiseConstructor=Promise;const Fa=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Wa=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ha(e){if(!Wa.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Va(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qa(e){return JSON.parse(JSON.stringify(e))}const Ka=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ga=[502,503,504];async function Ja(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new ga(Ka(e),0);if(Ga.includes(e.status))throw new ga(Ka(e),e.status);let r,s;try{r=await e.json()}catch(Lc){throw new ca(Ka(Lc),Lc)}const a=function(e){const t=e.headers.get(ra);if(!t)return null;if(!t.match(Fa))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Lc){return null}}(e);if(a&&a.getTime()>=sa.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?s=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new ya(Ka(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new da}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new ya(Ka(r),e.status,r.weak_password.reasons);throw new la(Ka(r),e.status||500,s)}async function Qa(e,t,n,r){var s;const a=Object.assign({},null==r?void 0:r.headers);a[ra]||(a[ra]=sa.name),(null==r?void 0:r.jwt)&&(a.Authorization=`Bearer ${r.jwt}`);const i=null!==(s=null==r?void 0:r.query)&&void 0!==s?s:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,s,a){const i=((e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))})(t,r,s,a);let o;try{o=await e(n,Object.assign({},i))}catch(Lc){throw new ga(Ka(Lc),0)}o.ok||await Ja(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(Lc){await Ja(Lc)}}(e,t,n+o,{headers:a,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Ya(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Xa(e){const t=Ya(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Za(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ei(e){return{data:e,error:null}}function ti(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,i=Wt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},user:Object.assign({},i)},error:null}}function ni(e){return e}const ri=["global","local","others"];class si{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Ia(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=ri[0]){if(ri.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ri.join(", ")}`);try{return await Qa(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oa(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Qa(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Za})}catch(n){if(oa(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Wt(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await Qa(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ti,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(oa(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Qa(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Za})}catch(t){if(oa(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,s,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Qa(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:ni});if(c.error)throw c.error;const u=await c.json(),d=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(oa(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Ha(e);try{return await Qa(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Za})}catch(t){if(oa(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ha(e);try{return await Qa(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Za})}catch(n){if(oa(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Ha(e);try{return await Qa(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Za})}catch(n){if(oa(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ha(e.userId);try{const{data:t,error:n}=await Qa(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(oa(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ha(e.userId),Ha(e.id);try{return{data:await Qa(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(oa(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,s,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Qa(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:ni});if(c.error)throw c.error;const u=await c.json(),d=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(oa(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Qa(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(oa(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Qa(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(oa(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Qa(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(n){if(oa(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Qa(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(oa(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Qa(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(oa(t))return{data:null,error:t};throw t}}}function ai(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ii=!!(globalThis&&Pa()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class oi extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class li extends oi{}async function ci(e,t,n){const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw new li(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ii)try{await globalThis.navigator.locks.query()}catch(Lc){}return await n()}try{return await n()}finally{}}))}function ui(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function di(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class hi extends Error{constructor({message:e,code:t,cause:n,name:r}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(s=null!=r?r:n instanceof Error?n.name:void 0)&&void 0!==s?s:"Unknown Error",this.code=t}}class fi extends hi{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function pi({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new hi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(n=a.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new hi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(r=a.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new hi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(s=a.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new hi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new hi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new hi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===a.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new hi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new hi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!xi(t))return new hi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(a.rp.id!==t)return new hi({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new hi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new hi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new hi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function mi({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new hi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new hi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!xi(t))return new hi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rpId!==t)return new hi({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new hi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new hi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const gi=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function vi(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=Wt(e,["challenge","user","excludeCredentials"]),a=Na(t).buffer,i=Object.assign(Object.assign({},n),{id:Na(n.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:a,user:i});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:Na(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function yi(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Wt(e,["challenge","allowCredentials"]),s=Na(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:Na(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return a}function bi(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ta(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ta(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function wi(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ta(new Uint8Array(s.authenticatorData)),clientDataJSON:Ta(new Uint8Array(s.clientDataJSON)),signature:Ta(new Uint8Array(s.signature)),userHandle:s.userHandle?Ta(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function xi(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function ki(){var e,t;return!!(Oa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const _i={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Si={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ji(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(const s of e)if(s)for(const e in s){const a=s[e];if(void 0!==a)if(Array.isArray(a))r[e]=a;else if(n(a))r[e]=a;else if(t(a)){const n=r[e];t(n)?r[e]=ji(n,a):r[e]=ji(a)}else r[e]=a}return r}class Ei{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},s){try{const{data:a,error:i}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:i};const o=null!=r?r:gi.createNewAbortSignal();if("create"===a.webauthn.type){const{user:e}=a.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${n}`),e.displayName||(e.displayName=e.name)}switch(a.webauthn.type){case"create":{const t=function(e,t){return ji(_i,e,t||{})}(a.webauthn.credential_options.publicKey,null==s?void 0:s.create),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fi("Browser returned unexpected credential type",t)}:{data:null,error:new fi("Empty credential response",t)}}catch(t){return{data:null,error:pi({error:t,options:e})}}}({publicKey:t,signal:o});return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}case"request":{const t=function(e,t){return ji(Si,e,t||{})}(a.webauthn.credential_options.publicKey,null==s?void 0:s.request),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fi("Browser returned unexpected credential type",t)}:{data:null,error:new fi("Empty credential response",t)}}catch(t){return{data:null,error:mi({error:t,options:e})}}}(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:t,signal:o}));return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(a){return oa(a)?{data:null,error:a}:{data:null,error:new ca("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}={}},s){if(!t)return{data:null,error:new ia("rpId is required for WebAuthn authentication")};try{if(!ki())return{data:null,error:new ca("Browser does not support WebAuthn",null)};const{data:a,error:i}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:s});if(!a)return{data:null,error:i};const{webauthn:o}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:n,credential_response:o.credential_response}})}catch(a){return oa(a)?{data:null,error:a}:{data:null,error:new ca("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}={}},s){if(!t)return{data:null,error:new ia("rpId is required for WebAuthn registration")};try{if(!ki())return{data:null,error:new ca("Browser does not support WebAuthn",null)};const{data:a,error:i}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(t=>{var n;return null===(n=t.data)||void 0===n?void 0:n.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};const{data:o,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:s});return o?this._verify({factorId:a.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:n,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(a){return oa(a)?{data:null,error:a}:{data:null,error:new ca("Unexpected error in register",a)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Lc){"undefined"!=typeof self&&(self.globalThis=self)}}();const Ni={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:na,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ci(e,t,n){return await n()}const Ti={};class Oi{get jwks(){var e,t;return null!==(t=null===(e=Ti[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Ti[this.storageKey]=Object.assign(Object.assign({},Ti[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Ti[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ti[this.storageKey]=Object.assign(Object.assign({},Ti[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Ni),e);if(this.storageKey=s.storageKey,this.instanceID=null!==(t=Oi.nextInstanceID[this.storageKey])&&void 0!==t?t:0,Oi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.instanceID>0&&Oa()){this._logPrefix();this.logDebugMessages}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new si({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ia(s.fetch),this.lock=s.lock||Ci,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Oa()&&(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===n?void 0:n.locks)?this.lock=ci:this.lock=Ci,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ei(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Pa()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ai(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ai(this.memoryStorage)),Oa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Lc){}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Zs}) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},n="none";if(Oa()&&(t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(Lc){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Oa()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return oa(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return oa(t)?this._returnResult({error:t}):this._returnResult({error:new ca("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const s=await Qa(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Ya}),{data:a,error:i}=s;if(i||!a)return this._returnResult({data:{user:null,session:null},error:i});const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(s){if(oa(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var t,n,r;try{let s;if("email"in e){const{email:n,password:r,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Ba(this.storage,this.storageKey)),s=await Qa(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:Ya})}else{if(!("phone"in e))throw new fa("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;s=await Qa(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(n=null==i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Ya})}}const{data:a,error:i}=s;if(i||!a)return this._returnResult({data:{user:null,session:null},error:i});const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(s){if(oa(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:s}=e;t=await Qa(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Xa})}else{if(!("phone"in e))throw new fa("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=e;t=await Qa(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Xa})}}const{data:n,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){const e=new ha;return this._returnResult({data:{user:null,session:null},error:e})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(oa(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,r,s,a,i,o,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:p,options:m}=e;let g;if(Oa())if("object"==typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!=typeof d||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const v=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href),y=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=ui(y[0]);let w=null===(n=null==m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!w){const e=await g.request({method:"eth_chainId"});w=parseInt(e,16)}h=function(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const f=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${ui(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${d}\nVersion: ${h}\nChain ID: ${n}${i?`\nNonce: ${i}`:""}\nIssued At: ${a.toISOString()}`;if(s&&(p+=`\nExpiration Time: ${s.toISOString()}`),o&&(p+=`\nNot Before: ${o.toISOString()}`),l&&(p+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${f}\n${p}`}({domain:v.host,address:b,statement:p,uri:v.href,version:"1",chainId:w,nonce:null===(r=null==m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(a=null===(s=null==m?void 0:m.signInWithEthereum)||void 0===s?void 0:s.issuedAt)&&void 0!==a?a:new Date,expirationTime:null===(i=null==m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null==m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null==m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await g.request({method:"personal_sign",params:[di(h),b]})}try{const{data:t,error:n}=await Qa(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:Ya});if(n)throw n;if(!t||!t.session||!t.user){const e=new ha;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(p){if(oa(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,n,r,s,a,i,o,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let v;if(Oa())if("object"==typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v&&"function"==typeof v.signMessage&&"publicKey"in v&&"object"==typeof v&&v.publicKey&&"toBase58"in v.publicKey&&"function"==typeof v.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${y.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(r=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await Qa(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Ta(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Ya});if(n)throw n;if(!t||!t.session||!t.user){const e=new ha;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(m){if(oa(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await $a(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:s}=await Qa(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ya});if(await Ma(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!t||!t.session||!t.user){const e=new ha;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:s})}catch(s){if(oa(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:s,nonce:a}=e,i=await Qa(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Ya}),{data:o,error:l}=i;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new ha;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(oa(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,r,s,a;try{if("email"in e){const{email:r,options:s}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await Ba(this.storage,this.storageKey));const{error:o}=await Qa(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null==s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null==s?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await Qa(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null==n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(a=null==n?void 0:n.channel)&&void 0!==a?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o})}throw new fa("You must provide either an email or phone number.")}catch(i){if(oa(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async verifyOtp(e){var t,n;try{let r,s;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:a,error:i}=await Qa(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Ya});if(i)throw i;if(!a){throw new Error("An error occurred on token verification.")}const o=a.session,l=a.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(r){if(oa(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,n,r,s,a;try{let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Ba(this.storage,this.storageKey));const l=await Qa(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ei});return(null===(s=l.data)||void 0===s?void 0:s.url)&&Oa()&&!(null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(i){if(oa(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new da;const{error:r}=await Qa(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(oa(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:s}=e,{error:a}=await Qa(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}if("phone"in e){const{phone:n,type:r,options:s}=e,{data:a,error:i}=await Qa(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:i})}throw new fa("You must provide either an email or phone number and a type")}catch(t){if(oa(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(Lc){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Lc){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await $a(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<ta;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await $a(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Va()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,n,r)=>{if("__isInsecureUserWarningProxy"===n)return!0;if("symbol"==typeof n){const t=n.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,n,r)}return t.value||"string"!=typeof n||(t.value=!0),Reflect.get(e,n,r)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Qa(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Za}):await this._useSession(async e=>{var t,n,r;const{data:s,error:a}=e;if(a)throw a;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Qa(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Za}):{data:{user:null},error:new da}})}catch(t){if(oa(t))return function(e){return oa(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Ma(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new da;const a=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Ba(this.storage,this.storageKey));const{data:l,error:c}=await Qa(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:Za});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(oa(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new da;const t=Date.now()/1e3;let n=t,r=!0,s=null;const{payload:a}=La(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(t){if(oa(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:s}=t;if(s)throw s;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new da;const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(oa(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Oa())throw new pa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new ma("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new pa("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ma("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!(s&&i&&a&&l))throw new pa("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;o&&(d=parseInt(o));const{data:h,error:f}=await this._getUser(s);if(f)throw f;const p={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:u,expires_at:d,refresh_token:a,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:e.type},error:null})}catch(n){if(oa(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await $a(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return this._returnResult({error:s});const a=null===(n=r.session)||void 0===n?void 0:n.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return oa(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await Ma(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(s){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await Ba(this.storage,this.storageKey,!0));try{return await Qa(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(oa(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(oa(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,s,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await Qa(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return Oa()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),this._returnResult({data:{provider:e.provider,url:null==n?void 0:n.url},error:null})}catch(n){if(oa(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:s}}=t;if(r)throw r;const{options:a,provider:i,token:o,access_token:l,nonce:c}=e,u=await Qa(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(n=null==s?void 0:s.access_token)&&void 0!==n?n:void 0,body:{provider:i,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Ya}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new ha})}catch(r){if(oa(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:a}=t;if(a)throw a;return await Qa(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(oa(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Qa(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ya})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&va(t)&&Date.now()+n-s<ea},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!r(s,null,t))return void e(t)}catch(Lc){if(!r(s,Lc))return void t(Lc)}})()}))}catch(s){if(this._debug(t,"error",s),oa(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Oa()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await $a(this.storage,this.storageKey);if(s&&this.userStorage){let t=await $a(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:s.user},await Aa(this.userStorage,this.storageKey+"-user",t)),s.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Va()}else if(s&&!s.user&&!s.user){const e=await $a(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(s.user=e.user,await Ma(this.storage,this.storageKey+"-user"),await Aa(this.storage,this.storageKey,s)):s.user=Va()}if(this._debug(n,"session from storage",s),!this._isValidSession(s))return this._debug(n,"session is not valid"),void(null!==s&&await this._removeSession());const a=1e3*(null!==(t=s.expires_at)&&void 0!==t?t:1/0)-Date.now()<ta;if(this._debug(n,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(va(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(s.access_token);!t&&(null==e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return void this._debug(n,"error",s)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new da;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Da;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new da;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(s){if(this._debug(r,"error",s),oa(s)){const e={data:null,error:s};return va(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],s=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(Lc){r.push(Lc)}});if(await Promise.all(s),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Aa(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=qa(e);await Aa(this.storage,this.storageKey,r)}else{const e=qa(t);await Aa(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Ma(this.storage,this.storageKey),await Ma(this.storage,this.storageKey+"-code-verifier"),await Ma(this.storage,this.storageKey+"-user"),this.userStorage&&await Ma(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Oa()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Lc){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ea);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/ea);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(Lc){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Lc){if(!(Lc.isAcquireTimeout||Lc instanceof oi))throw Lc;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Oa()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await Ba(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;return s?this._returnResult({data:null,error:s}):await Qa(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(oa(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:a}=t;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await Qa(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(t){if(oa(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?bi(e.webauthn.credential_response):wi(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:o}=await Qa(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:o}))})}catch(t){if(oa(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return this._returnResult({data:null,error:s});const a=await Qa(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});if(a.error)return a;const{data:i}=a;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:vi(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:yi(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(oa(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const s of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(s),"verified"===s.status&&r[s.factor_type].push(s);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=La(n.access_token);let a=null;s.aal&&(a=s.aal);let i=a;(null!==(t=null===(e=n.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(i="aal2");return{data:{currentLevel:a,nextLevel:i,currentAuthenticationMethods:s.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await Qa(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new da})})}catch(t){if(oa(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new da});const a=await Qa(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return a.data&&a.data.redirect_url&&Oa()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(oa(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new da});const a=await Qa(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return a.data&&a.data.redirect_url&&Oa()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(oa(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await Qa(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new da})})}catch(e){if(oa(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?(await Qa(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new da})})}catch(t){if(oa(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:s,error:a}=await Qa(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=r,n=s.keys.find(t=>t.kid===e),n||null):null}async getClaims(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}const{header:r,payload:s,signature:a,raw:{header:i,payload:o}}=La(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:s,header:r,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,a,Ca(`${i}.${o}`))))throw new ba("Invalid JWT signature");return{data:{claims:s,header:r,signature:a},error:null}}catch(n){if(oa(n))return this._returnResult({data:null,error:n});throw n}}}Oi.nextInstanceID={};const Ri=Oi;class Pi extends Ri{constructor(e){super(e)}}class Ii{constructor(e,t,n){var r,s,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l=function(e,t){var n,r;const{db:s,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(n=null==d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:Js,realtime:Ys,auth:Object.assign(Object.assign({},Qs),{storageKey:o}),global:Gs});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(s=l.global.headers)&&void 0!==s?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=Xs(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>{}),this.rest=new tr(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new qs(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Rn(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:i,lock:o,debug:l,throwOnError:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pi({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:i,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Qr(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);!!t&&parseInt(t[1],10)}();const Ai=new Ii("","",$i);var $i;const Mi=wt()(St((e,t)=>({mode:"local",initialized:!1,user:null,session:null,authLoading:!0,devices:[],selectedDeviceId:null,devicesLoading:!1,initialize:async()=>{const t="local";e({mode:t}),e({initialized:!0,authLoading:!1})},signInWithGoogle:async()=>{},signOut:async()=>{},fetchDevices:async()=>{const n=t().getAccessToken();if(n){e({devicesLoading:!0});try{const r=await fetch("/api/devices",{headers:{Authorization:`Bearer ${n}`}});if(r.ok){const n=(await r.json()).devices;e({devices:n}),!t().selectedDeviceId&&n.length>0&&e({selectedDeviceId:n[0].id})}}catch(r){}e({devicesLoading:!1})}},selectDevice:t=>{e({selectedDeviceId:t})},claimDevice:async(e,n,r)=>{const s=t().getAccessToken();if(!s)return!1;try{if((await fetch("/api/devices/claim",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({deviceId:e,token:n,name:r})})).ok)return await t().fetchDevices(),!0}catch(a){}return!1},removeDevice:async n=>{const r=t().getAccessToken();if(!r)return!1;try{if((await fetch(`/api/devices/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}})).ok)return e(e=>{var t;return{devices:e.devices.filter(e=>e.id!==n),selectedDeviceId:e.selectedDeviceId===n?(null==(t=e.devices[0])?void 0:t.id)??null:e.selectedDeviceId}}),!0}catch(s){}return!1},renameDevice:async(n,r)=>{const s=t().getAccessToken();if(!s)return!1;try{if((await fetch(`/api/devices/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({name:r})})).ok)return e(e=>({devices:e.devices.map(e=>e.id===n?{...e,name:r}:e)})),!0}catch(a){}return!1},getSelectedDevice:()=>{const{devices:e,selectedDeviceId:n}=t();return e.find(e=>e.id===n)??null},getAccessToken:()=>{var e;return(null==(e=t().session)?void 0:e.access_token)??null}}),{name:"brewos-app-state",partialize:e=>({selectedDeviceId:e.selectedDeviceId})})),Di=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Li={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},l)=>g.createElement("svg",{ref:l,...Li,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Di("lucide",s),...o},[...i.map(([e,t])=>g.createElement(e,t)),...Array.isArray(a)?a:[a]])),Ui=(e,t)=>{const n=g.forwardRef(({className:n,...r},s)=>{return g.createElement(zi,{ref:s,iconNode:t,className:Di(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var a});return n.displayName=`${e}`,n},Bi=Ui("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Fi=Ui("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]),Wi=Ui("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]),Hi=Ui("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Vi=Ui("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),qi=Ui("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ki=Ui("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),Gi=Ui("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Ji=Ui("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),Qi=Ui("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Yi=Ui("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),Xi=Ui("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Zi=Ui("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]),eo=Ui("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),to=Ui("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),no=Ui("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),ro=Ui("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),so=Ui("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),ao=Ui("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),io=Ui("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),oo=Ui("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),lo=Ui("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),co=Ui("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),uo=Ui("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),ho=Ui("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),fo=Ui("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),po=Ui("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),mo=Ui("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),go=Ui("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),vo=Ui("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),yo=Ui("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),bo=Ui("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),wo=Ui("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),xo=Ui("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),ko=Ui("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),_o=Ui("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),So=Ui("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]),jo=Ui("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Eo=Ui("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),No=Ui("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),Co=Ui("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),To=Ui("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Oo=Ui("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ro=Ui("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Po=Ui("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),Io=Ui("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),Ao=Ui("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$o=Ui("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Mo(){const e=_e(),{devices:t,selectedDeviceId:n,selectDevice:r,getSelectedDevice:s}=Mi(),[a,i]=g.useState(!1),o=g.useRef(null),l=s();return g.useEffect(()=>{function e(e){o.current&&!o.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),0===t.length?null:m.jsxs("div",{className:"relative",ref:o,children:[m.jsxs("button",{onClick:()=>i(!a),className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-cream-100 hover:bg-cream-200 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[(null==l?void 0:l.isOnline)?m.jsx(Po,{className:"w-4 h-4 text-emerald-600"}):m.jsx(Ro,{className:"w-4 h-4 text-coffee-400"}),m.jsx("span",{className:"font-medium text-coffee-800 max-w-[150px] truncate",children:(null==l?void 0:l.name)||"Select Machine"})]}),m.jsx(Vi,{className:"w-4 h-4 text-coffee-500 transition-transform "+(a?"rotate-180":"")})]}),a&&m.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-cream-200 overflow-hidden z-50",children:[m.jsxs("div",{className:"p-2",children:[m.jsx("p",{className:"px-3 py-1 text-xs font-semibold text-coffee-400 uppercase tracking-wider",children:"Your Machines"}),t.map(e=>m.jsxs("button",{onClick:()=>{r(e.id),i(!1)},className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+(e.id===n?"bg-accent/10 text-accent":"hover:bg-cream-100 text-coffee-700"),children:[m.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center "+(e.isOnline?"bg-emerald-100":"bg-cream-200"),children:e.isOnline?m.jsx(Ji,{className:"w-4 h-4 text-emerald-600"}):m.jsx(Ji,{className:"w-4 h-4 text-coffee-400"})}),m.jsxs("div",{className:"flex-1 text-left",children:[m.jsx("p",{className:"font-medium truncate",children:e.name}),m.jsx("p",{className:"text-xs text-coffee-400",children:e.isOnline?"Online":"Offline"})]}),e.id===n&&m.jsx(Hi,{className:"w-4 h-4"})]},e.id))]}),m.jsxs("div",{className:"border-t border-cream-200 p-2",children:[m.jsxs("button",{onClick:()=>{i(!1),e("/devices")},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-cream-100 text-coffee-600 text-sm",children:[m.jsx(_o,{className:"w-4 h-4"}),"Manage Devices"]}),m.jsxs("button",{onClick:()=>{i(!1),e("/onboarding")},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-cream-100 text-accent text-sm",children:[m.jsx(mo,{className:"w-4 h-4"}),"Add New Machine"]})]})]})]})}function Do(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Do(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const Lo=e=>{const t=Fo(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),zo(n,t)||Bo(e)},getConflictingClassGroupIds:(e,t)=>{const s=n[e]||[];return t&&r[e]?[...s,...r[e]]:s}}},zo=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?zo(e.slice(1),s):void 0;if(a)return a;if(0===t.validators.length)return;const i=e.join("-");return null==(n=t.validators.find(({validator:e})=>e(i)))?void 0:n.classGroupId},Uo=/^\[(.+)\]$/,Bo=e=>{if(Uo.test(e)){const t=Uo.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Fo=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return qo(Object.entries(e.classGroups),n).forEach(([e,n])=>{Wo(n,r,e,t)}),r},Wo=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Ho(t,e)).classGroupId=n)}if("function"==typeof e)return Vo(e)?void Wo(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,s])=>{Wo(s,Ho(t,e),n,r)})})},Ho=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Vo=e=>e.isThemeGetter,qo=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,Ko=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):s(e,t)}}},Go=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,s=t[0],a=t.length,i=e=>{const n=[];let i,o=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===o){if(c===s&&(r||e.slice(d,d+a)===t)){n.push(e.slice(l,d)),l=d+a;continue}if("/"===c){i=d;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:n,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return n?e=>n({className:e,parseClassName:i}):i},Jo=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},Qo=/\s+/;function Yo(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Xo(e))&&(r&&(r+=" "),r+=t);return r}const Xo=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Xo(e[r]))&&(n&&(n+=" "),n+=t);return n};function Zo(e,...t){let n,r,s,a=function(o){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:Ko(e.cacheSize),parseClassName:Go(e),...Lo(e)}))(l),r=n.cache.get,s=n.cache.set,a=i,i(o)};function i(e){const t=r(e);if(t)return t;const a=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(Qo);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=n(e);let h=Boolean(d),f=r(h?u.substring(0,d):u);if(!f){if(!h){o=e+(o.length>0?" "+o:o);continue}if(f=r(u),!f){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=Jo(t).join(":"),m=c?p+"!":p,g=m+f;if(a.includes(g))continue;a.push(g);const v=s(f,h);for(let n=0;n<v.length;++n){const e=v[n];a.push(m+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return s(e,a),a}return function(){return a(Yo.apply(null,arguments))}}const el=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},tl=/^\[(?:([a-z-]+):)?(.+)\]$/i,nl=/^\d+\/\d+$/,rl=new Set(["px","full","screen"]),sl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,al=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,il=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ol=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ll=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,cl=e=>dl(e)||rl.has(e)||nl.test(e),ul=e=>Sl(e,"length",jl),dl=e=>Boolean(e)&&!Number.isNaN(Number(e)),hl=e=>Sl(e,"number",dl),fl=e=>Boolean(e)&&Number.isInteger(Number(e)),pl=e=>e.endsWith("%")&&dl(e.slice(0,-1)),ml=e=>tl.test(e),gl=e=>sl.test(e),vl=new Set(["length","size","percentage"]),yl=e=>Sl(e,vl,El),bl=e=>Sl(e,"position",El),wl=new Set(["image","url"]),xl=e=>Sl(e,wl,Cl),kl=e=>Sl(e,"",Nl),_l=()=>!0,Sl=(e,t,n)=>{const r=tl.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},jl=e=>al.test(e)&&!il.test(e),El=()=>!1,Nl=e=>ol.test(e),Cl=e=>ll.test(e),Tl=Zo(()=>{const e=el("colors"),t=el("spacing"),n=el("blur"),r=el("brightness"),s=el("borderColor"),a=el("borderRadius"),i=el("borderSpacing"),o=el("borderWidth"),l=el("contrast"),c=el("grayscale"),u=el("hueRotate"),d=el("invert"),h=el("gap"),f=el("gradientColorStops"),p=el("gradientColorStopPositions"),m=el("inset"),g=el("margin"),v=el("opacity"),y=el("padding"),b=el("saturate"),w=el("scale"),x=el("sepia"),k=el("skew"),_=el("space"),S=el("translate"),j=()=>["auto",ml,t],E=()=>[ml,t],N=()=>["",cl,ul],C=()=>["auto",dl,ml],T=()=>["","0",ml],O=()=>[dl,ml];return{cacheSize:500,separator:":",theme:{colors:[_l],spacing:[cl,ul],blur:["none","",gl,ml],brightness:O(),borderColor:[e],borderRadius:["none","","full",gl,ml],borderSpacing:E(),borderWidth:N(),contrast:O(),grayscale:T(),hueRotate:O(),invert:T(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[pl,ul],inset:j(),margin:j(),opacity:O(),padding:E(),saturate:O(),scale:O(),sepia:T(),skew:O(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",ml]}],container:["container"],columns:[{columns:[gl]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ml]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fl,ml]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ml]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",fl,ml]}],"grid-cols":[{"grid-cols":[_l]}],"col-start-end":[{col:["auto",{span:["full",fl,ml]},ml]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[_l]}],"row-start-end":[{row:["auto",{span:[fl,ml]},ml]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ml]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ml]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ml,t]}],"min-w":[{"min-w":[ml,t,"min","max","fit"]}],"max-w":[{"max-w":[ml,t,"none","full","min","max","fit","prose",{screen:[gl]},gl]}],h:[{h:[ml,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ml,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ml,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ml,t,"auto","min","max","fit"]}],"font-size":[{text:["base",gl,ul]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",hl]}],"font-family":[{font:[_l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ml]}],"line-clamp":[{"line-clamp":["none",dl,hl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",cl,ml]}],"list-image":[{"list-image":["none",ml]}],"list-style-type":[{list:["none","disc","decimal",ml]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",cl,ul]}],"underline-offset":[{"underline-offset":["auto",cl,ml]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ml]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ml]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",bl]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",yl]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xl]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[cl,ml]}],"outline-w":[{outline:[cl,ul]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[cl,ul]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",gl,kl]}],"shadow-color":[{shadow:[_l]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",gl,ml]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ml]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",ml]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",ml]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[fl,ml]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ml]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ml]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ml]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[cl,ul,hl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function Ol(...e){return Tl(function(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Do(e))&&(r&&(r+=" "),r+=t);return r}(e))}function Rl(e){return`${Math.floor(e/36e5)}:${Math.floor(e%36e5/6e4).toString().padStart(2,"0")}`}function Pl(e){const t=Math.floor(e/1e3);return`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}`}function Il(e){const t=["B","KB","MB","GB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n++;return`${r.toFixed(1)} ${t[n]}`}function Al(e){return{unknown:"Unknown",init:"Initializing",idle:"Idle",heating:"Heating",ready:"Ready",brewing:"Brewing",steaming:"Steaming",cooldown:"Cooling Down",fault:"Fault"}[e]||e}function $l(){const e=_e(),{deviceId:t}=function(){let{matches:e}=g.useContext(ve),t=e[e.length-1];return t?t.params:{}}(),n=Lt(e=>e.connectionState),r=Lt(e=>e.device.deviceName),{mode:s,user:a,signOut:i,getSelectedDevice:o}=Mi(),l="cloud"===s,c=o(),u="connected"===n,d="connecting"===n||"reconnecting"===n,h=((e,t)=>{const n=e&&t?`/device/${t}`:"";return[{name:"Dashboard",href:n||"/",icon:co},{name:"Brewing",href:`${n}/brewing`,icon:Ji},{name:"Scale",href:`${n}/scale`,icon:xo},{name:"Settings",href:`${n}/settings`,icon:_o},{name:"System",href:`${n}/system`,icon:ko},{name:"About",href:`${n}/about`,icon:lo}]})(l,t||(null==c?void 0:c.id));return m.jsxs("div",{className:"min-h-screen bg-cream-100",children:[m.jsx("header",{className:"sticky top-0 z-50 glass border-b border-cream-200",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("img",{src:"/logo.png",alt:"BrewOS",className:"h-8 w-auto"}),l&&m.jsx(Mo,{}),!l&&r&&m.jsx("span",{className:"hidden sm:block text-sm font-medium text-coffee-600",children:r})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-cream-200/80",children:l?m.jsxs(m.Fragment,{children:[m.jsx(Ki,{className:"w-4 h-4 text-accent"}),m.jsx("span",{className:"text-xs font-medium text-coffee-700",children:"Cloud"})]}):u?m.jsxs(m.Fragment,{children:[m.jsx(Po,{className:"w-4 h-4 text-emerald-600"}),m.jsx("span",{className:"text-xs font-medium text-coffee-700",children:"Local"})]}):d?m.jsxs(m.Fragment,{children:[m.jsx(Po,{className:"w-4 h-4 text-amber-500 animate-pulse"}),m.jsx("span",{className:"text-xs font-medium text-coffee-700",children:"Connecting..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(Ro,{className:"w-4 h-4 text-red-500"}),m.jsx("span",{className:"text-xs font-medium text-coffee-700",children:"Disconnected"})]})}),l&&a&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>e("/devices"),className:"p-2 rounded-lg hover:bg-cream-200 text-coffee-600",title:"Manage Devices",children:m.jsx(oo,{className:"w-5 h-5"})}),m.jsx("button",{onClick:async()=>{await i(),e("/login")},className:"p-2 rounded-lg hover:bg-cream-200 text-coffee-600",title:"Sign Out",children:m.jsx(fo,{className:"w-5 h-5"})})]})]})]})})}),m.jsx("nav",{className:"sticky top-16 z-40 bg-white border-b border-cream-200",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"flex gap-1 py-2 overflow-x-auto scrollbar-hide",children:h.map(e=>m.jsxs(dt,{to:e.href,end:"/"===e.href||e.href.endsWith(`/${t||(null==c?void 0:c.id)}`),className:({isActive:e})=>Ol("flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all",e?"bg-coffee-800 text-white shadow-soft":"text-coffee-600 hover:bg-cream-200"),children:[m.jsx(e.icon,{className:"w-4 h-4"}),m.jsx("span",{className:"hidden sm:inline",children:e.name})]},e.name))})})}),m.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:m.jsx(Me,{})})]})}class Ml{constructor(e){t(this,"ws",null),t(this,"config"),t(this,"state","disconnected"),t(this,"messageHandlers",new Set),t(this,"stateHandlers",new Set),t(this,"reconnectTimer",null),t(this,"reconnectDelay",1e3),t(this,"maxReconnectDelay",3e4),t(this,"pingInterval",null),this.config=e}async connect(){if("connecting"!==this.state&&"connected"!==this.state)return this.setState("connecting"),new Promise((e,t)=>{try{const n=this.buildUrl();this.ws=new WebSocket(n),this.ws.onopen=()=>{this.setState("connected"),this.reconnectDelay=1e3,this.startPing(),e()},this.ws.onclose=e=>{this.stopPing(),this.setState("disconnected"),1e3!==e.code&&this.scheduleReconnect()},this.ws.onerror=e=>{this.setState("error"),t(e)},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.notifyMessage(t)}catch(Lc){}}}catch(n){this.setState("error"),t(n)}})}disconnect(){this.stopPing(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.ws&&(this.ws.close(1e3,"User disconnect"),this.ws=null),this.setState("disconnected")}send(e,t={}){if(this.ws&&this.ws.readyState===WebSocket.OPEN){const n="cloud"===this.config.mode?{type:e,deviceId:this.config.deviceId,...t}:{type:e,...t};this.ws.send(JSON.stringify(n))}}sendCommand(e,t={}){this.send("command",{cmd:e,...t})}onMessage(e){return this.messageHandlers.add(e),()=>this.messageHandlers.delete(e)}onStateChange(e){return this.stateHandlers.add(e),e(this.state),()=>this.stateHandlers.delete(e)}getState(){return this.state}buildUrl(){if("cloud"===this.config.mode){const e=this.config.cloudUrl||"",t=new URL(e||window.location.href);return t.protocol="https:"===t.protocol?"wss:":"ws:",t.pathname="/ws/client",t.searchParams.set("token",this.config.authToken||""),t.searchParams.set("device",this.config.deviceId||""),t.toString()}const e=this.config.endpoint||"/ws";if("undefined"!=typeof window){return`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}${e}`}return`ws://brewos.local${e}`}setState(e){this.state!==e&&(this.state=e,this.stateHandlers.forEach(t=>t(e)))}notifyMessage(e){this.messageHandlers.forEach(t=>t(e))}scheduleReconnect(){this.reconnectTimer||(this.setState("reconnecting"),this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect().catch(()=>{this.reconnectDelay=Math.min(2*this.reconnectDelay,this.maxReconnectDelay)})},this.reconnectDelay))}startPing(){this.pingInterval=setInterval(()=>{this.send("ping",{timestamp:Date.now()})},3e4)}stopPing(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}}let Dl=null;function Ll(){return Dl}function zl({children:e,className:t}){return m.jsx("div",{className:Ol("card",t),children:e})}function Ul({children:e,className:t,action:n}){return m.jsxs("div",{className:Ol("flex items-center justify-between gap-4 mb-4",t),children:[m.jsx("div",{className:"flex items-center gap-3",children:e}),n&&m.jsx("div",{children:n})]})}function Bl({children:e,icon:t}){return m.jsxs("div",{className:"flex items-center gap-3",children:[t&&m.jsx("span",{className:"text-accent",children:t}),m.jsx("h3",{className:"text-lg font-bold text-coffee-800",children:e})]})}function Fl({value:e,max:t,setpoint:n,label:r,unit:s,icon:a,variant:i="default",showSetpoint:o=!0}){const l=Math.min(100,e/(n||t)*100);return m.jsxs("div",{className:"card",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a&&m.jsx("span",{className:"text-accent",children:a}),m.jsx("span",{className:"font-semibold text-coffee-700",children:r})]}),m.jsxs("div",{className:"flex items-baseline gap-1 mb-3",children:[m.jsx("span",{className:"text-4xl font-bold text-coffee-900 tabular-nums",children:e.toFixed(1)}),m.jsx("span",{className:"text-xl text-coffee-500",children:s})]}),m.jsxs("div",{className:"relative h-3 bg-cream-200 rounded-full overflow-hidden",children:[m.jsx("div",{className:Ol("absolute inset-y-0 left-0 rounded-full transition-all duration-500",{default:"bg-gradient-to-r from-amber-400 to-accent",steam:"bg-gradient-to-r from-blue-400 to-violet-500",pressure:"bg-gradient-to-r from-emerald-400 to-cyan-500"}[i]),style:{width:`${l}%`}}),n&&o&&m.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-coffee-800",style:{left:n/t*100+"%"}})]}),n&&o&&m.jsxs("div",{className:"mt-2 text-sm text-coffee-500",children:["Setpoint: ",m.jsxs("span",{className:"font-semibold text-coffee-700",children:[n.toFixed(1),s]})]})]})}function Wl({children:e,variant:t="default",className:n}){return m.jsx("span",{className:Ol("badge",{default:"bg-cream-200 text-coffee-700",success:"badge-success",warning:"badge-warning",error:"badge-error",info:"badge-info"}[t],n),children:e})}function Hl(){const e=Lt(e=>e.machine),t=Lt(e=>e.temps),n=Lt(e=>e.pressure),r=Lt(e=>e.power),s=Lt(e=>e.water),a=Lt(e=>e.scale),i=Lt(e=>e.stats),o=Lt(e=>e.esp32);return m.jsxs("div",{className:"space-y-6",children:[m.jsx(zl,{children:m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-coffee-900 mb-2",children:"Machine Status"}),m.jsx(Wl,{className:(l=e.state,{unknown:"bg-gray-100 text-gray-700",init:"bg-blue-100 text-blue-700",idle:"bg-cream-200 text-coffee-700",heating:"bg-amber-100 text-amber-700",ready:"bg-emerald-100 text-emerald-700",brewing:"bg-accent/20 text-accent",steaming:"bg-blue-100 text-blue-700",cooldown:"bg-sky-100 text-sky-700",fault:"bg-red-100 text-red-700"}[l]||"bg-gray-100 text-gray-700"),children:Al(e.state)})]}),m.jsx("div",{className:"flex gap-2",children:["standby","on","eco"].map(t=>m.jsxs("button",{onClick:()=>(e=>{var t;null==(t=Ll())||t.sendCommand("set_mode",{mode:e})})(t),className:`\n                  px-4 py-2 rounded-xl text-sm font-semibold transition-all\n                  ${e.mode===t?"bg-coffee-800 text-white shadow-soft":"bg-cream-200 text-coffee-600 hover:bg-cream-300"}\n                `,children:["standby"===t&&m.jsx(go,{className:"w-4 h-4 inline mr-1.5"}),t.charAt(0).toUpperCase()+t.slice(1)]},t))})]})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsx(Fl,{value:t.brew.current,max:t.brew.max,setpoint:t.brew.setpoint,label:"Brew Boiler",unit:"C",icon:m.jsx(no,{className:"w-5 h-5"}),variant:"default"}),m.jsx(Fl,{value:t.steam.current,max:t.steam.max,setpoint:t.steam.setpoint,label:"Steam Boiler",unit:"C",icon:m.jsx(Io,{className:"w-5 h-5"}),variant:"steam"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx(ro,{className:"w-5 h-5"}),children:"Pressure"})}),m.jsxs("div",{className:"flex items-baseline gap-2 mb-4",children:[m.jsx("span",{className:"text-5xl font-bold text-coffee-900 tabular-nums",children:n.toFixed(1)}),m.jsx("span",{className:"text-2xl text-coffee-500",children:"bar"})]}),m.jsxs("div",{className:"relative h-4 bg-cream-200 rounded-full overflow-hidden",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 rounded-full bg-gradient-to-r from-emerald-400 to-cyan-500 transition-all duration-300",style:{width:`${Math.min(100,n/15*100)}%`}}),m.jsx("div",{className:"absolute inset-0 flex justify-between px-1 text-[8px] text-coffee-500",children:[0,5,10,15].map(e=>m.jsx("span",{className:"relative top-5",children:e},e))})]})]}),m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx($o,{className:"w-5 h-5"}),children:"Power"})}),m.jsxs("div",{className:"flex items-baseline gap-2 mb-4",children:[m.jsx("span",{className:"text-5xl font-bold text-coffee-900 tabular-nums",children:Math.round(r.current)}),m.jsx("span",{className:"text-2xl text-coffee-500",children:"W"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-coffee-400",children:"Today"}),m.jsxs("p",{className:"font-semibold text-coffee-700",children:[r.todayKwh.toFixed(1)," kWh"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-coffee-400",children:"Voltage"}),m.jsxs("p",{className:"font-semibold text-coffee-700",children:[r.voltage," V"]})]})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsx(Vl,{icon:m.jsx(Ji,{className:"w-5 h-5"}),label:"Shots Today",value:i.shotsToday.toString()}),m.jsx(Vl,{icon:m.jsx(qi,{className:"w-5 h-5"}),label:"Uptime",value:Rl(o.uptime)}),m.jsx(Vl,{icon:m.jsx(eo,{className:"w-5 h-5"}),label:"Water Tank",value:s.tankLevel.toUpperCase(),status:"ok"===s.tankLevel?"success":"low"===s.tankLevel?"warning":"error"}),m.jsx(Vl,{icon:m.jsx(xo,{className:"w-5 h-5"}),label:"Scale",value:a.connected?`${a.weight.toFixed(1)}g`:"Not connected",status:a.connected?"success":void 0})]})]});var l}function Vl({icon:e,label:t,value:n,status:r}){return m.jsxs(zl,{className:"flex flex-col items-center text-center p-4",children:[m.jsx("span",{className:"text-accent mb-2",children:e}),m.jsx("span",{className:`text-lg font-bold ${r?{success:"text-emerald-600",warning:"text-amber-600",error:"text-red-600"}[r]:"text-coffee-900"}`,children:n}),m.jsx("span",{className:"text-xs text-coffee-500",children:t})]})}const ql=g.forwardRef(({label:e,hint:t,error:n,unit:r,className:s,...a},i)=>m.jsxs("div",{className:"space-y-1.5",children:[e&&m.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider text-coffee-500",children:e}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{ref:i,className:Ol("input",r&&"pr-12",n&&"border-red-400 focus:border-red-500",s),...a}),r&&m.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm font-medium text-coffee-400",children:r})]}),t&&!n&&m.jsx("p",{className:"text-xs text-coffee-400",children:t}),n&&m.jsx("p",{className:"text-xs text-red-600",children:n})]}));ql.displayName="Input";const Kl=g.forwardRef(({className:e,variant:t="primary",size:n="md",loading:r,children:s,disabled:a,...i},o)=>m.jsxs("button",{ref:o,disabled:a||r,className:Ol("btn",{primary:"btn-primary",secondary:"btn-secondary",accent:"btn-accent",ghost:"btn-ghost",danger:"bg-red-600 text-white hover:bg-red-700"}[t],{sm:"px-3 py-1.5 text-xs",md:"px-5 py-2.5 text-sm",lg:"px-6 py-3 text-base"}[n],e),...i,children:[r&&m.jsx(ho,{className:"w-4 h-4 animate-spin"}),s]}));function Gl({checked:e,onChange:t,disabled:n,label:r}){return m.jsxs("label",{className:Ol("inline-flex items-center gap-3 cursor-pointer",n&&"opacity-50 cursor-not-allowed"),children:[m.jsx("button",{type:"button",role:"switch","aria-checked":e,disabled:n,onClick:()=>!n&&t(!e),className:Ol("relative inline-flex h-6 w-11 shrink-0 rounded-full transition-colors duration-200",e?"bg-accent":"bg-cream-300"),children:m.jsx("span",{className:Ol("pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow-md transform transition-transform duration-200 mt-0.5",e?"translate-x-5":"translate-x-0.5")})}),r&&m.jsx("span",{className:"text-sm font-medium text-coffee-700",children:r})]})}function Jl(){const e=Lt(e=>e.bbw),t=Lt(e=>e.shot),n=Lt(e=>e.scale),[r,s]=g.useState(e),[a,i]=g.useState(0);g.useEffect(()=>{s(e)},[e]),g.useEffect(()=>{let e;return t.active&&(e=setInterval(()=>{i(Date.now()-t.startTime)},100)),()=>clearInterval(e)},[t.active,t.startTime]);const o=r.doseWeight>0?(r.targetWeight/r.doseWeight).toFixed(1):"0.0";return m.jsxs("div",{className:"space-y-6",children:[t.active&&m.jsxs(zl,{className:"bg-gradient-to-br from-accent/10 to-coffee-800/10 border-accent/30",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-bold text-coffee-900",children:"Active Shot"}),m.jsx("span",{className:"text-3xl font-mono font-bold text-coffee-900",children:Pl(a)})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-4",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-4xl font-bold text-coffee-900 tabular-nums",children:t.weight.toFixed(1)}),m.jsx("div",{className:"text-sm text-coffee-500",children:"grams"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-4xl font-bold text-coffee-900 tabular-nums",children:t.flowRate.toFixed(1)}),m.jsx("div",{className:"text-sm text-coffee-500",children:"g/s flow"})]})]}),m.jsx("div",{className:"relative h-3 bg-cream-200 rounded-full overflow-hidden",children:m.jsx("div",{className:"absolute inset-y-0 left-0 rounded-full bg-gradient-to-r from-amber-400 to-accent transition-all duration-200",style:{width:`${Math.min(100,t.weight/e.targetWeight*100)}%`}})}),m.jsxs("p",{className:"text-sm text-coffee-500 mt-2",children:["Target: ",e.targetWeight,"g"]})]}),m.jsxs(zl,{children:[m.jsx(Ul,{action:m.jsx(Gl,{checked:r.enabled,onChange:e=>s({...r,enabled:e}),label:"Enable"}),children:m.jsx(Bl,{icon:m.jsx(Ji,{className:"w-5 h-5"}),children:"Brew-by-Weight"})}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[m.jsx(ql,{label:"Dose Weight",type:"number",min:10,max:30,step:.1,value:r.doseWeight,onChange:e=>s({...r,doseWeight:parseFloat(e.target.value)||0}),unit:"g",hint:"Coffee grounds"}),m.jsx(ql,{label:"Target Weight",type:"number",min:20,max:80,step:.1,value:r.targetWeight,onChange:e=>s({...r,targetWeight:parseFloat(e.target.value)||0}),unit:"g",hint:"Desired output"}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider text-coffee-500",children:"Ratio"}),m.jsxs("div",{className:"h-[50px] flex items-center justify-center text-2xl font-bold text-coffee-900",children:["1:",o]})]}),m.jsx(ql,{label:"Stop Offset",type:"number",min:0,max:10,step:.5,value:r.stopOffset,onChange:e=>s({...r,stopOffset:parseFloat(e.target.value)||0}),unit:"g",hint:"For drip"})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:r.autoTare,onChange:e=>s({...r,autoTare:e.target.checked}),className:"w-4 h-4 rounded border-cream-300 text-accent focus:ring-accent"}),m.jsx("span",{className:"text-sm text-coffee-700",children:"Auto-tare when portafilter placed"})]}),m.jsx(Kl,{onClick:()=>{var e;null==(e=Ll())||e.sendCommand("set_bbw",{...r})},children:"Save Settings"})]})]}),m.jsxs(zl,{children:[m.jsx(Ul,{action:m.jsx(Wl,{variant:n.connected?"success":"error",children:n.connected?n.name||"Connected":"Not connected"}),children:m.jsx(Bl,{icon:m.jsx(xo,{className:"w-5 h-5"}),children:"Scale"})}),n.connected?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[m.jsxs("div",{className:"text-center p-4 bg-cream-100 rounded-xl",children:[m.jsx(Zi,{className:"w-6 h-6 text-accent mx-auto mb-2"}),m.jsx("div",{className:"text-3xl font-bold text-coffee-900 tabular-nums",children:n.weight.toFixed(1)}),m.jsx("div",{className:"text-sm text-coffee-500",children:"grams"})]}),m.jsxs("div",{className:"text-center p-4 bg-cream-100 rounded-xl",children:[m.jsx(Co,{className:"w-6 h-6 text-accent mx-auto mb-2"}),m.jsx("div",{className:"text-3xl font-bold text-coffee-900 tabular-nums",children:n.flowRate.toFixed(1)}),m.jsx("div",{className:"text-sm text-coffee-500",children:"g/s flow"})]})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(Kl,{variant:"secondary",onClick:()=>{var e;null==(e=Ll())||e.sendCommand("tare")},children:"Tare"}),m.jsx(Kl,{variant:"ghost",onClick:()=>{var e;return null==(e=Ll())?void 0:e.sendCommand("scale_reset")},children:"Reset"})]})]}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx(xo,{className:"w-12 h-12 text-coffee-300 mx-auto mb-3"}),m.jsx("p",{className:"text-coffee-500",children:"No scale connected"}),m.jsx(Kl,{variant:"secondary",className:"mt-4",onClick:()=>window.location.href="/scale",children:"Go to Scale Settings"})]})]})]})}function Ql(){const e=Lt(e=>e.scale),t=Lt(e=>e.scaleScanning),n=Lt(e=>e.scanResults),r=Lt(e=>e.setScaleScanning),s=Lt(e=>e.clearScanResults);return m.jsxs("div",{className:"space-y-6",children:[e.connected&&m.jsxs(zl,{className:"bg-gradient-to-br from-emerald-50 to-cream-100 border-emerald-200",children:[m.jsx(Ul,{action:m.jsxs(Wl,{variant:"success",children:[m.jsx(Hi,{className:"w-3 h-3"}),"Connected"]}),children:m.jsx(Bl,{icon:m.jsx(xo,{className:"w-5 h-5 text-emerald-600"}),children:e.name||"BLE Scale"})}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[m.jsx(Yl,{label:"Type",value:e.type||"Unknown"}),m.jsx(Yl,{label:"Weight",value:`${e.weight.toFixed(1)} g`,highlight:!0}),m.jsx(Yl,{label:"Flow Rate",value:`${e.flowRate.toFixed(1)} g/s`}),m.jsx(Yl,{label:"Battery",value:e.battery>0?`${e.battery}%`:"N/A",icon:m.jsx(Fi,{className:"w-4 h-4"})})]}),m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("span",{className:"text-sm text-coffee-500",children:"Status:"}),m.jsx(Wl,{variant:e.stable?"success":"warning",children:e.stable?"Stable":"Unstable"})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(Kl,{variant:"secondary",onClick:()=>{var e;null==(e=Ll())||e.sendCommand("tare")},children:"Tare"}),m.jsxs(Kl,{variant:"ghost",onClick:()=>{var e;null==(e=Ll())||e.sendCommand("scale_disconnect")},children:[m.jsx(Ao,{className:"w-4 h-4"}),"Disconnect"]})]})]}),!e.connected&&m.jsx(zl,{children:m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"w-20 h-20 bg-cream-200 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(xo,{className:"w-10 h-10 text-coffee-400"})}),m.jsx("h2",{className:"text-xl font-bold text-coffee-900 mb-2",children:"No Scale Connected"}),m.jsx("p",{className:"text-coffee-500 mb-6",children:"Search for nearby Bluetooth scales to pair with your BrewOS device."}),t?m.jsxs(Kl,{variant:"secondary",onClick:()=>{var e;r(!1),null==(e=Ll())||e.sendCommand("scale_scan_stop")},children:[m.jsx(Ao,{className:"w-4 h-4"}),"Stop Scanning"]}):m.jsxs(Kl,{onClick:()=>{var e;s(),r(!0),null==(e=Ll())||e.sendCommand("scale_scan")},children:[m.jsx(Wi,{className:"w-4 h-4"}),"Scan for Scales"]})]})}),(t||n.length>0)&&m.jsxs(zl,{children:[m.jsxs(Ul,{children:[m.jsx(Bl,{icon:m.jsx(Wi,{className:"w-5 h-5"}),children:t?"Scanning...":"Available Scales"}),t&&m.jsx(ho,{className:"w-5 h-5 animate-spin text-accent"})]}),n.length>0?m.jsx("div",{className:"space-y-2",children:n.map(e=>m.jsxs("div",{className:"flex items-center justify-between p-4 bg-cream-100 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-cream-200 rounded-full flex items-center justify-center",children:m.jsx(xo,{className:"w-5 h-5 text-coffee-500"})}),m.jsxs("div",{children:[m.jsx("div",{className:"font-semibold text-coffee-900",children:e.name||"Unknown Scale"}),m.jsxs("div",{className:"text-xs text-coffee-400 flex items-center gap-2",children:[m.jsx(So,{className:"w-3 h-3"}),e.rssi," dBm",e.type&&m.jsx(Wl,{variant:"info",className:"ml-2",children:e.type})]})]})]}),m.jsx(Kl,{size:"sm",onClick:()=>{return t=e.address,null==(n=Ll())||n.sendCommand("scale_connect",{address:t}),void r(!1);var t,n},children:"Connect"})]},e.address))}):t?m.jsxs("div",{className:"flex items-center justify-center gap-3 py-8 text-coffee-500",children:[m.jsx(ho,{className:"w-5 h-5 animate-spin"}),m.jsx("span",{children:"Searching for scales..."})]}):m.jsx("p",{className:"text-center text-coffee-500 py-8",children:"No scales found. Make sure your scale is powered on and in pairing mode."})]}),m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{children:"Supported Scales"})}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[{brand:"Acaia",models:"Lunar, Pearl, Pyxis"},{brand:"Decent",models:"DE1 Scale"},{brand:"Felicita",models:"Arc, Incline, Parallel"},{brand:"Timemore",models:"Black Mirror 2"},{brand:"Bookoo",models:"Themis"},{brand:"Generic",models:"BT Weight Scale Service"}].map(e=>m.jsxs("div",{className:"p-4 bg-cream-100 rounded-xl",children:[m.jsx("div",{className:"font-semibold text-coffee-800",children:e.brand}),m.jsx("div",{className:"text-sm text-coffee-500",children:e.models})]},e.brand))})]})]})}function Yl({label:e,value:t,highlight:n,icon:r}){return m.jsxs("div",{className:"p-3 bg-white/60 rounded-xl",children:[m.jsx("div",{className:"text-xs text-coffee-500 mb-1",children:e}),m.jsxs("div",{className:`flex items-center gap-1.5 ${n?"text-xl font-bold":"font-semibold"} text-coffee-900`,children:[r,t]})]})}function Xl(){const e=Lt(e=>e.device),t=Lt(e=>e.temps),n=Lt(e=>e.power),r=Lt(e=>e.wifi),s=Lt(e=>e.mqtt),[a,i]=g.useState(e.deviceName),[o,l]=g.useState(!1);g.useEffect(()=>{i(e.deviceName)},[e.deviceName]);const[c,u]=g.useState(t.brew.setpoint),[d,h]=g.useState(t.steam.setpoint),[f,p]=g.useState(n.voltage),[v,y]=g.useState(13),[b,w]=g.useState({enabled:s.enabled,broker:s.broker||"",port:1883,username:"",password:"",discovery:!0}),[x,k]=g.useState({brewTemp:80,timeout:30}),[_,S]=g.useState(!1);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx(Ji,{className:"w-5 h-5"}),children:"Machine"})}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[m.jsx("div",{className:"flex-1",children:m.jsx(ql,{label:"Machine Name",placeholder:"Kitchen Espresso",value:a,onChange:e=>i(e.target.value),hint:"Give your machine a friendly name"})}),m.jsx("div",{className:"flex items-end",children:m.jsxs(Kl,{onClick:async()=>{var e;a.trim()&&(l(!0),null==(e=Ll())||e.sendCommand("set_device_name",{name:a.trim()}),setTimeout(()=>l(!1),500))},loading:o,disabled:a===e.deviceName,children:[m.jsx(wo,{className:"w-4 h-4"}),"Save"]})})]}),e.deviceId&&m.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[m.jsx(Zl,{label:"Device ID",value:e.deviceId,mono:!0}),m.jsx(Zl,{label:"Machine Type",value:e.machineType||"Not set"})]})]})]}),m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx(No,{className:"w-5 h-5"}),children:"Temperature"})}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[m.jsx(ql,{label:"Brew Temperature",type:"number",min:80,max:105,step:.5,value:c,onChange:e=>u(parseFloat(e.target.value)),unit:"C",hint:"Recommended: 92-96C"}),m.jsx(ql,{label:"Steam Temperature",type:"number",min:120,max:160,step:1,value:d,onChange:e=>h(parseFloat(e.target.value)),unit:"C",hint:"For milk frothing"})]}),m.jsx(Kl,{onClick:()=>{var e,t;null==(e=Ll())||e.sendCommand("set_temp",{boiler:"brew",temp:c}),null==(t=Ll())||t.sendCommand("set_temp",{boiler:"steam",temp:d})},children:"Save Temperatures"})]}),m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx($o,{className:"w-5 h-5"}),children:"Power"})}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider text-coffee-500",children:"Mains Voltage"}),m.jsxs("select",{value:f,onChange:e=>p(parseInt(e.target.value)),className:"input",children:[m.jsx("option",{value:"110",children:"110V (US)"}),m.jsx("option",{value:"220",children:"220V (EU/AU)"}),m.jsx("option",{value:"240",children:"240V (UK)"})]})]}),m.jsx(ql,{label:"Max Current",type:"number",min:5,max:20,step:.5,value:v,onChange:e=>y(parseFloat(e.target.value)),unit:"A",hint:"Limit for your circuit"})]}),m.jsx(Kl,{onClick:()=>{var e;null==(e=Ll())||e.sendCommand("set_power",{voltage:f,maxCurrent:v})},children:"Save Power Settings"})]}),m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx(Po,{className:"w-5 h-5"}),children:"WiFi"})}),m.jsxs("div",{className:"space-y-3 mb-6",children:[m.jsx(Zl,{label:"Status",value:m.jsx(Wl,{variant:r.connected?"success":r.apMode?"warning":"error",children:r.connected?"Connected":r.apMode?"AP Mode":"Disconnected"})}),m.jsx(Zl,{label:"Network",value:r.ssid||""}),m.jsx(Zl,{label:"IP Address",value:r.ip||"",mono:!0}),m.jsx(Zl,{label:"Signal",value:r.rssi?`${r.rssi} dBm`:""})]}),m.jsxs(Kl,{variant:"ghost",onClick:()=>{var e;confirm("Are you sure? The device will restart in AP mode.")&&(null==(e=Ll())||e.sendCommand("wifi_forget"))},children:[m.jsx(Ao,{className:"w-4 h-4"}),"Forget Network"]})]}),m.jsxs(zl,{children:[m.jsx(Ul,{action:m.jsx(Gl,{checked:b.enabled,onChange:e=>w({...b,enabled:e})}),children:m.jsx(Bl,{icon:m.jsx(yo,{className:"w-5 h-5"}),children:"MQTT / Home Assistant"})}),m.jsxs("div",{className:"space-y-4 mb-6",children:[m.jsx(ql,{label:"Broker Address",placeholder:"homeassistant.local",value:b.broker,onChange:e=>w({...b,broker:e.target.value})}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[m.jsx(ql,{label:"Port",type:"number",value:b.port,onChange:e=>w({...b,port:parseInt(e.target.value)})}),m.jsx(ql,{label:"Username",placeholder:"Optional",value:b.username,onChange:e=>w({...b,username:e.target.value})}),m.jsx(ql,{label:"Password",type:"password",placeholder:"Optional",value:b.password,onChange:e=>w({...b,password:e.target.value})})]}),m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:b.discovery,onChange:e=>w({...b,discovery:e.target.checked}),className:"w-4 h-4 rounded border-cream-300 text-accent focus:ring-accent"}),m.jsx("span",{className:"text-sm text-coffee-700",children:"Enable Home Assistant auto-discovery"})]}),m.jsxs("div",{className:"flex items-center gap-2 p-3 bg-cream-100 rounded-xl",children:[s.connected?m.jsx(Hi,{className:"w-4 h-4 text-emerald-600"}):s.enabled?m.jsx(Ao,{className:"w-4 h-4 text-red-500"}):m.jsx("div",{className:"w-4 h-4 rounded-full bg-cream-300"}),m.jsx("span",{className:"text-sm text-coffee-700",children:s.connected?"Connected to broker":s.enabled?"Disconnected":"Disabled"})]})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(Kl,{variant:"secondary",onClick:async()=>{var e;S(!0),null==(e=Ll())||e.sendCommand("mqtt_test",b),setTimeout(()=>S(!1),3e3)},loading:_,children:_?"Testing...":"Test Connection"}),m.jsx(Kl,{onClick:()=>{var e;null==(e=Ll())||e.sendCommand("mqtt_config",b)},children:"Save MQTT Settings"})]})]}),m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx(uo,{className:"w-5 h-5"}),children:"Eco Mode"})}),m.jsx("p",{className:"text-sm text-coffee-500 mb-4",children:"Reduce power consumption when idle by lowering boiler temperatures."}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[m.jsx(ql,{label:"Eco Brew Temp",type:"number",min:60,max:90,value:x.brewTemp,onChange:e=>k({...x,brewTemp:parseFloat(e.target.value)}),unit:"C"}),m.jsx(ql,{label:"Auto-Eco After",type:"number",min:5,max:120,step:5,value:x.timeout,onChange:e=>k({...x,timeout:parseInt(e.target.value)}),unit:"min"})]}),m.jsx(Kl,{onClick:()=>{var e;null==(e=Ll())||e.sendCommand("set_eco",x)},children:"Save Eco Settings"})]})]})}function Zl({label:e,value:t,mono:n}){return m.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-cream-200 last:border-0",children:[m.jsx("span",{className:"text-sm text-coffee-500",children:e}),m.jsx("span",{className:"text-sm font-medium text-coffee-900 "+(n?"font-mono":""),children:t})]})}Kl.displayName="Button";var ec,tc,nc=Object.defineProperty,rc=Object.getOwnPropertySymbols,sc=Object.prototype.hasOwnProperty,ac=Object.prototype.propertyIsEnumerable,ic=(e,t,n)=>t in e?nc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oc=(e,t)=>{for(var n in t||(t={}))sc.call(t,n)&&ic(e,n,t[n]);if(rc)for(var n of rc(t))ac.call(t,n)&&ic(e,n,t[n]);return e},lc=(e,t)=>{var n={};for(var r in e)sc.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&rc)for(var r of rc(e))t.indexOf(r)<0&&ac.call(e,r)&&(n[r]=e[r]);return n};(e=>{const t=class t{constructor(e,n,r,a){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(a<-1||a>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let t=0;t<this.size;t++)i.push(!1);for(let t=0;t<this.size;t++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const o=this.addEccAndInterleave(r);if(this.drawCodewords(o),-1==a){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(a=t,e=n),this.applyMask(t)}}s(0<=a&&a<=7),this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}static encodeText(n,r){const s=e.QrSegment.makeSegments(n);return t.encodeSegments(s,r)}static encodeBinary(n,r){const s=e.QrSegment.makeBytes(n);return t.encodeSegments([s],r)}static encodeSegments(e,r,a=1,o=40,l=-1,c=!0){if(!(t.MIN_VERSION<=a&&a<=o&&o<=t.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");let u,d;for(u=a;;u++){const n=8*t.getNumDataCodewords(u,r),s=i.getTotalBits(e,u);if(s<=n){d=s;break}if(u>=o)throw new RangeError("Data too long")}for(const n of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])c&&d<=8*t.getNumDataCodewords(u,n)&&(r=n);let h=[];for(const t of e){n(t.mode.modeBits,4,h),n(t.numChars,t.mode.numCharCountBits(u),h);for(const e of t.getData())h.push(e)}s(h.length==d);const f=8*t.getNumDataCodewords(u,r);s(h.length<=f),n(0,Math.min(4,f-h.length),h),n(0,(8-h.length%8)%8,h),s(h.length%8==0);for(let t=236;h.length<f;t^=253)n(t,8,h);let p=[];for(;8*p.length<h.length;)p.push(0);return h.forEach((e,t)=>p[t>>>3]|=e<<7-(7&t)),new t(u,r,p,l)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)0==n&&0==r||0==n&&r==t-1||n==t-1&&0==r||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let r=0;r<10;r++)n=n<<1^1335*(n>>>9);const a=21522^(t<<10|n);s(a>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,r(a,s));this.setFunctionModule(8,7,r(a,6)),this.setFunctionModule(8,8,r(a,7)),this.setFunctionModule(7,8,r(a,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,r(a,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,r(a,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,r(a,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;s(t>>>18==0);for(let n=0;n<18;n++){const e=r(t,n),s=this.size-11+n%3,a=Math.floor(n/3);this.setFunctionModule(s,a,e),this.setFunctionModule(a,s,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const s=Math.max(Math.abs(r),Math.abs(n)),a=e+r,i=t+n;0<=a&&a<this.size&&0<=i&&i<this.size&&this.setFunctionModule(a,i,2!=s&&4!=s)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,r))throw new RangeError("Invalid argument");const a=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],i=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],o=Math.floor(t.getNumRawDataModules(n)/8),l=a-o%a,c=Math.floor(o/a);let u=[];const d=t.reedSolomonComputeDivisor(i);for(let s=0,f=0;s<a;s++){let n=e.slice(f,f+c-i+(s<l?0:1));f+=n.length;const r=t.reedSolomonComputeRemainder(n,d);s<l&&n.push(0),u.push(n.concat(r))}let h=[];for(let t=0;t<u[0].length;t++)u.forEach((e,n)=>{(t!=c-i||n>=l)&&h.push(e[t])});return s(h.length==o),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let s=0;s<this.size;s++)for(let a=0;a<2;a++){const i=t-a,o=!(t+1&2)?this.size-1-s:s;!this.isFunction[o][i]&&n<8*e.length&&(this.modules[o][i]=r(e[n>>>3],7-(7&n)),n++)}}s(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let n=!1,r=0,a=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[s][i]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,a),n||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),n=this.modules[s][i],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,a)*t.PENALTY_N3}for(let s=0;s<this.size;s++){let n=!1,r=0,a=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][s]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,a),n||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),n=this.modules[i][s],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,a)*t.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let n=0;n<this.size-1;n++){const r=this.modules[s][n];r==this.modules[s][n+1]&&r==this.modules[s+1][n]&&r==this.modules[s+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce((e,t)=>e+(t?1:0),n);const r=this.size*this.size,a=Math.ceil(Math.abs(20*n-10*r)/r)-1;return s(0<=a&&a<=9),e+=a*t.PENALTY_N4,s(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return s(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let r=1;for(let s=0;s<e;s++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],r),e+1<n.length&&(n[e]^=n[e+1]);r=t.reedSolomonMultiply(r,2)}return n}static reedSolomonComputeRemainder(e,n){let r=n.map(e=>0);for(const s of e){const e=s^r.shift();r.push(0),n.forEach((n,s)=>r[s]^=t.reedSolomonMultiply(n,e))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;return s(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];s(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function n(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function r(e,t){return!!(e>>>t&1)}function s(e){if(!e)throw new Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;const a=class e{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(t){let r=[];for(const e of t)n(e,8,r);return new e(e.Mode.BYTE,t.length,r)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let r=[];for(let e=0;e<t.length;){const s=Math.min(t.length-e,3);n(parseInt(t.substring(e,e+s),10),3*s+1,r),e+=s}return new e(e.Mode.NUMERIC,t.length,r)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let r,s=[];for(r=0;r+2<=t.length;r+=2){let a=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r));a+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r+1)),n(a,11,s)}return r<t.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r)),6,s),new e(e.Mode.ALPHANUMERIC,t.length,s)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let r=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)n(t,8,r);else if(t<16384)n(2,2,r),n(t,14,r);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,r),n(t,21,r)}return new e(e.Mode.ECI,0,r)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;n+=4+e+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substring(n+1,n+3),16)),n+=2);return t}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let i=a;e.QrSegment=a})(ec||(ec={})),(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})((tc=ec||(ec={})).QrCode||(tc.QrCode={})),(e=>{(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(e.QrSegment||(e.QrSegment={}))})(ec||(ec={}));var cc=ec,uc={L:cc.QrCode.Ecc.LOW,M:cc.QrCode.Ecc.MEDIUM,Q:cc.QrCode.Ecc.QUARTILE,H:cc.QrCode.Ecc.HIGH},dc=128,hc="L",fc="#FFFFFF",pc="#000000",mc=!1,gc=1;
/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */function vc(e,t=0){const n=[];return e.forEach(function(e,r){let s=null;e.forEach(function(a,i){if(!a&&null!==s)return n.push(`M${s+t} ${r+t}h${i-s}v1H${s+t}z`),void(s=null);if(i!==e.length-1)a&&null===s&&(s=i);else{if(!a)return;null===s?n.push(`M${i+t},${r+t} h1v1H${i+t}z`):n.push(`M${s+t},${r+t} h${i+1-s}v1H${s+t}z`)}})}),n.join("")}function yc(e,t){return e.slice().map((e,n)=>n<t.y||n>=t.y+t.h?e:e.map((e,n)=>(n<t.x||n>=t.x+t.w)&&e))}function bc({value:e,level:t,minVersion:n,includeMargin:r,marginSize:s,imageSettings:a,size:i,boostLevel:o}){let l=v.useMemo(()=>{const r=(Array.isArray(e)?e:[e]).reduce((e,t)=>(e.push(...cc.QrSegment.makeSegments(t)),e),[]);return cc.QrCode.encodeSegments(r,uc[t],n,void 0,void 0,o)},[e,t,n,o]);const{cells:c,margin:u,numCells:d,calculatedImageSettings:h}=v.useMemo(()=>{let e=l.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(r,s),n=e.length+2*t,o=function(e,t,n,r){if(null==r)return null;const s=e.length+2*n,a=Math.floor(.1*t),i=s/t,o=(r.width||a)*i,l=(r.height||a)*i,c=null==r.x?e.length/2-o/2:r.x*i,u=null==r.y?e.length/2-l/2:r.y*i,d=null==r.opacity?1:r.opacity;let h=null;if(r.excavate){let e=Math.floor(c),t=Math.floor(u);h={x:e,y:t,w:Math.ceil(o+c-e),h:Math.ceil(l+u-t)}}return{x:c,y:u,h:l,w:o,excavation:h,opacity:d,crossOrigin:r.crossOrigin}}(e,i,t,a);return{cells:e,margin:t,numCells:n,calculatedImageSettings:o}},[l,i,a,r,s]);return{qrcode:l,margin:u,cells:c,numCells:d,calculatedImageSettings:h}}var wc=function(){try{(new Path2D).addPath(new Path2D)}catch(Lc){return!1}return!0}();v.forwardRef(function(e,t){const n=e,{value:r,size:s=dc,level:a=hc,bgColor:i=fc,fgColor:o=pc,includeMargin:l=mc,minVersion:c=gc,boostLevel:u,marginSize:d,imageSettings:h}=n,f=lc(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:p}=f,m=lc(f,["style"]),g=null==h?void 0:h.src,y=v.useRef(null),b=v.useRef(null),w=v.useCallback(e=>{y.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[t]),[x,k]=v.useState(!1),{margin:_,cells:S,numCells:j,calculatedImageSettings:E}=bc({value:r,level:a,minVersion:c,boostLevel:u,includeMargin:l,marginSize:d,imageSettings:h,size:s});v.useEffect(()=>{if(null!=y.current){const e=y.current,t=e.getContext("2d");if(!t)return;let n=S;const r=b.current,a=null!=E&&null!==r&&r.complete&&0!==r.naturalHeight&&0!==r.naturalWidth;a&&null!=E.excavation&&(n=yc(S,E.excavation));const l=window.devicePixelRatio||1;e.height=e.width=s*l;const c=s/j*l;t.scale(c,c),t.fillStyle=i,t.fillRect(0,0,j,j),t.fillStyle=o,wc?t.fill(new Path2D(vc(n,_))):S.forEach(function(e,n){e.forEach(function(e,r){e&&t.fillRect(r+_,n+_,1,1)})}),E&&(t.globalAlpha=E.opacity),a&&t.drawImage(r,E.x+_,E.y+_,E.w,E.h)}}),v.useEffect(()=>{k(!1)},[g]);const N=oc({height:s,width:s},p);let C=null;return null!=g&&(C=v.createElement("img",{src:g,key:g,style:{display:"none"},onLoad:()=>{k(!0)},ref:b,crossOrigin:null==E?void 0:E.crossOrigin})),v.createElement(v.Fragment,null,v.createElement("canvas",oc({style:N,height:s,width:s,ref:w,role:"img"},m)),C)}).displayName="QRCodeCanvas";var xc=v.forwardRef(function(e,t){const n=e,{value:r,size:s=dc,level:a=hc,bgColor:i=fc,fgColor:o=pc,includeMargin:l=mc,minVersion:c=gc,boostLevel:u,title:d,marginSize:h,imageSettings:f}=n,p=lc(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:m,cells:g,numCells:y,calculatedImageSettings:b}=bc({value:r,level:a,minVersion:c,boostLevel:u,includeMargin:l,marginSize:h,imageSettings:f,size:s});let w=g,x=null;null!=f&&null!=b&&(null!=b.excavation&&(w=yc(g,b.excavation)),x=v.createElement("image",{href:f.src,height:b.h,width:b.w,x:b.x+m,y:b.y+m,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const k=vc(w,m);return v.createElement("svg",oc({height:s,width:s,viewBox:`0 0 ${y} ${y}`,ref:t,role:"img"},p),!!d&&v.createElement("title",null,d),v.createElement("path",{fill:i,d:`M0,0 h${y}v${y}H0z`,shapeRendering:"crispEdges"}),v.createElement("path",{fill:o,d:k,shapeRendering:"crispEdges"}),x)});function kc({url:e,deviceId:t,expiresIn:n,onRefresh:r,loading:s}){const[a,i]=g.useState(!1),[o,l]=g.useState(n);g.useEffect(()=>{l(n);const e=setInterval(()=>{l(e=>Math.max(0,e-1))},1e3);return()=>clearInterval(e)},[n]);const c=o<=0;return m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{children:"Pair Device"})}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-sm text-coffee-500 mb-4",children:"Scan this QR code with your phone to add this device to your account."}),m.jsx("div",{className:"inline-block p-4 bg-white rounded-xl "+(c?"opacity-50":""),children:m.jsx(xc,{value:e,size:200,level:"M",includeMargin:!0,bgColor:"#ffffff",fgColor:"#1a1a1a"})}),m.jsxs("div",{className:"mt-4 space-y-2",children:[m.jsx("p",{className:"text-sm font-mono text-coffee-600",children:t}),c?m.jsx("p",{className:"text-sm text-red-600",children:"Code expired"}):m.jsxs("p",{className:"text-sm text-coffee-400",children:["Expires in ",(u=o,`${Math.floor(u/60)}:${(u%60).toString().padStart(2,"0")}`)]})]}),m.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[m.jsxs(Kl,{variant:"secondary",size:"sm",onClick:async()=>{try{await navigator.clipboard.writeText(e),i(!0),setTimeout(()=>i(!1),2e3)}catch{}},disabled:c,children:[a?m.jsx(Hi,{className:"w-4 h-4"}):m.jsx(Qi,{className:"w-4 h-4"}),a?"Copied!":"Copy Link"]}),m.jsxs(Kl,{variant:"secondary",size:"sm",onClick:r,loading:s,children:[m.jsx(bo,{className:"w-4 h-4"}),"Refresh"]})]})]})]});var u}function _c(){const e=Lt(e=>e.esp32),t=Lt(e=>e.pico),n=Lt(e=>e.stats),r=Lt(e=>e.logs),s=Lt(e=>e.clearLogs),[a,i]=g.useState(!1),[o,l]=g.useState(null),[c,u]=g.useState(null),[d,h]=g.useState(!1);g.useEffect(()=>{(async()=>{h(!0);try{const e=await fetch("/api/pairing/qr");if(e.ok){const t=await e.json();u(t)}}catch{}h(!1)})()},[]);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs(zl,{children:[m.jsxs(Ul,{children:[m.jsx(Bl,{icon:m.jsx(Yi,{className:"w-5 h-5"}),children:"ESP32-S3"}),m.jsx(Wl,{variant:"success",children:"Online"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx(Sc,{label:"Firmware",value:e.version||"Unknown"}),m.jsx(Sc,{label:"Uptime",value:Rl(e.uptime)}),m.jsx(Sc,{label:"Free Heap",value:Il(e.freeHeap)})]})]}),m.jsxs(zl,{children:[m.jsxs(Ul,{children:[m.jsx(Bl,{icon:m.jsx(ao,{className:"w-5 h-5"}),children:"Raspberry Pi Pico"}),m.jsx(Wl,{variant:t.connected?"success":"error",children:t.connected?"Connected":"Disconnected"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx(Sc,{label:"Firmware",value:t.version||"Unknown"}),m.jsx(Sc,{label:"Uptime",value:Rl(t.uptime)}),m.jsx(Sc,{label:"Status",value:t.connected?"Communicating":"No response"})]})]})]}),c&&m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx(Ki,{className:"w-5 h-5"}),children:"Cloud Access"})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-coffee-600 mb-4",children:"Link this device to your BrewOS cloud account to control it from anywhere. Scan the QR code with your phone or open the link in a browser."}),m.jsx("div",{className:"bg-cream-100 rounded-xl p-4",children:m.jsx(Sc,{label:"Device ID",value:c.deviceId})})]}),m.jsx(kc,{url:c.url,deviceId:c.deviceId,expiresIn:c.expiresIn,onRefresh:async()=>{h(!0);try{const e=await fetch("/api/pairing/refresh",{method:"POST"});if(e.ok){const t=await e.json();u(t)}}catch{}h(!1)},loading:d})]})]}),m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx(Xi,{className:"w-5 h-5"}),children:"Firmware Update"})}),m.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"text-sm text-coffee-700 mb-1",children:["Current version: ",m.jsx("span",{className:"font-mono font-semibold",children:e.version||"Unknown"})]}),o?m.jsxs("p",{className:"text-sm text-emerald-600",children:[m.jsx(Hi,{className:"w-4 h-4 inline mr-1"}),"Update available: ",o]}):m.jsx("p",{className:"text-sm text-coffee-500",children:"Check for the latest firmware updates."})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs(Kl,{variant:"secondary",onClick:async()=>{var e;i(!0),null==(e=Ll())||e.sendCommand("check_update"),setTimeout(()=>{i(!1),l(null)},2e3)},loading:a,children:[m.jsx(bo,{className:"w-4 h-4"}),"Check for Updates"]}),o&&m.jsxs(Kl,{onClick:()=>{var e;confirm("Start firmware update? The device will restart after update.")&&(null==(e=Ll())||e.sendCommand("ota_start"))},children:[m.jsx(Xi,{className:"w-4 h-4"}),"Install Update"]})]})]})]}),m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx(qi,{className:"w-5 h-5"}),children:"Statistics"})}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[m.jsx(jc,{label:"Total Shots",value:n.totalShots}),m.jsx(jc,{label:"Today",value:n.shotsToday}),m.jsx(jc,{label:"Since Cleaning",value:n.shotsSinceCleaning,warning:n.shotsSinceCleaning>100}),m.jsx(jc,{label:"Last Cleaning",value:n.lastCleaning?new Date(n.lastCleaning).toLocaleDateString():"Never"})]})]}),m.jsxs(zl,{children:[m.jsx(Ul,{action:m.jsxs(Kl,{variant:"ghost",size:"sm",onClick:s,children:[m.jsx(To,{className:"w-4 h-4"}),"Clear"]}),children:m.jsx(Bl,{icon:m.jsx(Eo,{className:"w-5 h-5"}),children:"System Logs"})}),m.jsx("div",{className:"max-h-64 overflow-y-auto bg-coffee-900 rounded-xl p-4 font-mono text-xs",children:r.length>0?r.map(e=>m.jsxs("div",{className:"py-1 border-b border-coffee-800 last:border-0",children:[m.jsx("span",{className:"text-coffee-500",children:new Date(e.time).toLocaleTimeString()}),m.jsxs("span",{className:`ml-2 ${Ec(e.level)}`,children:["[",e.level.toUpperCase(),"]"]}),m.jsx("span",{className:"text-cream-200 ml-2",children:e.message})]},e.id)):m.jsx("p",{className:"text-coffee-500 text-center py-4",children:"No logs yet"})})]}),m.jsxs(zl,{className:"border-red-200",children:[m.jsx(Ul,{children:m.jsx(Bl,{icon:m.jsx(Oo,{className:"w-5 h-5 text-red-500"}),children:m.jsx("span",{className:"text-red-600",children:"Danger Zone"})})}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h4",{className:"font-semibold text-coffee-800 mb-1",children:"Restart Device"}),m.jsx("p",{className:"text-sm text-coffee-500",children:"Reboot the ESP32. Settings will be preserved."})]}),m.jsxs(Kl,{variant:"secondary",onClick:()=>{var e;confirm("Restart the device?")&&(null==(e=Ll())||e.sendCommand("restart"))},children:[m.jsx(bo,{className:"w-4 h-4"}),"Restart"]})]}),m.jsx("hr",{className:"my-4 border-cream-200"}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h4",{className:"font-semibold text-red-600 mb-1",children:"Factory Reset"}),m.jsx("p",{className:"text-sm text-coffee-500",children:"Erase all settings and return to factory defaults. This cannot be undone."})]}),m.jsxs(Kl,{variant:"danger",onClick:()=>{var e;confirm("This will erase all settings. Are you sure?")&&confirm("Really? This cannot be undone!")&&(null==(e=Ll())||e.sendCommand("factory_reset"))},children:[m.jsx(To,{className:"w-4 h-4"}),"Factory Reset"]})]})]})]})}function Sc({label:e,value:t}){return m.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-cream-200 last:border-0",children:[m.jsx("span",{className:"text-sm text-coffee-500",children:e}),m.jsx("span",{className:"text-sm font-mono font-medium text-coffee-900",children:t})]})}function jc({label:e,value:t,warning:n}){return m.jsxs("div",{className:"p-4 bg-cream-100 rounded-xl text-center",children:[m.jsx("div",{className:"text-2xl font-bold "+(n?"text-amber-600":"text-coffee-900"),children:t}),m.jsx("div",{className:"text-xs text-coffee-500",children:e})]})}function Ec(e){switch(e.toLowerCase()){case"error":return"text-red-400";case"warn":case"warning":return"text-amber-400";case"info":return"text-blue-400";case"debug":return"text-gray-400";default:return"text-cream-400"}}function Nc(){const e=Lt(e=>e.esp32),t=Lt(e=>e.pico);return m.jsxs("div",{className:"space-y-6",children:[m.jsx(zl,{className:"text-center bg-gradient-to-br from-coffee-800 to-coffee-900 text-white border-0",children:m.jsxs("div",{className:"py-8",children:[m.jsx("img",{src:"/logo.png",alt:"BrewOS",className:"h-20 mx-auto mb-6 brightness-0 invert"}),m.jsx("h1",{className:"text-3xl font-bold mb-2",children:"BrewOS"}),m.jsx("p",{className:"text-cream-300 mb-4",children:"Open-source espresso machine controller"}),m.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-cream-400",children:[m.jsxs("span",{children:["ESP32: ",e.version||"Unknown"]}),m.jsx("span",{children:""}),m.jsxs("span",{children:["Pico: ",t.version||"Unknown"]})]})]})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsx(Cc,{icon:m.jsx(Yi,{className:"w-6 h-6"}),title:"Dual-Core Control",description:"ESP32-S3 for connectivity, Pico for real-time control"}),m.jsx(Cc,{icon:m.jsx(Gi,{className:"w-6 h-6"}),title:"Fully Open Source",description:"Hardware and software designs available on GitHub"}),m.jsx(Cc,{icon:m.jsx(io,{className:"w-6 h-6"}),title:"Community Driven",description:"Built by and for the espresso community"})]}),m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{children:"Resources"})}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.jsx(Tc,{icon:m.jsx(so,{className:"w-5 h-5"}),title:"GitHub Repository",description:"Source code and documentation",href:"https://github.com/your-org/brewos"}),m.jsx(Tc,{icon:m.jsx(to,{className:"w-5 h-5"}),title:"Documentation",description:"Setup guides and API reference",href:"https://brewos.dev/docs"})]})]}),m.jsxs(zl,{children:[m.jsx(Ul,{children:m.jsx(Bl,{children:"System Information"})}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-coffee-500",children:"ESP32 Version"}),m.jsx("p",{className:"font-mono font-medium text-coffee-900",children:e.version||""})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-coffee-500",children:"Pico Version"}),m.jsx("p",{className:"font-mono font-medium text-coffee-900",children:t.version||""})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-coffee-500",children:"UI Version"}),m.jsx("p",{className:"font-mono font-medium text-coffee-900",children:"1.0.0"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-coffee-500",children:"Build"}),m.jsx("p",{className:"font-mono font-medium text-coffee-900",children:"Development"})]})]})]}),m.jsxs(zl,{className:"text-center",children:[m.jsxs("p",{className:"text-coffee-500 mb-2",children:["Made with ",m.jsx(io,{className:"w-4 h-4 inline text-red-500"})," for espresso lovers"]}),m.jsxs("p",{className:"text-sm text-coffee-400",children:[" ",(new Date).getFullYear()," BrewOS Contributors"]})]})]})}function Cc({icon:e,title:t,description:n}){return m.jsxs(zl,{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 bg-accent/10 rounded-xl flex items-center justify-center mx-auto mb-3 text-accent",children:e}),m.jsx("h3",{className:"font-semibold text-coffee-900 mb-1",children:t}),m.jsx("p",{className:"text-sm text-coffee-500",children:n})]})}function Tc({icon:e,title:t,description:n,href:r}){return m.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-4 p-4 bg-cream-100 rounded-xl hover:bg-cream-200 transition-colors group",children:[m.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center text-coffee-600 group-hover:text-accent transition-colors",children:e}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold text-coffee-900 group-hover:text-accent transition-colors",children:t}),m.jsx("p",{className:"text-sm text-coffee-500",children:n})]})]})}function Oc(){const[e,t]=g.useState([]),[n,r]=g.useState(!1),[s,a]=g.useState(""),[i,o]=g.useState(""),[l,c]=g.useState(!1),[u,d]=g.useState("idle"),[h,f]=g.useState(""),p=async()=>{r(!0);try{const e=await fetch("/api/wifi/networks"),n=await e.json();t(n.networks||[])}catch(e){}r(!1)};g.useEffect(()=>{p()},[]);return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-coffee-800 to-coffee-900 flex items-center justify-center p-4",children:m.jsxs(zl,{className:"w-full max-w-md",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("img",{src:"/logo.png",alt:"BrewOS",className:"h-12 mx-auto mb-4"}),m.jsx("h1",{className:"text-2xl font-bold text-coffee-900",children:"WiFi Setup"}),m.jsx("p",{className:"text-coffee-500 mt-1",children:"Connect your BrewOS to WiFi"})]}),"success"===u?m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Hi,{className:"w-8 h-8 text-emerald-600"})}),m.jsx("h2",{className:"text-xl font-bold text-coffee-900 mb-2",children:"Connected!"}),m.jsxs("p",{className:"text-coffee-500 mb-4",children:["Redirecting to ",m.jsx("span",{className:"font-mono",children:"brewos.local"}),"..."]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-coffee-500",children:"Available Networks"}),m.jsx(Kl,{variant:"ghost",size:"sm",onClick:p,disabled:n,children:n?m.jsx(ho,{className:"w-4 h-4 animate-spin"}):m.jsx(bo,{className:"w-4 h-4"})})]}),m.jsx("div",{className:"max-h-48 overflow-y-auto border border-cream-200 rounded-xl",children:0===e.length?m.jsx("div",{className:"p-4 text-center text-coffee-400",children:n?"Scanning...":"No networks found"}):e.map(e=>m.jsxs("button",{onClick:()=>a(e.ssid),className:"w-full flex items-center justify-between p-3 border-b border-cream-200 last:border-0 hover:bg-cream-100 transition-colors "+(s===e.ssid?"bg-accent/10":""),children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Po,{className:"w-4 h-4 "+(e.rssi>-50?"text-emerald-600":e.rssi>-70?"text-amber-600":"text-red-600")}),m.jsx("span",{className:"font-medium text-coffee-900",children:e.ssid})]}),e.secure&&m.jsx("span",{className:"text-xs text-coffee-400",children:""})]},e.ssid))})]}),s&&m.jsx("div",{className:"mb-6",children:m.jsx(ql,{label:"Password",type:"password",value:i,onChange:e=>o(e.target.value),placeholder:"Enter WiFi password"})}),"error"===u&&m.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-xl text-sm",children:h}),m.jsx(Kl,{className:"w-full",onClick:async()=>{if(s){c(!0),d("idle"),f("");try{const e=await fetch("/api/wifi/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ssid:s,password:i})});if(e.ok)d("success"),setTimeout(()=>{window.location.href="http://brewos.local"},3e3);else{const t=await e.json();d("error"),f(t.error||"Connection failed")}}catch(e){d("error"),f("Failed to connect")}c(!1)}},disabled:!s||l,loading:l,children:l?"Connecting...":"Connect"})]})]})})}xc.displayName="QRCodeSVG";const Rc=()=>{const e=Mi();return{user:e.user,session:e.session,loading:e.authLoading,initialized:e.initialized,initialize:e.initialize,signInWithGoogle:e.signInWithGoogle,signOut:e.signOut,getAccessToken:e.getAccessToken}};function Pc(){const e=_e(),{user:t}=Rc();return g.useEffect(()=>{t&&e("/devices")},[t,e]),m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-coffee-800 to-coffee-900 flex items-center justify-center p-4",children:m.jsxs(zl,{className:"w-full max-w-md text-center",children:[m.jsx(Ji,{className:"w-16 h-16 text-accent mx-auto mb-4"}),m.jsx("h1",{className:"text-2xl font-bold text-coffee-900 mb-2",children:"BrewOS"}),m.jsxs("p",{className:"text-coffee-500 mb-6",children:["Cloud features are not configured. Connect directly to your device at"," ",m.jsx("a",{href:"http://brewos.local",className:"text-accent hover:underline",children:"brewos.local"})]})]})})}function Ic(){const e=_e(),{user:t,signOut:n,authLoading:r,devices:s,devicesLoading:a,fetchDevices:i,claimDevice:o,removeDevice:l,renameDevice:c,selectDevice:u}=Mi(),[d,h]=g.useState(!1),[f,p]=g.useState(""),[v,y]=g.useState(""),[b,w]=g.useState(!1),[x,k]=g.useState(""),[_,S]=g.useState(null),[j,E]=g.useState("");g.useEffect(()=>{r||t?t&&i():e("/login")},[t,r,e,i]);const N=async e=>{j.trim()&&await c(e,j.trim()),S(null),E("")};return r?m.jsx("div",{className:"min-h-screen bg-cream-100 flex items-center justify-center",children:m.jsx(ho,{className:"w-8 h-8 animate-spin text-accent"})}):m.jsxs("div",{className:"min-h-screen bg-cream-100",children:[m.jsx("header",{className:"bg-white border-b border-cream-200 sticky top-0 z-50",children:m.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[m.jsx("div",{className:"flex items-center gap-3",children:m.jsx("img",{src:"/logo.png",alt:"BrewOS",className:"h-8"})}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("span",{className:"text-sm text-coffee-600",children:null==t?void 0:t.email}),m.jsx(Kl,{variant:"ghost",size:"sm",onClick:async()=>{await n(),e("/login")},children:m.jsx(fo,{className:"w-4 h-4"})})]})]})}),m.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold text-coffee-900",children:"My Devices"}),m.jsxs(Kl,{onClick:()=>h(!0),children:[m.jsx(mo,{className:"w-4 h-4"}),"Add Device"]})]}),a?m.jsx("div",{className:"flex justify-center py-12",children:m.jsx(ho,{className:"w-8 h-8 animate-spin text-accent"})}):0===s.length?m.jsxs(zl,{className:"text-center py-12",children:[m.jsx(Ji,{className:"w-16 h-16 text-coffee-300 mx-auto mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-coffee-900 mb-2",children:"No devices yet"}),m.jsx("p",{className:"text-coffee-500 mb-6",children:"Scan the QR code on your BrewOS display to add your first device."}),m.jsxs(Kl,{onClick:()=>h(!0),children:[m.jsx(vo,{className:"w-4 h-4"}),"Add Device"]})]}):m.jsx("div",{className:"space-y-4",children:s.map(t=>m.jsxs(zl,{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+(t.isOnline?"bg-emerald-100":"bg-cream-200"),children:t.isOnline?m.jsx(Po,{className:"w-6 h-6 text-emerald-600"}):m.jsx(Ro,{className:"w-6 h-6 text-coffee-400"})}),m.jsx("div",{children:_===t.id?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ql,{value:j,onChange:e=>E(e.target.value),className:"w-48",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&N(t.id),"Escape"===e.key&&S(null)}}),m.jsx(Kl,{size:"sm",onClick:()=>N(t.id),children:m.jsx(Hi,{className:"w-4 h-4"})}),m.jsx(Kl,{size:"sm",variant:"ghost",onClick:()=>S(null),children:m.jsx(Ao,{className:"w-4 h-4"})})]}):m.jsxs(m.Fragment,{children:[m.jsx("h3",{className:"font-semibold text-coffee-900",children:t.name}),m.jsxs("p",{className:"text-sm text-coffee-500",children:[t.id,t.firmwareVersion&&`  v${t.firmwareVersion}`]})]})})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Wl,{variant:t.isOnline?"success":"default",children:t.isOnline?"Online":"Offline"}),m.jsxs(Kl,{size:"sm",onClick:()=>{u(t.id),e(`/device/${t.id}`)},children:[m.jsx(to,{className:"w-4 h-4"}),"Connect"]}),m.jsx(Kl,{variant:"ghost",size:"sm",onClick:()=>{S(t.id),E(t.name)},children:m.jsx(po,{className:"w-4 h-4"})}),m.jsx(Kl,{variant:"ghost",size:"sm",onClick:()=>(async e=>{confirm("Remove this device from your account?")&&await l(e)})(t.id),children:m.jsx(To,{className:"w-4 h-4 text-red-500"})})]})]},t.id))})]}),d&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs(zl,{className:"w-full max-w-md",children:[m.jsxs(Ul,{children:[m.jsx(Bl,{children:"Add Device"}),m.jsx(Kl,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:m.jsx(Ao,{className:"w-4 h-4"})})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-cream-100 rounded-xl p-4 text-center",children:[m.jsx(vo,{className:"w-12 h-12 text-accent mx-auto mb-2"}),m.jsx("p",{className:"text-sm text-coffee-600",children:"Scan the QR code on your BrewOS display, or enter the code manually below."})]}),m.jsx(ql,{label:"Pairing Code",placeholder:"Paste URL or enter DEVICE_ID:TOKEN",value:f,onChange:e=>p(e.target.value)}),m.jsx(ql,{label:"Device Name (optional)",placeholder:"Kitchen Espresso",value:v,onChange:e=>y(e.target.value)}),x&&m.jsx("p",{className:"text-sm text-red-600",children:x}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(Kl,{variant:"secondary",className:"flex-1",onClick:()=>h(!1),children:"Cancel"}),m.jsx(Kl,{className:"flex-1",onClick:async()=>{if(f){w(!0),k("");try{let e="",t="";if(f.includes("?")){const n=new URL(f);e=n.searchParams.get("id")||"",t=n.searchParams.get("token")||""}else{const n=f.split(":");e=n[0],t=n[1]||""}if(!e||!t)return k("Invalid code format"),void w(!1);await o(e,t,v||void 0)?(h(!1),p(""),y("")):k("Failed to claim device. Token may be expired.")}catch(e){k("An error occurred")}w(!1)}},loading:b,disabled:!f,children:"Add Device"})]})]})]})})]})}function Ac(){const e=_e();return g.useEffect(()=>{(async()=>{const{error:t}=await Ai.auth.getSession();if(t)return void e("/login");const n=new URLSearchParams(window.location.search),r=n.get("device"),s=n.get("token");e(r&&s?`/pair?id=${r}&token=${s}`:"/devices")})()},[e]),m.jsx("div",{className:"min-h-screen bg-cream-100 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx(ho,{className:"w-8 h-8 animate-spin text-accent mx-auto mb-4"}),m.jsx("p",{className:"text-coffee-500",children:"Signing in..."})]})})}function $c(){const e=_e(),[t]=pt(),{user:n,loading:r,signInWithGoogle:s}=Rc(),{claimDevice:a}=(()=>{const e=Mi();return{devices:e.devices,loading:e.devicesLoading,fetchDevices:e.fetchDevices,claimDevice:e.claimDevice,removeDevice:e.removeDevice,renameDevice:e.renameDevice}})(),i=t.get("id")||"",o=t.get("token")||"",l=t.get("name")||"",[c,u]=g.useState(l),[d,h]=g.useState("idle"),[f,p]=g.useState("");g.useEffect(()=>{i&&o||e("/devices")},[i,o,e]);const v=async()=>{if(!n){const e=`/pair?id=${i}&token=${encodeURIComponent(o)}&name=${encodeURIComponent(c)}`;return localStorage.setItem("brewos_pair_return",e),void(await s())}h("claiming"),p("");try{await a(i,o,c||void 0)?(h("success"),setTimeout(()=>e("/devices"),2e3)):(h("error"),p("Failed to pair device. The code may have expired."))}catch(t){h("error"),p("An error occurred while pairing.")}};return g.useEffect(()=>{if(n&&"idle"===d){localStorage.getItem("brewos_pair_return")&&(localStorage.removeItem("brewos_pair_return"),v())}},[n,d]),r?m.jsx("div",{className:"min-h-screen bg-cream-100 flex items-center justify-center",children:m.jsx(ho,{className:"w-8 h-8 animate-spin text-accent"})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-coffee-800 to-coffee-900 flex items-center justify-center p-4",children:m.jsx(zl,{className:"w-full max-w-md",children:"success"===d?m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Hi,{className:"w-8 h-8 text-emerald-600"})}),m.jsx("h2",{className:"text-xl font-bold text-coffee-900 mb-2",children:"Device Paired!"}),m.jsx("p",{className:"text-coffee-500",children:"Redirecting to your devices..."})]}):"error"===d?m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Ao,{className:"w-8 h-8 text-red-600"})}),m.jsx("h2",{className:"text-xl font-bold text-coffee-900 mb-2",children:"Pairing Failed"}),m.jsx("p",{className:"text-coffee-500 mb-6",children:f}),m.jsxs("div",{className:"flex gap-3 justify-center",children:[m.jsx(Kl,{variant:"secondary",onClick:()=>e("/devices"),children:"Go to Devices"}),m.jsx(Kl,{onClick:()=>h("idle"),children:"Try Again"})]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx(Ji,{className:"w-16 h-16 text-accent mx-auto mb-4"}),m.jsx("h1",{className:"text-2xl font-bold text-coffee-900",children:"Pair Device"}),m.jsx("p",{className:"text-coffee-500 mt-2",children:"Add this BrewOS device to your account"})]}),m.jsx("div",{className:"bg-cream-100 rounded-xl p-4 mb-6",children:m.jsxs("div",{className:"flex items-center justify-between text-sm",children:[m.jsx("span",{className:"text-coffee-500",children:"Device ID"}),m.jsx("span",{className:"font-mono text-coffee-900",children:i})]})}),m.jsx(ql,{label:"Device Name",placeholder:"Kitchen Espresso",value:c,onChange:e=>u(e.target.value),className:"mb-6"}),!n&&m.jsx("p",{className:"text-sm text-coffee-500 mb-4 text-center",children:"You'll need to sign in to add this device."}),m.jsx(Kl,{className:"w-full",onClick:v,loading:"claiming"===d,children:n?"Add to My Devices":"Sign in & Add Device"})]})})})}function Mc(){const e=_e(),{claimDevice:t,fetchDevices:n}=Mi(),[r,s]=g.useState("welcome"),[a,i]=g.useState(""),[o,l]=g.useState(""),[c,u]=g.useState(!1),[d,h]=g.useState(""),f=async()=>{if(a){u(!0),h("");try{let r="",i="";if(a.includes("?"))try{const e=new URL(a);r=e.searchParams.get("id")||"",i=e.searchParams.get("token")||""}catch{const e=new URLSearchParams(a.split("?")[1]);r=e.get("id")||"",i=e.get("token")||""}else{if(!a.includes(":"))return h("Invalid code format. Scan QR or enter DEVICE_ID:TOKEN"),void u(!1);{const e=a.split(":");r=e[0],i=e[1]||""}}if(!r||!i)return h("Invalid code format"),void u(!1);await t(r,i,o||void 0)?(s("success"),await n(),setTimeout(()=>e("/"),2e3)):h("Failed to add device. The code may have expired.")}catch{h("An error occurred")}u(!1)}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-coffee-800 via-coffee-900 to-coffee-950 flex items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-lg",children:["welcome"===r&&m.jsx(zl,{className:"text-center",children:m.jsxs("div",{className:"py-8",children:[m.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-accent to-amber-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:m.jsx(Ji,{className:"w-10 h-10 text-white"})}),m.jsx("h1",{className:"text-3xl font-bold text-coffee-900 mb-2",children:"Welcome to BrewOS"}),m.jsx("p",{className:"text-coffee-500 mb-8 max-w-sm mx-auto",children:"Control your espresso machine from anywhere. Let's add your first machine."}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs(Kl,{className:"w-full py-4 text-lg",onClick:()=>s("scan"),children:[m.jsx(vo,{className:"w-5 h-5"}),"Scan QR Code"]}),m.jsxs("p",{className:"text-sm text-coffee-400",children:["or"," ",m.jsx("button",{className:"text-accent hover:underline",onClick:()=>s("manual"),children:"enter code manually"})]})]})]})}),"scan"===r&&m.jsxs(zl,{children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-coffee-900 mb-2",children:"Scan QR Code"}),m.jsx("p",{className:"text-coffee-500",children:"Find the QR code on your BrewOS display or web interface."})]}),m.jsx("div",{className:"bg-cream-100 rounded-2xl p-8 mb-6",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"w-48 h-48 bg-white rounded-xl flex items-center justify-center border-4 border-dashed border-cream-300",children:m.jsxs("div",{className:"text-center text-coffee-400",children:[m.jsx(jo,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),m.jsx("p",{className:"text-sm",children:"Point camera at QR"})]})}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-coffee-500",children:[m.jsx(Po,{className:"w-4 h-4"}),m.jsx("span",{children:"Make sure your machine is connected to WiFi"})]})]})}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(ql,{label:"Or paste the pairing URL",placeholder:"https://brewos.app/pair?id=BRW-...",value:a,onChange:e=>i(e.target.value)}),m.jsx(ql,{label:"Machine Name (optional)",placeholder:"Kitchen Espresso",value:o,onChange:e=>l(e.target.value)}),d&&m.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:d}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(Kl,{variant:"secondary",className:"flex-1",onClick:()=>s("welcome"),children:"Back"}),m.jsxs(Kl,{className:"flex-1",onClick:f,loading:c,disabled:!a,children:["Add Machine",m.jsx(Bi,{className:"w-4 h-4"})]})]})]})]}),"manual"===r&&m.jsxs(zl,{children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-coffee-900 mb-2",children:"Enter Pairing Code"}),m.jsx("p",{className:"text-coffee-500",children:"Find the code on your BrewOS display under System  Cloud Access."})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(ql,{label:"Pairing Code",placeholder:"BRW-XXXXXXXX:token...",value:a,onChange:e=>i(e.target.value),hint:"Format: DEVICE_ID:TOKEN or full URL"}),m.jsx(ql,{label:"Machine Name (optional)",placeholder:"Kitchen Espresso",value:o,onChange:e=>l(e.target.value)}),d&&m.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:d}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(Kl,{variant:"secondary",className:"flex-1",onClick:()=>s("welcome"),children:"Back"}),m.jsxs(Kl,{className:"flex-1",onClick:f,loading:c,disabled:!a,children:["Add Machine",m.jsx(Bi,{className:"w-4 h-4"})]})]})]})]}),"success"===r&&m.jsxs(zl,{className:"text-center py-12",children:[m.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Hi,{className:"w-8 h-8 text-emerald-600"})}),m.jsx("h2",{className:"text-2xl font-bold text-coffee-900 mb-2",children:"Machine Added!"}),m.jsxs("p",{className:"text-coffee-500 mb-4",children:[o||"Your machine"," is now connected to your account."]}),m.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-coffee-400",children:[m.jsx(ho,{className:"w-4 h-4 animate-spin"}),"Redirecting to dashboard..."]})]}),("welcome"===r||"scan"===r)&&m.jsxs("div",{className:"mt-8 text-center",children:[m.jsx("h3",{className:"text-sm font-semibold text-cream-300 mb-4",children:"How it works"}),m.jsxs("div",{className:"grid grid-cols-3 gap-4 text-cream-400 text-xs",children:[m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[m.jsx("div",{className:"w-10 h-10 bg-cream-800/30 rounded-full flex items-center justify-center",children:m.jsx(Po,{className:"w-5 h-5"})}),m.jsx("span",{children:"Connect machine to WiFi"})]}),m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[m.jsx("div",{className:"w-10 h-10 bg-cream-800/30 rounded-full flex items-center justify-center",children:m.jsx(vo,{className:"w-5 h-5"})}),m.jsx("span",{children:"Scan QR code on display"})]}),m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[m.jsx("div",{className:"w-10 h-10 bg-cream-800/30 rounded-full flex items-center justify-center",children:m.jsx(Ji,{className:"w-5 h-5"})}),m.jsx("span",{children:"Control from anywhere"})]})]})]})]})})}function Dc(){const[e,t]=g.useState(!0),[n,r]=g.useState(!1),{mode:s,initialized:a,user:i,devices:o,initialize:l,getSelectedDevice:c}=Mi();if(g.useEffect(()=>((async()=>{if(await l(),"local"===s){try{const e=await fetch("/api/mode"),t=await e.json();r(t.apMode)}catch{}const t=(e={mode:"local",endpoint:"/ws"},Dl&&Dl.disconnect(),Dl=new Ml(e),Dl);!function(e){e.onStateChange(e=>{Lt.getState().setConnectionState(e)}),e.onMessage(e=>{Lt.getState().processMessage(e)})}(t),t.connect().catch(e=>{})}var e;t(!1)})(),()=>{var e;null==(e=Ll())||e.disconnect()}),[l,s]),e||!a)return m.jsx("div",{className:"min-h-screen bg-cream-100 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx(ho,{className:"w-8 h-8 animate-spin text-accent mx-auto mb-4"}),m.jsx("p",{className:"text-coffee-500",children:"Loading..."})]})});if("local"===s)return n?m.jsx(Oc,{}):m.jsx(ze,{children:m.jsxs(De,{path:"/",element:m.jsx($l,{}),children:[m.jsx(De,{index:!0,element:m.jsx(Hl,{})}),m.jsx(De,{path:"brewing",element:m.jsx(Jl,{})}),m.jsx(De,{path:"scale",element:m.jsx(Ql,{})}),m.jsx(De,{path:"settings",element:m.jsx(Xl,{})}),m.jsx(De,{path:"system",element:m.jsx(_c,{})}),m.jsx(De,{path:"about",element:m.jsx(Nc,{})}),m.jsx(De,{path:"setup",element:m.jsx(Oc,{})}),m.jsx(De,{path:"*",element:m.jsx($e,{to:"/",replace:!0})})]})});if(!i)return m.jsxs(ze,{children:[m.jsx(De,{path:"/login",element:m.jsx(Pc,{})}),m.jsx(De,{path:"/auth/callback",element:m.jsx(Ac,{})}),m.jsx(De,{path:"/pair",element:m.jsx($c,{})}),m.jsx(De,{path:"*",element:m.jsx($e,{to:"/login",replace:!0})})]});if(0===o.length)return m.jsxs(ze,{children:[m.jsx(De,{path:"/onboarding",element:m.jsx(Mc,{})}),m.jsx(De,{path:"/auth/callback",element:m.jsx(Ac,{})}),m.jsx(De,{path:"/pair",element:m.jsx($c,{})}),m.jsx(De,{path:"*",element:m.jsx($e,{to:"/onboarding",replace:!0})})]});const u=c();return m.jsxs(ze,{children:[m.jsx(De,{path:"/auth/callback",element:m.jsx(Ac,{})}),m.jsx(De,{path:"/pair",element:m.jsx($c,{})}),m.jsx(De,{path:"/onboarding",element:m.jsx(Mc,{})}),m.jsx(De,{path:"/devices",element:m.jsx(Ic,{})}),m.jsx(De,{path:"/login",element:m.jsx($e,{to:"/devices",replace:!0})}),m.jsxs(De,{path:"/device/:deviceId",element:m.jsx($l,{}),children:[m.jsx(De,{index:!0,element:m.jsx(Hl,{})}),m.jsx(De,{path:"brewing",element:m.jsx(Jl,{})}),m.jsx(De,{path:"scale",element:m.jsx(Ql,{})}),m.jsx(De,{path:"settings",element:m.jsx(Xl,{})}),m.jsx(De,{path:"system",element:m.jsx(_c,{})}),m.jsx(De,{path:"about",element:m.jsx(Nc,{})})]}),m.jsx(De,{path:"/",element:m.jsx($e,{to:u?`/device/${u.id}`:"/devices",replace:!0})}),m.jsx(De,{path:"*",element:m.jsx($e,{to:"/",replace:!0})})]})}O.createRoot(document.getElementById("root")).render(m.jsx(v.StrictMode,{children:m.jsx(lt,{children:m.jsx(Dc,{})})}));
